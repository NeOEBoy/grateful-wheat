(this.webpackJsonpwww=this.webpackJsonpwww||[]).push([[0],{113:function(e,t){var r,a,n;function i(){try{var e=navigator.userAgent;if(e.match(/Windows\sPhone/i))return!0;if(e.match(/iPhone|iPod|iPad/i))return!0;if(e.match(/Android/i))return!0;if(e.match(/Edge\D?\d+/i))return!0;var t=e.match(/Trident\D?\d+/i),r=e.match(/MSIE\D?\d+/i),a=e.match(/OPR\D?\d+/i),n=e.match(/Firefox\D?\d+/i),i=e.match(/x64/i);if(!t&&!r&&i)return!0;if(n){if((n=n[0].match(/\d+/))[0]>=41||i)return!0}else if(a){if((a=a[0].match(/\d+/))[0]>=32)return!0}else if(!t&&!r){var o=e.match(/Chrome\D?\d+/i);if(o&&(o=o[0].match(/\d+/))[0]>=41)return!0}return!1}catch(c){return!0}}i()&&function(){if("loading"!==n&&"complete"!==n){n="loading";var e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,t=document.createElement("script"),r=document.createElement("script");t.src="http://localhost:8000/CLodopfuncs.js?priority=1",r.src="http://localhost:18000/CLodopfuncs.js",t.onload=r.onload=function(){n="complete"},t.onerror=r.onerror=function(e){n="complete"},e.insertBefore(t,e.firstChild),e.insertBefore(r,e.firstChild),a=!!(t.src+r.src).match(/\/\/localho|\/\/127.0.0./i)}}(),e.exports={getLodop:function(e,t){var o;try{var c=navigator.userAgent,s=!!c.match(/MSIE/i)||!!c.match(/Trident/i);if(i()){try{o=window.getCLodop()}catch(d){}if(!o&&"complete"!==n)return void("loading"===n?alert("\u7f51\u9875\u8fd8\u6ca1\u4e0b\u8f7d\u5b8c\u6bd5\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4e0b\u518d\u64cd\u4f5c."):alert("\u6ca1\u6709\u52a0\u8f7dCLodop\u7684\u4e3bjs\uff0c\u8bf7\u5148\u8c03\u7528loadCLodop\u8fc7\u7a0b."));if(!o)return void(document.body.innerHTML="<br><font color='#FF00FF'>Web\u6253\u5370\u670d\u52a1CLodop\u672a\u5b89\u88c5\u542f\u52a8\uff0c\u70b9\u51fb\u8fd9\u91cc<a href=download/CLodop_Setup_for_Win32NT.exe target='_self'>\u4e0b\u8f7d\u6267\u884c\u5b89\u88c5</a>"+(a?"<br>\uff08\u82e5\u6b64\u524d\u5df2\u5b89\u88c5\u8fc7\uff0c\u53ef<a href='CLodop.protocol:setup' target='_self'>\u70b9\u8fd9\u91cc\u76f4\u63a5\u518d\u6b21\u542f\u52a8</a>\uff09":"")+"\uff0c\u6210\u529f\u540e\u8bf7\u5237\u65b0\u672c\u9875\u9762\u3002</font>"+document.body.innerHTML);window.CLODOP.CVERSION<"4.1.2.7"&&(document.body.innerHTML="<br><font color='#FF00FF'>Web\u6253\u5370\u670d\u52a1CLodop\u9700\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href=download/CLodop_Setup_for_Win32NT.exe target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u5237\u65b0\u9875\u9762\u3002</font>"+document.body.innerHTML),t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e)}else{var l=s&&!!c.match(/x64/i);if(e||t?o=s?e:t:r?o=r:((o=document.createElement("object")).setAttribute("width",0),o.setAttribute("height",0),o.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),s?o.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):o.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(o),r=o),!o||!o.VERSION)return c.indexOf("Chrome")>=0&&(document.body.innerHTML="<br><br><font color='#FF00FF'>(\u5982\u679c\u6b64\u524d\u6b63\u5e38\uff0c\u4ec5\u56e0\u6d4f\u89c8\u5668\u5347\u7ea7\u6216\u91cd\u5b89\u88c5\u800c\u51fa\u95ee\u9898\uff0c\u9700\u91cd\u65b0\u6267\u884c\u4ee5\u4e0a\u5b89\u88c5\uff09</font>"+document.body.innerHTML),c.indexOf("Firefox")>=0&&(document.body.innerHTML="<br><br><font color='#FF00FF'>\uff08\u6ce8\u610f\uff1a\u5982\u66fe\u5b89\u88c5\u8fc7Lodop\u65e7\u7248\u9644\u4ef6npActiveXPLugin,\u8bf7\u5728\u3010\u5de5\u5177\u3011->\u3010\u9644\u52a0\u7ec4\u4ef6\u3011->\u3010\u6269\u5c55\u3011\u4e2d\u5148\u5378\u5b83\uff09</font>"+document.body.innerHTML),document.body.innerHTML=(l?"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u672a\u5b89\u88c5!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop64.exe target='_self'>\u6267\u884c\u5b89\u88c5</a>,\u5b89\u88c5\u540e\u8bf7\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u8fdb\u5165\u3002</font>":"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u672a\u5b89\u88c5!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop32.exe target='_self'>\u6267\u884c\u5b89\u88c5</a>,\u5b89\u88c5\u540e\u8bf7\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u8fdb\u5165\u3002</font>")+document.body.innerHTML,o}return o.VERSION<"6.2.2.6"&&(i()||(document.body.innerHTML=(l?"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u9700\u8981\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop64.exe target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u91cd\u65b0\u8fdb\u5165\u3002</font>":"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u9700\u8981\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop32.exe target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u91cd\u65b0\u8fdb\u5165\u3002</font>")+document.body.innerHTML)),o}catch(d){alert("getLodop\u51fa\u9519:"+d)}}}},235:function(e,t,r){e.exports=r(400)},240:function(e,t,r){},303:function(e,t,r){},398:function(e,t,r){},400:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(25),o=r.n(i),c=(r(240),r(4)),s=r.n(c),l=r(7),d=r(40),u=r(41),m=r(43),p=r(42),f=r(408),h=r(401),g=r(232),b=r(164),y=r(102),x=r(48),v=r(409),E=r(152);console.log("process.env.NODE_ENV = production");var k="http://gratefulwheat.ruyue.xyz/apis",w=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n,i,o){var c,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=k+"/product/saleList",c+="?pageIndex=",c+=n,c+="&pageSize=",c+=i,c+="&userId=",c+=t,c+="&beginDateTime=",c+=r,c+="&endDateTime=",c+=a,c+="&keyword=",c+=o,e.next=15,fetch(c);case 15:return l=e.sent,e.next=18,l.json();case 18:return d=e.sent,e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})));return function(t,r,a,n,i,o){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n){var i,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=k+"/product/discardList",i+="?userId=",i+=t,i+="&beginDateTime=",i+=r,i+="&endDateTime=",i+=a,i+="&keyword=",i+=n,console.log(i),e.next=12,fetch(i);case 12:return o=e.sent,e.next=15,o.json();case 15:return c=e.sent,e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n,i){var o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=k+"/product/saleAndDiscardList",o+="?userId=",o+=t,o+="&categoryId=",o+=r,o+="&beginDateTime=",o+=a,o+="&endDateTime=",o+=n,o+="&keyword=",o+=i,e.next=13,fetch(o);case 13:return c=e.sent,e.next=16,c.json();case 16:return l=e.sent,e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)})));return function(t,r,a,n,i){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a){var n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k+"/coupon/couponSummaryList",n+="?userId=",n+=t,n+="&beginDateTime=",n+=r,n+="&endDateTime=",n+=a,e.next=9,fetch(n);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n){var i,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=k+"/product/orderList",i+="?userId=",i+=t,i+="&templateId=",i+=r,i+="&beginDateTime=",i+=a,i+="&endDateTime=",i+=n,e.next=11,fetch(i);case 11:return o=e.sent,e.next=14,o.json();case 14:return c=e.sent,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/product/orderItems",r+="?orderId=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/product/findTemplate",r+="?templateUid=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/product/loadProductsByKeyword",r+="?keyword=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(s.a.mark((function e(t,r){var a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k+"/product/createStockFlowOut",(a={}).toUserId=t,a.items=r,e.next=6,fetch("http://gratefulwheat.ruyue.xyz/apis/product/createStockFlowOut",{method:"post",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 6:return n=e.sent,e.next=9,n.json();case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/product/refuseStockFlow",r+="?flowId=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/product/confirmStockFlow",r+="?flowId=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n){var i,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=k+"/product/flowList",i+="?userId=",i+=t,i+="&flowTypeId=",i+=r,i+="&beginDateTime=",i+=a,i+="&endDateTime=",i+=n,e.next=11,fetch(i);case 11:return o=e.sent,e.next=14,o.json();case 14:return c=e.sent,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/product/flowDetail",r+="?flowId=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a){var n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k+"/coupon/diyCouponList",n+="?pageIndex=",n+=t,n+="&pageSize=",n+=r,n+="&keyword=",n+=a,e.next=9,fetch(n);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/member/memberList",r+="?keyword=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(s.a.mark((function e(t,r){var a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k+"/coupon/saveRemark",a+="?couponId=",a+=t,a+="&remark=",a+=r,e.next=7,fetch(a);case 7:return n=e.sent,e.next=10,n.json();case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/coupon/createDIYEvent",r+="?started=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k+"/coupon/DIYEventList",e.next=3,fetch("http://gratefulwheat.ruyue.xyz/apis/coupon/DIYEventList");case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/coupon/DeleteDIYEvent",r+="?_id=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a){var n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k+"/coupon/joinToEvent",n+="?couponId=",n+=t,n+="&memberName=",n+=r,n+="&eventId=",n+=a,e.next=9,fetch(n);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n,i){var o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=k+"/coupon/sendSMSAndJoinToEvent",o+="?phoneNumber=",o+=t,o+="&templateParam1=",o+=r,o+="&couponId=",o+=a,o+="&memberName=",o+=n,o+="&eventId=",o+=i,e.next=13,fetch(o);case 13:return c=e.sent,e.next=16,c.json();case 16:return l=e.sent,e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)})));return function(t,r,a,n,i){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(s.a.mark((function e(t,r,a){var n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k+"/coupon/leaveFromEvent",n+="?couponId=",n+=t,n+="&memberName=",n+=r,n+="&eventId=",n+=a,e.next=9,fetch(n);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/coupon/saveLastPage",r+="?page=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k+"/coupon/getLastPage",e.next=3,fetch("http://gratefulwheat.ruyue.xyz/apis/coupon/getLastPage");case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k+"/product/loadElemeProducts","?userId=","3995767","&categoryId=","&status=","&keyword=",e.next=8,fetch("http://gratefulwheat.ruyue.xyz/apis/product/loadElemeProducts?userId=3995767&categoryId=&status=&keyword=");case 8:return t=e.sent,e.next=11,t.json();case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k+"/product/loadProductsSale",r+="?categoryId=",r+=t,e.next=5,fetch(r);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=r(198),Z=r.n(G),X=r(412),$=(r(115),r(56)),Q=r(9),ee=r.n(Q),te=f.a.Search,re=h.a.RangePicker,ae=[{index:0,name:"\u5168\u90e8",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u5047\u65e5\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u76d8\u9640\u5e97",userId:"4382444"}],ne=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(d.a)(this,r),(a=t.call(this,e)).handleInfiniteOnLoad=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchNextPage();case 2:case"end":return e.stop()}}),e)})));var n=a.props.query,i="",o="";return n&&(i=(i=n.get("beginDateTime")).replace(" ","+"),o=(o=n.get("endDateTime")).replace(" ","+")),a.state={listData:[],loading:!1,hasMore:!0,pageIndex:1,shopIndex:1,userId:"",beginDateTime:i,endDateTime:o,keyword:""},a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,r="",t&&(r=t.get("id")),e.next=5,this.initFirstPage(r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n){var i,o=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<ae.length)){e.next=8;break}if(ae[i].userId!==t){e.next=5;break}return this.setState({shopIndex:i}),e.abrupt("break",8);case 5:i++,e.next=1;break;case 8:this.setState({userId:void 0!==t?t:this.state.userId,listData:[],loading:!1,hasMore:!0,pageIndex:1,beginDateTime:void 0!==r?r:this.state.beginDateTime,endDateTime:void 0!==a?a:this.state.endDateTime,keyword:void 0!==n?n:this.state.keyword},Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fetchNextPage();case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n){return e.apply(this,arguments)}}()},{key:"fetchNextPage",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a,n,i,o,c,l,d,u,m,p,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.hasMore,a=t.pageIndex,n=t.listData,r){e.next=4;break}return g.b.warning("\u6ca1\u6709\u66f4\u591a\u6570\u636e\u4e86"),e.abrupt("return");case 4:return this.setState({loading:!0}),e.prev=5,i=this.state,o=i.userId,c=i.beginDateTime,l=i.endDateTime,d=i.keyword,u=[],e.next=10,w(o,c,l,a,20,d);case 10:(m=e.sent)&&0===m.errCode&&(u=m.list),p=u.length/20>=1,f=a,p&&f++,n=n.concat(u),this.setState({listData:n,hasMore:p,loading:!1,pageIndex:f}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),this.setState({loading:!1});case 22:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.shopIndex,a=t.beginDateTime,i=t.endDateTime,o=ae[r].name;return n.a.createElement("div",{style:{height:window.innerHeight,overflow:"auto"}},n.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u70ed\u5356",n.a.createElement("br",null),n.a.createElement(b.a,{overlay:function(){var t=ae[0],r=ae[1],a=ae[2],i=ae[3],o=ae[4],c=ae[5],d=ae[6],u=ae[7];return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.key,n=ae[a].userId,t.next=4,e.initFirstPage(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement(y.a.Item,{key:t.index},t.name),n.a.createElement(y.a.Item,{key:r.index},r.name),n.a.createElement(y.a.Item,{key:a.index},a.name),n.a.createElement(y.a.Item,{key:i.index},i.name),n.a.createElement(y.a.Item,{key:o.index},o.name),n.a.createElement(y.a.Item,{key:c.index},c.name),n.a.createElement(y.a.Item,{key:d.index},d.name),n.a.createElement(y.a.Item,{key:u.index},u.name))},trigger:["click"]},n.a.createElement(x.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},o,n.a.createElement(X.a,null))),n.a.createElement("br",null),n.a.createElement(re,{size:"small",locale:$.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ee()(a,"YYYY.MM.DD+HH:mm:ss"),ee()(i,"YYYY.MM.DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ee()("00:00:00","HH:mm:ss"),ee()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,r[0]?r[0].format("YYYY.MM.DD+HH:mm:ss"):void 0,r[1]?r[1].format("YYYY.MM.DD+HH:mm:ss"):void 0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),n.a.createElement("br",null),n.a.createElement(te,{style:{width:280,marginTop:15},size:"small",placeholder:"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u540e\u67e5\u8be2",enterButton:"\u67e5\u8be2",onSearch:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,void 0,void 0,r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),n.a.createElement(Z.a,{initialLoad:!1,pageStart:0,loadMore:this.handleInfiniteOnLoad,hasMore:!this.state.loading&&this.state.hasMore,useWindow:!1},n.a.createElement(v.b,{dataSource:this.state.listData,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},footer:n.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var r=e.state.listData.indexOf(t),a="gray";0===r?a="orange":1===r?a="green":2===r&&(a="red");var i="-"!==t.specification?" | "+t.specification:"",o=""!==t.category?" | "+t.category:"";return n.a.createElement(v.b.Item,null,n.a.createElement("div",{style:{width:30,height:30,backgroundColor:a,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},n.a.createElement("div",{style:{marginTop:3}},r+1)),n.a.createElement(v.b.Item.Meta,{title:n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:16}},t.name),n.a.createElement("span",{style:{fontSize:12}},i),n.a.createElement("span",{style:{fontSize:10}},o)),description:"\u9500\u552e\u6570\u91cf\uff1a".concat(t.saleNumber," \u73b0\u6709\u5e93\u5b58\uff1a").concat(t.currentNumber)}),n.a.createElement("span",{style:{marginRight:25,color:"coral",fontSize:18}},"\uffe5".concat(t.realIncome)))}},this.state.loading&&this.state.hasMore&&n.a.createElement("div",null,n.a.createElement(E.a,{style:{position:"absolute",bottom:15,width:"100%",textAlign:"center"}})))))}}]),r}(n.a.Component),ie=h.a.RangePicker,oe=f.a.Search,ce=[{index:0,name:"\u5168\u90e8",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u5047\u65e5\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u76d8\u9640\u5e97",userId:"4382444"}],se=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(d.a)(this,r);var n=(a=t.call(this,e)).props.query,i="",o="";return n&&(i=(i=n.get("beginDateTime")).replace(" ","+"),o=(o=n.get("endDateTime")).replace(" ","+")),a.state={userId:"",shopIndex:1,listData:[],loading:!1,beginDateTime:i,endDateTime:o,keyword:""},a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,r="",t&&(r=t.get("id")),e.next=5,this.initFirstPage(r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n){var i,o=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<ce.length)){e.next=8;break}if(ce[i].userId!==t){e.next=5;break}return this.setState({shopIndex:i}),e.abrupt("break",8);case 5:i++,e.next=1;break;case 8:this.setState({userId:void 0!==t?t:this.state.userId,listData:[],loading:!1,beginDateTime:void 0!==r?r:this.state.beginDateTime,endDateTime:void 0!==a?a:this.state.endDateTime,keyword:void 0!==n?n:this.state.keyword},Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fetchListData();case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n){return e.apply(this,arguments)}}()},{key:"fetchListData",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a,n,i,o,c,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state,r=t.listData,a=t.userId,n=t.beginDateTime,i=t.endDateTime,o=t.keyword,c=[],this.setState({loading:!0}),e.next=6,T(a,n,i,o);case 6:(l=e.sent)&&0===l.errCode&&(c=l.list),d=r.concat(c),this.setState({listData:d,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({loading:!1});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.shopIndex,a=t.beginDateTime,i=t.endDateTime,o=ce[r].name;return n.a.createElement("div",null,n.a.createElement(v.b,{dataSource:this.state.listData,loading:this.state.loading,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},header:n.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u62a5\u635f",n.a.createElement("br",null),n.a.createElement(b.a,{overlay:function(){var t=ce[0],r=ce[1],a=ce[2],i=ce[3],o=ce[4],c=ce[5],d=ce[6],u=ce[7];return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.key,n=ce[a].userId,t.next=4,e.initFirstPage(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement(y.a.Item,{key:t.index},t.name),n.a.createElement(y.a.Item,{key:r.index},r.name),n.a.createElement(y.a.Item,{key:a.index},a.name),n.a.createElement(y.a.Item,{key:i.index},i.name),n.a.createElement(y.a.Item,{key:o.index},o.name),n.a.createElement(y.a.Item,{key:c.index},c.name),n.a.createElement(y.a.Item,{key:d.index},d.name),n.a.createElement(y.a.Item,{key:u.index},u.name))},trigger:["click"]},n.a.createElement(x.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},o,n.a.createElement(X.a,null))),n.a.createElement("br",null),n.a.createElement(ie,{size:"small",locale:$.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ee()(a,"YYYY.MM.DD+HH:mm:ss"),ee()(i,"YYYY.MM.DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ee()("00:00:00","HH:mm:ss"),ee()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r[0].format("YYYY.MM.DD+HH:mm:ss")),console.log(r[1].format("YYYY.MM.DD+HH:mm:ss")),t.next=4,e.initFirstPage(void 0,r[0]?r[0].format("YYYY.MM.DD+HH:mm:ss"):void 0,r[1]?r[1].format("YYYY.MM.DD+HH:mm:ss"):void 0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),n.a.createElement("br",null),n.a.createElement(oe,{style:{width:280,marginTop:15},size:"small",placeholder:"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u540e\u67e5\u8be2",enterButton:"\u67e5\u8be2",onSearch:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,void 0,void 0,r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),footer:n.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var r=e.state.listData.indexOf(t),a="gray";0===r?a="orange":1===r?a="green":2===r&&(a="red");var i="-"!==t.specification?" | "+t.specification:"",o=""!==t.category?" | "+t.category:"";return n.a.createElement(v.b.Item,null,n.a.createElement("div",{style:{width:30,height:30,backgroundColor:a,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},n.a.createElement("div",{style:{marginTop:3}},r+1)),n.a.createElement(v.b.Item.Meta,{title:n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:16}},t.name),n.a.createElement("span",{style:{fontSize:12}},i),n.a.createElement("span",{style:{fontSize:10}},o)),description:"\u62a5\u635f\u6570\u91cf\uff1a".concat(t.discardNumber)}),n.a.createElement("span",{style:{marginRight:25,color:"coral",fontSize:18}},"\uffe5".concat(t.diacardMoney)))}}))}}]),r}(n.a.Component),le=f.a.Search,de=h.a.RangePicker,ue=[{index:0,name:"\u5168\u90e8\u95e8\u5e97",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u5047\u65e5\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u76d8\u9640\u5e97",userId:"4382444"}],me="%221593049816479739965%22,%221593049854760654816%22,%221592989355905414162%22,%221593049881212199906%22,%221593059349213583584%22",pe=[{index:0,name:"\u5168\u90e8",categoryId:me},{index:1,name:"\u73b0\u70e4\u7c7b",categoryId:"%221593049816479739965%22"},{index:2,name:"\u5410\u53f8\u7c7b",categoryId:"%221593049854760654816%22"},{index:3,name:"\u9910\u5305\u7c7b",categoryId:"%221626767161867698544%22"},{index:4,name:"\u897f\u70b9\u7c7b",categoryId:"%221592989355905414162%22"},{index:5,name:"\u5e38\u6e29\u7c7b",categoryId:"%221593049881212199906%22"},{index:6,name:"\u5e72\u70b9\u7c7b",categoryId:"%221593059349213583584%22"}],fe=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(d.a)(this,r);var n=(a=t.call(this,e)).props.query,i=ee()().format("YYYY-MM-DD")+"+00:00:00",o=ee()().format("YYYY-MM-DD")+"+23:59:59";return n&&(i=n.get("beginDateTime")?n.get("beginDateTime"):i,o=n.get("endDateTime")?n.get("endDateTime"):o),a.state={userId:"",shopIndex:1,categoryId:me,categoryIndex:0,listData:[],loading:!1,beginDateTime:i,endDateTime:o,keyword:""},a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,r="",t&&t.get("id")&&(r=t.get("id")),e.next=5,this.initFirstPage(r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r,a,n,i){var o,c,d=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<ue.length)){e.next=8;break}if(ue[o].userId!==t){e.next=5;break}return this.setState({shopIndex:o}),e.abrupt("break",8);case 5:o++,e.next=1;break;case 8:c=0;case 9:if(!(c<pe.length)){e.next=16;break}if(pe[c].categoryId!==r){e.next=13;break}return this.setState({categoryIndex:c}),e.abrupt("break",16);case 13:c++,e.next=9;break;case 16:this.setState({userId:void 0!==t?t:this.state.userId,categoryId:void 0!==r?r:this.state.categoryId,listData:[],loading:!1,beginDateTime:void 0!==a?a:this.state.beginDateTime,endDateTime:void 0!==n?n:this.state.endDateTime,keyword:void 0!==i?i:""},Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetchListData();case 2:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n,i){return e.apply(this,arguments)}}()},{key:"fetchListData",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a,n,i,o,c,l,d,u,m,p,f,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state,r=t.listData,a=t.userId,n=t.categoryId,i=t.beginDateTime,o=t.endDateTime,c=t.keyword,l=[],this.setState({loading:!0}),(u=(d=i).indexOf("+"))>=0&&(d=d.substring(0,u)),(p=(m=o).indexOf("+"))>=0&&(m=m.substring(0,p)),e.next=12,S(a,n,d,m,c);case 12:(f=e.sent)&&0===f.errCode&&(l=f.list),h=r.concat(l),this.setState({listData:h,loading:!1}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),this.setState({loading:!1});case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.shopIndex,a=t.beginDateTime,i=t.endDateTime,o=t.categoryIndex,c=ue[r].name,d=pe[o].name;return n.a.createElement("div",null,n.a.createElement(v.b,{dataSource:this.state.listData,loading:this.state.loading,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},header:n.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u5546\u54c1\u62a5\u635f\u4e0e\u9500\u552e\u5206\u6790",n.a.createElement("br",null),n.a.createElement(b.a,{overlay:function(){var t=ue[0],r=ue[1],a=ue[2],i=ue[3],o=ue[4],c=ue[5],d=ue[6],u=ue[7];return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.key,n=ue[a].userId,t.next=4,e.initFirstPage(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement(y.a.Item,{key:t.index},t.name),n.a.createElement(y.a.Item,{key:r.index},r.name),n.a.createElement(y.a.Item,{key:a.index},a.name),n.a.createElement(y.a.Item,{key:i.index},i.name),n.a.createElement(y.a.Item,{key:o.index},o.name),n.a.createElement(y.a.Item,{key:c.index},c.name),n.a.createElement(y.a.Item,{key:d.index},d.name),n.a.createElement(y.a.Item,{key:u.index},u.name))},trigger:["click"]},n.a.createElement(x.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},c,n.a.createElement(X.a,null))),n.a.createElement("br",null),n.a.createElement(b.a,{overlay:function(){var t=pe[0],r=pe[1],a=pe[2],i=pe[3],o=pe[4],c=pe[5],d=pe[6];return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.key,n=pe[a].categoryId,t.next=4,e.initFirstPage(void 0,n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement(y.a.Item,{key:t.index},t.name),n.a.createElement(y.a.Item,{key:r.index},r.name),n.a.createElement(y.a.Item,{key:a.index},a.name),n.a.createElement(y.a.Item,{key:i.index},i.name),n.a.createElement(y.a.Item,{key:o.index},o.name),n.a.createElement(y.a.Item,{key:c.index},c.name),n.a.createElement(y.a.Item,{key:d.index},d.name))},trigger:["click"]},n.a.createElement(x.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},d,n.a.createElement(X.a,null))),n.a.createElement("br",null),n.a.createElement(de,{size:"small",locale:$.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ee()(a,"YYYY-MM-DD+HH:mm:ss"),ee()(i,"YYYY-MM-DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ee()("00:00:00","HH:mm:ss"),ee()("23:59:59","HH:mm:ss")],showTime:!1,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>=2)){t.next=3;break}return t.next=3,e.initFirstPage(void 0,void 0,r[0]?r[0].format("YYYY-MM-DD"):void 0,r[1]?r[1].format("YYYY-MM-DD"):void 0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),n.a.createElement("br",null),n.a.createElement(le,{style:{width:280,marginTop:15},size:"small",placeholder:"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u540e\u67e5\u8be2",enterButton:"\u67e5\u8be2",onSearch:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,void 0,void 0,void 0,r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),value:this.state.keyword,onChange:function(t){var r=t.target.value;e.setState({keyword:r})}})),footer:n.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var r=e.state.listData.indexOf(t),a="gray";0===r?a="orange":1===r?a="green":2===r&&(a="red");var i="-"!==t.specification?" | "+t.specification:"",o=""!==t.category?" | "+t.category:"";return n.a.createElement(v.b.Item,null,n.a.createElement("div",{style:{width:30,height:30,backgroundColor:a,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},n.a.createElement("div",{style:{marginTop:3}},r+1)),n.a.createElement(v.b.Item.Meta,{title:n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:16}},t.name),n.a.createElement("span",{style:{fontSize:12}},i),n.a.createElement("span",{style:{fontSize:10}},o)),description:n.a.createElement("div",null,n.a.createElement("div",{style:{color:"coral",fontSize:12}},"\u62a5\u635f\u6570\u91cf\uff1a".concat(t.discardNumber,"  \u62a5\u635f\u91d1\u989d\uff1a\uffe5").concat(t.diacardMoney)),n.a.createElement("div",{style:{color:"coral",fontSize:12}},"\u9500\u552e\u6570\u91cf\uff1a".concat(t.saleNumber,"  \u9500\u552e\u91d1\u989d\uff1a\uffe5").concat(t.saleMoney)),n.a.createElement("div",{style:{color:"darkred",fontSize:16}},"\u62a5\u635f\u7387\uff1a".concat(t.discardProportion," %")))}))}}))}}]),r}(n.a.Component),he=h.a.RangePicker,ge=[{index:0,name:"\u5168\u90e8",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u5047\u65e5\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u76d8\u9640\u5e97",userId:"4382444"}],be=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(d.a)(this,r);var n=(a=t.call(this,e)).props.query,i=ee()().format("YYYY.MM.DD")+"+00:00:00",o=ee()().format("YYYY.MM.DD")+"+23:59:59";return n&&(i=n.get("beginDateTime")?n.get("beginDateTime"):i,o=n.get("endDateTime")?n.get("endDateTime"):o),a.state={userId:"",shopIndex:1,listData:[],loading:!1,beginDateTime:i,endDateTime:o},a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,r="",t&&t.get("id")&&(r=t.get("id")),e.next=5,this.initFirstPage(r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r,a){var n,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<ge.length)){e.next=8;break}if(ge[n].userId!==t){e.next=5;break}return this.setState({shopIndex:n}),e.abrupt("break",8);case 5:n++,e.next=1;break;case 8:this.setState({userId:void 0!==t?t:this.state.userId,listData:[],loading:!1,beginDateTime:void 0!==r?r:this.state.beginDateTime,endDateTime:void 0!==a?a:this.state.endDateTime},Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetchListData();case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"fetchListData",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a,n,i,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state,r=t.listData,a=t.userId,n=t.beginDateTime,i=t.endDateTime,o=[],this.setState({loading:!0}),e.next=6,I(a,n,i);case 6:(c=e.sent)&&0===c.errCode&&(o=c.list),l=r.concat(o),this.setState({listData:l,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({loading:!1});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.shopIndex,a=t.beginDateTime,i=t.endDateTime,o=ge[r].name;return n.a.createElement("div",null,n.a.createElement(v.b,{dataSource:this.state.listData,loading:this.state.loading,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},header:n.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u4f18\u60e0\u52b5\u7edf\u8ba1",n.a.createElement("br",null),n.a.createElement(b.a,{overlay:function(){var t=ge[0],r=ge[1],a=ge[2],i=ge[3],o=ge[4],c=ge[5],d=ge[6],u=ge[7];return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.key,n=ge[a].userId,t.next=4,e.initFirstPage(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement(y.a.Item,{key:t.index},t.name),n.a.createElement(y.a.Item,{key:r.index},r.name),n.a.createElement(y.a.Item,{key:a.index},a.name),n.a.createElement(y.a.Item,{key:i.index},i.name),n.a.createElement(y.a.Item,{key:o.index},o.name),n.a.createElement(y.a.Item,{key:c.index},c.name),n.a.createElement(y.a.Item,{key:d.index},d.name),n.a.createElement(y.a.Item,{key:u.index},u.name))},trigger:["click"]},n.a.createElement(x.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},o,n.a.createElement(X.a,null))),n.a.createElement("br",null),n.a.createElement(he,{size:"small",locale:$.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ee()(a,"YYYY.MM.DD+HH:mm:ss"),ee()(i,"YYYY.MM.DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ee()("00:00:00","HH:mm:ss"),ee()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r[0].format("YYYY.MM.DD+HH:mm:ss")),console.log(r[1].format("YYYY.MM.DD+HH:mm:ss")),t.next=4,e.initFirstPage(void 0,r[0]?r[0].format("YYYY.MM.DD+HH:mm:ss"):void 0,r[1]?r[1].format("YYYY.MM.DD+HH:mm:ss"):void 0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),n.a.createElement("br",null)),footer:n.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var r=e.state.listData.indexOf(t),a="gray";return 0===r?a="orange":1===r?a="green":2===r&&(a="red"),n.a.createElement(v.b.Item,null,n.a.createElement("div",{style:{width:30,height:30,backgroundColor:a,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},n.a.createElement("div",{style:{marginTop:3}},r+1)),n.a.createElement(v.b.Item.Meta,{title:n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:16}},t.name)),description:n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("span",{style:{color:"darkred",fontSize:14}},"\u5c5e\u6027\uff1a"),n.a.createElement("span",{style:{color:"darkred",fontSize:12}},"\u9762\u503c\u91d1\u989d\uff1a".concat(t.faceValue," , \u9500\u552e\u4ef7\u683c\uff1a\uffe5").concat(t.salePrice))),n.a.createElement("div",null,n.a.createElement("span",{style:{color:"darkred",fontSize:14}},"\u6838\u9500\uff1a"),n.a.createElement("span",{style:{color:"darkred",fontSize:12}},"\u6570\u91cf\uff1a".concat(t.writeOffNumber," , \u4f18\u60e0\u91d1\u989d\uff1a\uffe5").concat(t.writeOffValue,", \u4ea4\u6613\u91d1\u989d\uff1a\uffe5").concat(t.payValue))),n.a.createElement("div",null,n.a.createElement("span",{style:{color:"gray",fontSize:14}},"\u9500\u552e\uff1a"),n.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u6570\u91cf\uff1a".concat(t.saleNumber," , \u9500\u552e\u91d1\u989d\uff1a\uffe5").concat(t.saleValue))),n.a.createElement("div",null,n.a.createElement("span",{style:{color:"gray",fontSize:14}},"\u975e\u9500\u552e(\u8d60\u9001)\uff1a"),n.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u6570\u91cf\uff1a".concat(t.presentNumber))))}))}}))}}]),r}(n.a.Component),ye=r(404),xe=r(161),ve=r(406),Ee=r(162),ke=r(413),we=r(414),Te=r(415),Se=r(416),Ie=r(417),De=r(418),Oe=r(419),Ce=r(420),Pe=r(421),Ne=r(422),Le=(r(303),f.a.TextArea),ze=f.a.Search,je=ye.a.Text,Me=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).showCallModal=function(){var e=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({callModalVisible:!0,phoneNumToBeCall:"-----------"}),e.next=3,a.getPhoneNumberBy(t);case 3:(r=e.sent)&&a.setState({phoneNumToBeCall:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleCallModalOnOk=function(){a.setState({callModalVisible:!1}),window.location.href="tel:"+a.state.phoneNumToBeCall},a.handleCallModalOnCancel=function(){a.setState({callModalVisible:!1})},a.showMessageModal=function(){var e=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({messageModalVisible:!0,phoneNumToBeCall:"-----------"}),e.next=3,a.getPhoneNumberBy(t);case 3:(r=e.sent)&&a.setState({phoneNumToBeCall:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleMessageModalOnOk=Object(l.a)(s.a.mark((function e(){var t,r,n,i,o,c,l,d,u,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({messageModalVisible:!1}),t=a.state,r=t.DIYEventList,n=t.whichEventIndexToChoose,i=t.lastMessageItem,!(o=r[n])){e.next=12;break}return c=ee()(o.started).utcOffset(8),l=i.couponId,d=i.memberName,u=o._id,e.next=10,V(a.state.phoneNumToBeCall,c.format("MM-DD HH:mm"),l,d,u);case 10:(m=e.sent)&&0===m.errCode?(g.b.info("\u52a0\u5165DIY\u6d3b\u52a8\u540d\u5355\u5e76\u6210\u529f\u53d1\u9001\u77ed\u4fe1"),i.remark=m.remark,a.fetchDIYEventList(),"small"===a.state.DIYEventShowMode&&(a.setState({DIYEventShowMode:"large"}),a.setState({DIYEventShowMode:"small"})),a.forceUpdate()):m?g.b.info(m.errMessage):g.b.info("\u6dfb\u52a0\u5931\u8d25");case 12:case"end":return e.stop()}}),e)}))),a.handleMessageModalOnCancel=function(){a.setState({messageModalVisible:!1})},a.showCreateDIYEventModal=function(){a.setState({createDIYEventModalVisible:!0})},a.showJoinToEventModal=function(){a.setState({joinToEventModalVisible:!0})},a.getPhoneNumberBy=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,_(t);case 3:return 0===(a=e.sent).errCode&&1===a.list.length&&(n=a.list[0].phoneNum,r=n),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleCreateDIYEventModalOnOk=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({createDIYEventModalVisible:!1}),t=a.state.eventTime4createDIY,e.next=4,A(t);case 4:r=e.sent,console.log(r),0!==r.errCode?g.b.error(r.errMessage):(g.b.info("\u521b\u5efaDIY\u6d3b\u52a8\u6210\u529f\uff01"),a.fetchDIYEventList(!1));case 7:case"end":return e.stop()}}),e)}))),a.handleCreateDIYEventModalOnCancel=function(){a.setState({createDIYEventModalVisible:!1})},a.handleCreateDIYEventDayOnOk=function(e){a.setState({eventTime4createDIY:e})},a.handleDeleteDIY=function(){var e=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:if(!(r=e.sent)||0!==r.errCode){e.next=6;break}return e.next=6,a.fetchDIYEventList(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleJoinToEventModalOnOk=Object(l.a)(s.a.mark((function e(){var t,r,n,i,o,c,l,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({joinToEventModalVisible:!1}),t=a.state,r=t.lastJoinToEventItem,n=t.whichEventIndexToChoose,i=t.DIYEventList,o=r.couponId,c=r.memberName,l=i[n],d=l._id,e.next=8,B(o,c,d);case 8:(u=e.sent)&&0===u.errCode?(g.b.info("\u6d3b\u52a8\u52a0\u5165\u6210\u529f"),a.fetchDIYEventList(),r.remark=u.remark,"small"===a.state.DIYEventShowMode&&(a.setState({DIYEventShowMode:"large"}),a.setState({DIYEventShowMode:"small"})),a.forceUpdate()):u?g.b.info(u.errMessage):g.b.info("\u6dfb\u52a0\u5931\u8d25");case 10:case"end":return e.stop()}}),e)}))),a.handleJoinToEventModalOnCancel=function(){a.setState({joinToEventModalVisible:!1})},a.state={pageIndex:1,total:1,listData:[],loading:!1,callModalVisible:!1,phoneNumToBeCall:"",messageModalVisible:!1,lastCallItem:void 0,lastMessageItem:void 0,lastSaveItem:void 0,lastJoinToEventItem:void 0,keyword:"",createDIYEventModalVisible:!1,eventTime4createDIY:ee()().set("second",0).set("millisecond",0),DIYEventList:[],DIYEventShowMode:"large",whichEventIndexToChoose:0,joinToEventModalVisible:!1},a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:(t=e.sent)&&0===t.errCode&&(r=t.page,this.fetchListDataByPage(r)),this.fetchDIYEventList(!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDIYEventList",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,R();case 3:(a=e.sent)&&0===a.errCode&&(r=a.list),this.setState({DIYEventList:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchListDataByPage",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=this.state.keyword,this.setState({listData:[],pageIndex:t},Object(l.a)(s.a.mark((function e(){var n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],i=1,a.setState({loading:!0}),e.next=5,Y(t,10,r);case 5:(o=e.sent)&&0===o.errCode&&(n=o.list,i=o.total),a.setState({listData:n,loading:!1,total:i});case 8:case"end":return e.stop()}}),e)}))))}catch(n){this.setState({loading:!1})}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.listData,a=t.pageIndex,i=t.total,o=t.loading,c=t.phoneNumToBeCall,d=t.lastCallItem,u=t.lastMessageItem,m=t.lastSaveItem,p=t.lastJoinToEventItem,f=t.DIYEventList,b=t.DIYEventShowMode,y=t.whichEventIndexToChoose,E="-----------"===c,k="-----------"===c||f.length<=0,w=f.length<=0,T=ee()();if(f.length>0&&y>=0&&y<f.length){var S=f[y];S&&(T=ee()(S.started).utcOffset(8))}var I=0;return f.forEach((function(e){e.participants&&(I+=e.participants.length)})),n.a.createElement("div",null,n.a.createElement("div",{style:{position:"fixed",zIndex:5,fontSize:12,fontWeight:"bold",width:"100%",background:"rgba(136,136,136,0.95)"}},n.a.createElement("div",{style:{marginTop:4,marginLeft:6,fontSize:24}},"DIY\u6d3b\u52a8\u9884\u7ea6"),n.a.createElement(ze,{style:{width:240,marginTop:4,marginLeft:6,marginBottom:4},size:"middle",placeholder:"\u5238\u53f7/\u4f1a\u5458\u53f7/\u4f1a\u5458\u59d3\u540d",enterButton:"\u67e5\u8be2",onSearch:Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchListDataByPage(1);case 1:case"end":return t.stop()}}),t)}))),value:this.state.keyword,onChange:function(t){var r=t.target.value;e.setState({keyword:r})}}),n.a.createElement(xe.a,{style:{marginTop:4,marginLeft:6,marginBottom:12},onChange:function(t){e.fetchListDataByPage(t),U(t)},showQuickJumper:!0,showSizeChanger:!1,defaultCurrent:1,current:a,pageSize:10,total:i})),"small"===b?n.a.createElement("div",{style:{position:"fixed",zIndex:5,fontSize:12,bottom:0,right:0,background:"rgba(136,136,136,0.9)",borderRadius:10}},n.a.createElement(x.a,{size:"small",shape:"round",style:{marginLeft:4,marginTop:4,marginRight:4,marginBottom:4},icon:n.a.createElement(ke.a,null),onClick:function(){e.setState({DIYEventShowMode:"large"})}},n.a.createElement("span",null,"\u67e5\u770bDIY\u6d3b\u52a8"),n.a.createElement("span",{style:{marginLeft:4,width:22,height:22,backgroundColor:"orange",borderRadius:11},className:"animaToBig"},I))):n.a.createElement("div",{style:{position:"fixed",zIndex:5,fontSize:12,bottom:0,right:0,background:"rgba(136,136,136,0.98)",borderRadius:10}},n.a.createElement(v.b,{size:"small",locale:{emptyText:"\u6ca1\u6709DIY\u6d3b\u52a8\uff0c\u8bf7\u521b\u5efa"},dataSource:f,renderItem:function(t){var r=ee()(t.started).utcOffset(8).format("YYYY-MM-DD dddd HH:mm"),a=t.participants.length;return n.a.createElement(v.b.Item,null,n.a.createElement("div",{style:{marginLeft:-10,marginRight:0},className:"animaToBig"},n.a.createElement(x.a,{size:"small",onClick:function(){void 0!==t.fold?t.fold=!t.fold:t.fold=!0,e.forceUpdate()}},n.a.createElement("span",null,r),n.a.createElement("span",{style:{marginLeft:4,width:22,height:22,backgroundColor:"orange",borderRadius:11}},a)),t.fold?n.a.createElement("div",{style:{textAlign:"center",color:"green",fontSize:12}},"\u70b9\u51fb\u4e0a\u65b9\u6807\u9898\u5c55\u5f00\u540d\u5355"):n.a.createElement(v.b,{split:!1,size:"small",style:{width:196,marginTop:2},grid:{column:2,gutter:0},locale:{emptyText:"\u6ca1\u6709\u53c2\u52a0\u8005\uff0c\u8bf7\u9080\u8bf7"},dataSource:t.participants,renderItem:function(r){var a=t.participants.indexOf(r);return n.a.createElement(v.b.Item,{style:{background:"gray",margin:2},extra:n.a.createElement("div",null,n.a.createElement(x.a,{shape:"circle",danger:!0,style:{marginLeft:-16},size:"small",disabled:!0},a+1),n.a.createElement(x.a,{danger:!0,style:{marginLeft:20},size:"small",icon:n.a.createElement(we.a,null),onClick:Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ve.a.confirm({style:{top:0},title:"\u662f\u5426\u5220\u9664",content:"\u5220\u9664\u4f1a\u4eceDIY\u6d3b\u52a8\u540d\u5355\u4e2d\u79fb\u9664\u8be5\u4f1a\u5458",okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){var t=Object(l.a)(s.a.mark((function t(){var a,n,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.couponId,n=r.memberName,i=r.eventId,t.next=5,W(a,n,i);case 5:return t.next=7,e.fetchDIYEventList(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 1:case"end":return t.stop()}}),t)})))})),className:"animaToBig"},n.a.createElement(v.b.Item.Meta,{title:n.a.createElement("div",{style:{marginTop:-4,marginBottom:-4}},n.a.createElement(je,{style:{color:"white",fontSize:12,width:94,marginLeft:-12},ellipsis:!0},r.memberName))}))}})),n.a.createElement("div",null,n.a.createElement(x.a,{size:"small",danger:!0,icon:n.a.createElement(Te.a,null),style:{marginLeft:2,marginRight:10},onClick:function(){ve.a.confirm({style:{top:0},icon:n.a.createElement(Se.a,null),title:"\u662f\u5426\u5220\u9664",content:n.a.createElement("div",null,"\u5220\u9664\u4f1a\u76f8\u5e94\u89e3\u6563",n.a.createElement("span",{style:{color:"red"}},r),"\u7684DIY\u6d3b\u52a8?"),okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){e.handleDeleteDIY(t._id)}})}})))},header:n.a.createElement("div",{style:{textAlign:"center",fontSize:12,color:"white",height:10}},"DIY\u6d3b\u52a8\u5217\u8868",n.a.createElement(x.a,{style:{position:"absolute",right:4,top:6},type:"dashed",shape:"circle",size:"small",icon:n.a.createElement(Ie.a,null),onClick:function(){e.setState({DIYEventShowMode:"small"})}})),footer:n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement(x.a,{icon:n.a.createElement(De.a,null),shape:"round",style:{marginBottom:0},size:"small",onClick:function(){e.showCreateDIYEventModal()}},"\u521b\u5efaDIY\u6d3b\u52a8"))})),n.a.createElement(v.b,{size:"small",locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},loading:o,header:n.a.createElement("div",{style:{height:110}}),footer:n.a.createElement("div",{style:{height:40,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),dataSource:r,renderItem:function(t){var r="-"!==t.couponWriteOffTime,a=d===t,i=m===t,o=u===t,c=p===t;return n.a.createElement(v.b.Item,{key:t.serialNumber},n.a.createElement("div",{style:{width:20,height:20,backgroundColor:"crimson",color:"white",fontSize:12,fontWeight:"bold",textAlign:"center",marginRight:6,marginLeft:6,borderRadius:4}},n.a.createElement("div",{style:{marginTop:1}},n.a.createElement("span",null,t.serialNumber))),n.a.createElement(v.b.Item.Meta,{title:n.a.createElement("div",null,n.a.createElement("span",{style:{color:"black",fontSize:14}},"\u5238\u7f16\u53f7\uff1a"),n.a.createElement("span",{style:{color:"black",fontSize:12}},t.couponId)),description:n.a.createElement("div",null,n.a.createElement("div",{style:{marginTop:-10}},n.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u5236\u5238:"),n.a.createElement("span",{style:{color:"gray",fontSize:10}},"".concat(t.couponCreateTime))),n.a.createElement("div",{style:{marginTop:-8}},n.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u4f7f\u7528:"),n.a.createElement("span",{style:{color:"gray",fontSize:10}},"".concat(t.couponWriteOffTime))),n.a.createElement("div",{style:{marginTop:-8}},n.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u540d\u5b57:"),n.a.createElement(je,{ellipsis:!0,style:{color:"crimson",fontSize:10,width:100}},"".concat(t.memberName))),n.a.createElement("div",{style:{marginTop:-8}},n.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u72b6\u6001:"),n.a.createElement("span",{style:{color:"crimson",fontSize:10}},"".concat(t.couponStatus))),n.a.createElement(x.a,{type:"primary",icon:n.a.createElement(Oe.a,null),shape:"circle",danger:a,onClick:function(){e.setState({lastCallItem:t}),e.showCallModal(t.memberId)},disabled:r}),n.a.createElement("span",null," "),n.a.createElement(x.a,{type:"primary",icon:n.a.createElement(Ce.a,null),shape:"circle",danger:c,onClick:function(){e.setState({lastJoinToEventItem:t}),e.showJoinToEventModal()},disabled:r}),n.a.createElement("span",null," "),n.a.createElement(x.a,{type:"primary",icon:n.a.createElement(Pe.a,null),shape:"circle",danger:o,onClick:function(){e.setState({lastMessageItem:t}),e.showMessageModal(t.memberId)},disabled:r}))}),n.a.createElement("div",{style:{marginRight:10}},n.a.createElement("div",null,"\u5907\u6ce8\uff1a"),n.a.createElement(Le,{value:t.remark,onChange:function(r){var a=r.target.value;t.remark=a,e.forceUpdate()},disabled:r,style:{width:180},placeholder:"\u8fd9\u91cc\u8f93\u5165\u5907\u6ce8",autoSize:{minRows:2}}),n.a.createElement("br",null),n.a.createElement(x.a,{type:"primary",icon:n.a.createElement(Ne.a,null),disabled:r,danger:i,onClick:Object(l.a)(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.setState({lastSaveItem:t}),r.next=3,F(t.couponId,t.remark);case 3:0===r.sent.errCode?g.b.success("\u5df2\u7ecf\u4fdd\u5b58"):g.b.warning("\u4fdd\u5b58\u5931\u8d25");case 5:case"end":return r.stop()}}),r)}))),style:{marginTop:2}},"\u4fdd\u5b58\u5907\u6ce8")))}}),n.a.createElement(ve.a,{style:{top:0},title:"\u62e8\u6253\u7535\u8bdd",visible:this.state.callModalVisible,onOk:this.handleCallModalOnOk,onCancel:this.handleCallModalOnCancel,okText:"\u786e\u8ba4\u62e8\u6253",cancelText:"\u53d6\u6d88",closable:!0,okButtonProps:{disabled:E},cancelButtonProps:{disabled:E}},n.a.createElement("div",null,n.a.createElement("span",null,"\u4f1a\u5458\u7535\u8bdd\u4e3a\uff1a"),n.a.createElement("span",{style:{color:"red"}},c),n.a.createElement("span",null,"\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u62e8\u6253\uff1f"))),n.a.createElement(ve.a,{style:{top:0},title:"\u53d1\u9001\u77ed\u4fe1",visible:this.state.messageModalVisible,onOk:this.handleMessageModalOnOk,onCancel:this.handleMessageModalOnCancel,okText:"\u6dfb\u52a0\u5230\u540d\u5355\u4e2d\u5e76\u53d1\u9001\u77ed\u4fe1",cancelText:"\u53d6\u6d88",closable:!0,okButtonProps:{disabled:k},cancelButtonProps:{disabled:k}},f.length>0?n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:16}},"\u4f1a\u5458\u7535\u8bdd\u4e3a\uff1a"),n.a.createElement("span",{style:{color:"red"}},c),n.a.createElement("br",null),n.a.createElement("span",{style:{fontSize:16}},"\u77ed\u4fe1\u6a21\u677f\u4e3a\uff1a"),n.a.createElement("span",null,"\u3010\u5f2f\u9ea6\u70d8\u7119\u3011\u60a8\u5df2\u6210\u529f\u9884\u7ea6DIY\u6d3b\u52a8\uff0c\u6d3b\u52a8\u65f6\u95f4\uff1a"),n.a.createElement("span",{style:{color:"green",textDecoration:"underline"}},"".concat(T.format("MM-DD HH:mm"))),n.a.createElement("span",null,"\uff0c\u8bf7\u63d0\u524d10\u5206\u949f\u5230\u8fbe\uff0c\u5982\u53d8\u66f4\u8bf7\u63d0\u524d\u4e00\u5929\u62e8\u625313290768588\u3002"),n.a.createElement("br",null),n.a.createElement("span",{style:{fontSize:16}},"\u6d3b\u52a8\u65f6\u95f4\u4e3a\uff1a"),n.a.createElement(Ee.a.Group,{name:"radiogroup",defaultValue:0,value:y,onChange:function(t){var r=t.target.value;e.setState({whichEventIndexToChoose:r})}},f.map((function(e){var t=ee()(e.started).utcOffset(8).format("YYYY-MM-DD dddd HH:mm"),r=f.indexOf(e);return n.a.createElement(Ee.a,{key:r,value:r},t)}))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",null,"\u53d1\u9001\u6b63\u6587\u77ed\u6d88\u606f\u7ed9\u4f1a\u5458\uff0c\u662f\u5426\u53d1\u9001\uff1f")):n.a.createElement("div",null,"\u8fd8\u672a\u521b\u5efaDIY\u6d3b\u52a8\uff0c\u8bf7\u5148\u53f3\u4e0b\u89d2\u521b\u5efaDIY\u6d3b\u52a8\u518d\u53d1\u9001\u77ed\u4fe1\u3002")),n.a.createElement(ve.a,{style:{top:0},title:"\u521b\u5efaDIY\u6d3b\u52a8",visible:this.state.createDIYEventModalVisible,onOk:this.handleCreateDIYEventModalOnOk,onCancel:this.handleCreateDIYEventModalOnCancel,okText:"\u786e\u8ba4\u521b\u5efa",cancelText:"\u53d6\u6d88",closable:!0},n.a.createElement("div",null,n.a.createElement("span",null,"\u6d3b\u52a8\u65f6\u95f4\uff1a"),n.a.createElement(h.a,{format:"MM-DD dddd HH:mm",showTime:{format:"HH:mm"},value:this.state.eventTime4createDIY,onOk:this.handleCreateDIYEventDayOnOk}),n.a.createElement("div",{style:{marginTop:10}},n.a.createElement("span",null,"\u5feb\u6377\u8bbe\u7f6e\uff1a"),n.a.createElement("span",null,n.a.createElement(x.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ee()().endOf("week").subtract(1,"days").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u672c\u5468\u516d15:30"),n.a.createElement(x.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ee()().endOf("week").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u672c\u5468\u65e515:30"),n.a.createElement(x.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ee()().add(7,"days").endOf("week").subtract(1,"days").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u4e0b\u5468\u516d15:30"),n.a.createElement(x.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ee()().add(7,"days").endOf("week").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u4e0b\u5468\u65e515:30"))))),n.a.createElement(ve.a,{style:{top:0},title:"\u9009\u62e9\u53c2\u52a0DIY\u6d3b\u52a8",visible:this.state.joinToEventModalVisible,onOk:this.handleJoinToEventModalOnOk,onCancel:this.handleJoinToEventModalOnCancel,okText:"\u786e\u8ba4\u52a0\u5165",cancelText:"\u53d6\u6d88",closable:!0,okButtonProps:{disabled:w},cancelButtonProps:{disabled:w}},f.length>0?n.a.createElement("div",null,n.a.createElement(Ee.a.Group,{name:"radiogroup",defaultValue:0,value:y,onChange:function(t){var r=t.target.value;e.setState({whichEventIndexToChoose:r})}},f.map((function(e){var t=ee()(e.started).utcOffset(8).format("YYYY-MM-DD dddd HH:mm"),r=f.indexOf(e);return n.a.createElement(Ee.a,{key:r,value:r},t)})))):n.a.createElement("div",null,"\u8fd8\u672a\u521b\u5efaDIY\u6d3b\u52a8\uff0c\u8bf7\u5148\u53f3\u4e0b\u89d2\u521b\u5efaDIY\u6d3b\u52a8\u518d\u9009\u62e9\u3002")))}}]),r}(n.a.Component),Ye=r(410),_e=r(402),Fe=function(e){for(var t=-1,r=e.GET_PRINTER_COUNT(),a=0;a<r;a++){if("EPSON LQ-735K ESC/P2"===e.GET_PRINTER_NAME(a)){t=a;break}}return t},Ae=h.a.RangePicker,Re=[{index:0,name:"\u5168\u90e8\u95e8\u5e97",userId:""},{index:1,name:"001 - \u5f2f\u9ea6(\u6559\u80b2\u5c40\u5e97)",userId:"3995767"},{index:2,name:"002 - \u5f2f\u9ea6(\u65e7\u9547\u5e97)",userId:"3995771"},{index:3,name:"003 - \u5f2f\u9ea6(\u6c5f\u6ee8\u5e97)",userId:"4061089"},{index:4,name:"004 - \u5f2f\u9ea6(\u6c64\u6cc9\u5e97)",userId:"4061092"},{index:5,name:"005 - \u5f2f\u9ea6(\u5047\u65e5\u5e97)",userId:"4339546"},{index:6,name:"006 - \u5f2f\u9ea6(\u72ee\u5934\u5e97)",userId:"4359267"},{index:7,name:"007 - \u5f2f\u9ea6(\u76d8\u9640\u5e97)",userId:"4382444"}],He=[{index:0,name:"\u5168\u90e8\u6a21\u677f",templateId:"",templateUid:""},{index:1,name:"\u73b0\u70e4\u7c7b",templateId:"187",templateUid:"1595310806940367327"},{index:2,name:"\u897f\u70b9\u7c7b",templateId:"189",templateUid:"1595397637628133418"},{index:3,name:"\u5e38\u6e29\u7c7b",templateId:"183",templateUid:"1595077654714716554"},{index:4,name:"\u5410\u53f8\u9910\u5305\u7c7b",templateId:"182",templateUid:"1595077405589137749"}],Be=["001 - \u5f2f\u9ea6(\u6559\u80b2\u5c40\u5e97)","002 - \u5f2f\u9ea6(\u65e7\u9547\u5e97)","003 - \u5f2f\u9ea6(\u6c5f\u6ee8\u5e97)","004 - \u5f2f\u9ea6(\u6c64\u6cc9\u5e97)","005 - \u5f2f\u9ea6(\u5047\u65e5\u5e97)","006 - \u5f2f\u9ea6(\u72ee\u5934\u5e97)","007 - \u5f2f\u9ea6(\u76d8\u9640\u5e97)"],Ve=["\u73b0\u70e4\u7c7b","\u897f\u70b9\u7c7b","\u5e38\u6e29\u7c7b","\u5410\u53f8\u9910\u5305\u7c7b"],We=[{index:0,name:"\u5168\u90e8\u8d27\u5355",flowTypeId:""},{index:1,name:"\u95e8\u5e97\u8fdb\u8d27\u5355",flowTypeId:"12"},{index:2,name:"\u666e\u901a\u8c03\u8d27\u5355",flowTypeId:"10"},{index:3,name:"\u8c03\u62e8\u9000\u8d27\u5355",flowTypeId:"23"},{index:4,name:"\u666e\u901a\u51fa\u5e93\u5355",flowTypeId:"17"},{index:5,name:"\u91c7\u8d2d\u9000\u8d27\u5355",flowTypeId:"14"}],Ue=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(d.a)(this,r),(a=t.call(this,e)).fetchOrderList=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.setState({alreadyOrderListData:[],alreadyOrderLoading:!0,selectedRowKeys4OrderList:[]},Object(l.a)(s.a.mark((function e(){var t,r,n,i,o,c,l,d,u,m,p,f,h,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,r=t.currentShop4OrderList,n=t.currentTemplate4OrderList,i=t.beginDateTime4OrderList,o=t.endDateTime4OrderList,c=[],l=[],d=Be,u=Ve,m=i.format("YYYY.MM.DD%2BHH:mm:ss"),p=o.format("YYYY.MM.DD%2BHH:mm:ss"),e.next=9,D(r.userId,n.templateId,m,p);case 9:(f=e.sent)&&0===f.errCode&&(c=(c=f.list).sort((function(e,t){return e.orderShopIndex-t.orderShopIndex})),h=[],g=[],c.forEach((function(e){e.key=c.indexOf(e)+1,l.push(e.key),-1===h.indexOf(e.orderShop)&&h.push(e.orderShop),-1===g.indexOf(e.templateName)&&g.push(e.templateName)})),d=[],Be.forEach((function(e){-1===h.indexOf(e)&&d.push(e)})),u=[],Ve.forEach((function(e){-1===g.indexOf(e)&&u.push(e)}))),a.setState({alreadyOrderListData:c,selectedRowKeys4OrderList:l,alreadyOrderLoading:!1,noyetOrderShops:d,noyetOrderTemplates:u});case 12:case"end":return e.stop()}}),e)}))))}catch(t){a.setState({alreadyOrderLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),a.fetchFlowList=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.setState({flowListLoading:!0},Object(l.a)(s.a.mark((function e(){var t,r,n,i,o,c,l,d,u,m,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,r=t.currentShop4FlowList,n=t.currentFlowType,i=t.beginDateTime4FlowList,o=t.endDateTime4FlowList,c=[],l=i.format("YYYY.MM.DD%2BHH:mm:ss"),d=o.format("YYYY.MM.DD%2BHH:mm:ss"),e.next=6,j(r.userId,n.flowTypeId,l,d);case 6:u=e.sent,m=[],p=[],u&&0===u.errCode&&(c=u.list).forEach((function(e){var t=e.transferStatus,r=e.flowType;"\u8c03\u8d27\u5355"!==r&&"\u8c03\u62e8\u9000\u8d27\u5355"!==r||t[1].length<=0&&-1===t[0].indexOf("\u5df2\u62d2\u7edd\u51fa\u8d27")&&(p.push(e.key),"\u5f2f\u9ea6(\u603b\u90e8)"===e.transferTo&&m.push(e.key))})),a.setState({flowListData:c,flowListLoading:!1,baseShopUnHandleFlowSNs:m,allShopUnHandleFlowSNs:p});case 11:case"end":return e.stop()}}),e)}))))}catch(t){a.setState({flowListLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),a.fetchFlowDetail=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.setState({flowDetailData:[],flowDetailLoading:!0},Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(a._currentFlowId);case 2:t=e.sent,r=[],t&&0===t.errCode&&(r=t.list),a.setState({flowDetailData:r,flowDetailLoading:!1});case 6:case"end":return e.stop()}}),e)}))))}catch(t){a.setState({flowDetailLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),a.fetchOrderDetail=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.setState({orderDetailData:[],orderDetailLoading:!0},Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(a._currentOrderId);case 2:t=e.sent,r=[],t&&0===t.errCode&&t.items&&(r=t.items),a.setState({orderDetailData:r,orderDetailLoading:!1});case 6:case"end":return e.stop()}}),e)}))))}catch(t){a.setState({orderDetailLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),a.onOrderItemSelectChange=function(e){a.setState({selectedRowKeys4OrderList:e})},a.handleProductionPrint=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,i,o,c,l,d,u,m,p,f,h,g,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},n=a.state,i=n.alreadyOrderListData,o=n.currentShop4OrderList,c=n.currentTemplate4OrderList,l=n.selectedRowKeys4OrderList,d=n.beginDateTime4OrderList,u=n.endDateTime4OrderList,m=[],p=0;case 4:if(!(p<i.length)){e.next=12;break}if(f=i[p],-1!==l.indexOf(f.key)){e.next=8;break}return e.abrupt("continue",9);case 8:m.push(f);case 9:++p,e.next=4;break;case 12:r.orderList=m,r.template=c,r.shop=o,r.beginDateTime=d,r.endDateTime=u,h=JSON.stringify(r),g="param="+escape(h),b="http://localhost:4000/productionPlanPrinter",b="http://gratefulwheat.ruyue.xyz/productionPlanPrinter",b+="?",b+=g,window.location.replace(b);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleDistributionPrint=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,i,o,c,l,d,u,m,p,f,h,g,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},n=a.state,i=n.alreadyOrderListData,o=n.currentTemplate4OrderList,c=n.currentShop4OrderList,l=n.beginDateTime4OrderList,d=n.endDateTime4OrderList,u=n.selectedRowKeys4OrderList,m=[],p=0;case 4:if(!(p<i.length)){e.next=12;break}if(f=i[p],-1!==u.indexOf(f.key)){e.next=8;break}return e.abrupt("continue",9);case 8:m.push(f);case 9:++p,e.next=4;break;case 12:r.orderList=m,r.template=o,r.shop=c,r.beginDateTime=l,r.endDateTime=d,h=JSON.stringify(r),g="param="+escape(h),b="http://localhost:4000/productDistributePrinter",b="http://gratefulwheat.ruyue.xyz/productDistributePrinter",b+="?",b+=g,window.location.replace(b);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleDistributionInput=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,i,o,c,l,d,u,m,p,f,h,g,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},n=a.state,i=n.alreadyOrderListData,o=n.currentTemplate4OrderList,c=n.currentShop4OrderList,l=n.beginDateTime4OrderList,d=n.endDateTime4OrderList,u=n.selectedRowKeys4OrderList,m=[],p=0;case 4:if(!(p<i.length)){e.next=12;break}if(f=i[p],-1!==u.indexOf(f.key)){e.next=8;break}return e.abrupt("continue",9);case 8:m.push(f);case 9:++p,e.next=4;break;case 12:r.orderList=m,r.template=o,r.shop=c,r.beginDateTime=l,r.endDateTime=d,h=JSON.stringify(r),g="param="+escape(h),b="http://localhost:4000/productDistributeInputer",b="http://gratefulwheat.ruyue.xyz/productDistributeInputer",b+="?",b+=g,window.location.replace(b);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getDayTip=function(e,t){var r="",a=ee()().startOf("day"),n=ee()().endOf("day"),i=ee()().subtract(1,"day").startOf("day"),o=ee()().subtract(1,"day").endOf("day");return 0===e.diff(a,"milliseconds")&&0===t.diff(n)?r="\u4eca\u5929":0===e.diff(i,"milliseconds")&&0===t.diff(o)&&(r="\u6628\u5929"),r};var n=ee()().startOf("day"),i=ee()().endOf("day");var o=ee()().startOf("day"),c=ee()().endOf("day");return a.state={alreadyOrderListData:[],alreadyOrderLoading:!1,currentShop4OrderList:Re[0],currentTemplate4OrderList:He[1],beginDateTime4OrderList:n,endDateTime4OrderList:i,timePickerOpen4OrderList:!1,selectedRowKeys4OrderList:[],noyetOrderShops:[],noyetOrderTemplates:[],orderDetailData:[],orderDetailLoading:!1,orderDetailModalVisible:!1,currentShop4FlowList:Re[0],currentFlowType:We[0],beginDateTime4FlowList:o,endDateTime4FlowList:c,timePickerOpen4FlowList:!1,flowListData:[],flowListLoading:!1,flowDetailData:[],flowDetailLoading:!1,flowDetailModalVisible:!1,refuseFlowLoading:!1,confirmFlowLoading:!1,baseShopUnHandleFlowSNs:[],allShopUnHandleFlowSNs:[]},a._currentFlowId="",a._currentFlowDetailStatus=[],a._currentFlowConfirmText="",a._currentFlowRefuseText="",a._currentTransferFrom="",a._currentTransferTo="",a._currentFlowType="",a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,(r=t&&t.get("param"))&&(r=unescape(r),a=JSON.parse(r),this.setState({currentTemplate4OrderList:a.template,currentShop4OrderList:a.shop,beginDateTime4OrderList:ee()(a.beginDateTime),endDateTime4OrderList:ee()(a.endDateTime)})),e.next=5,this.fetchOrderList();case 5:return e.next=7,this.fetchFlowList();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.alreadyOrderListData,a=t.currentShop4OrderList,i=t.currentTemplate4OrderList,o=t.alreadyOrderLoading,c=t.beginDateTime4OrderList,d=t.endDateTime4OrderList,u=t.timePickerOpen4OrderList,m=t.selectedRowKeys4OrderList,p=t.noyetOrderShops,f=t.noyetOrderTemplates,h=t.currentShop4FlowList,v=t.flowListData,E=t.flowListLoading,k=t.currentFlowType,w=t.beginDateTime4FlowList,T=t.endDateTime4FlowList,S=t.timePickerOpen4FlowList,I=t.flowDetailModalVisible,D=t.flowDetailData,O=t.flowDetailLoading,C=t.refuseFlowLoading,P=t.confirmFlowLoading,N=t.baseShopUnHandleFlowSNs,j=t.allShopUnHandleFlowSNs,M=t.orderDetailData,Y=t.orderDetailLoading,_=t.orderDetailModalVisible,F={selectedRowKeys:m,onChange:this.onOrderItemSelectChange},A="\u65e0";p&&p.length>0&&(A=p.join(" | "));var R=""!==a.userId||""===i.templateId||m.length<=0,H=""===a.userId,B="\u65e0";f&&f.length>0&&(B=f.join(" | "));var V=""===a.userId||""!==i.templateId||m.length<=0,W=""===i.templateId,U=""===a.userId||""!==i.templateId,J=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u5355\u53f7",dataIndex:"orderSerialNumber",key:"orderSerialNumber",width:180,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u65f6\u95f4",dataIndex:"orderTime",key:"orderTime",width:150,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u671f\u671b\u5230\u8d27",dataIndex:"expectTime",key:"expectTime",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u5355\u7c7b\u578b",dataIndex:"orderType",key:"orderType",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u6536\u94f6\u5458",dataIndex:"orderCashier",key:"orderCashier",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6a21\u677f\u540d\u79f0",dataIndex:"templateName",key:"templateName",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u95e8\u5e97",dataIndex:"orderShop",key:"orderShop",width:130,render:function(e){return n.a.createElement("span",{style:{fontSize:10,color:"red"}},e)}},{title:"\u914d\u8d27\u95e8\u5e97",dataIndex:"prepareShop",key:"prepareShop",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u72b6\u6001",dataIndex:"status",key:"status",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:"80",render:function(t,r){return n.a.createElement(Ye.b,{size:"middle"},n.a.createElement(x.a,{size:"small",onClick:function(t){e._currentOrderId=r.orderId,e._currentOrderShopName=r.orderShop,e._currentOrderTime=r.orderTime,e.setState({orderDetailModalVisible:!0},(function(){e.fetchOrderDetail()}))}},"\u67e5\u770b"))}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}}],q=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8d27\u6d41\u5355\u53f7",dataIndex:"flowNumber",key:"flowNumber",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"flowTime",key:"flowTime",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8d27\u5355\u7c7b\u578b",dataIndex:"flowType",key:"flowType",width:80,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u51fa\u8d27\u65b9",dataIndex:"transferFrom",key:"transferFrom",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8fdb\u8d27\u65b9",dataIndex:"transferTo",key:"transferTo",width:100,render:function(e){var t="\u5f2f\u9ea6(\u603b\u90e8)"===e?"red":"black";return n.a.createElement("span",{style:{fontSize:10,color:t}},e)}},{title:"\u72b6\u6001",dataIndex:"transferStatus",key:"transferStatus",width:320,render:function(e,t){var r="transparent",a="gray",i="transparent",o="gray";return"\u8c03\u8d27\u5355"!==t.flowType&&"\u8c03\u62e8\u9000\u8d27\u5355"!==t.flowType||(r=e[1]||-1!==e[0].indexOf("\u5df2\u62d2\u7edd\u51fa\u8d27")?"transparent":"yellow",a=e[1]||-1!==e[0].indexOf("\u5df2\u62d2\u7edd\u51fa\u8d27")?"gray":"black",i=-1===e[1].indexOf("\u5df2\u62d2\u7edd\u6536\u8d27")?"transparent":"red",o=-1===e[1].indexOf("\u5df2\u62d2\u7edd\u6536\u8d27")?"gray":"white"),n.a.createElement("div",{style:{backgroundColor:"transparent"}},n.a.createElement("div",{style:{fontSize:6,color:a,backgroundColor:r}},e[0]),n.a.createElement("div",{style:{fontSize:6,color:o,backgroundColor:i}},e[1]))}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:80,render:function(t,r){return n.a.createElement(Ye.b,{size:"middle"},n.a.createElement(x.a,{size:"small",onClick:function(t){e._currentFlowId=r.flowId,e._currentFlowDetailStatus=r.transferStatus,e._currentTransferFrom=r.transferFrom,e._currentTransferTo=r.transferTo,e._currentFlowType=r.flowType,e.setState({flowDetailModalVisible:!0},(function(){e.fetchFlowDetail()}))}},"\u67e5\u770b"))}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}}],K=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u540d\u79f0",dataIndex:"name",key:"name",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u7c7b\u522b",dataIndex:"categoryName",key:"categoryName",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u51fa\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:80,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}}],G=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u540d\u79f0",dataIndex:"orderProductName",key:"orderProductName",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u7c7b\u522b",dataIndex:"categoryName",key:"categoryName",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:80,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}}],Z=!1;return"\u8c03\u8d27\u5355"!==this._currentFlowType&&"\u8c03\u62e8\u9000\u8d27\u5355"!==this._currentFlowType||this._currentFlowDetailStatus[0].length>0&&this._currentFlowDetailStatus[1].length<=0&&(-1!==this._currentFlowDetailStatus[0].indexOf("\u5f85\u786e\u8ba4\u51fa\u8d27")?(this._currentFlowConfirmText="\u786e\u8ba4\u51fa\u8d27",this._currentFlowRefuseText="\u62d2\u7edd\u51fa\u8d27",Z=!0):-1!==this._currentFlowDetailStatus[0].indexOf("\u5df2\u5b8c\u6210\u51fa\u8d27")&&(this._currentFlowConfirmText="\u786e\u8ba4\u6536\u8d27",this._currentFlowRefuseText="\u62d2\u7edd\u6536\u8d27",Z=!0)),n.a.createElement("div",null,n.a.createElement("div",{style:{marginLeft:30,marginTop:5,fontSize:18}},"\u751f\u4ea7 VS \u914d\u8d27"),n.a.createElement("div",{style:{zIndex:2,bottom:0,left:0,right:0,position:"fixed",width:"100%",height:140,backgroundColor:"lightgray"}},n.a.createElement("div",null,n.a.createElement(x.a,{danger:!0,disabled:R,type:"primary",onClick:this.handleProductionPrint,style:{width:210,height:30,marginLeft:50,marginTop:10}},"\u6253\u5370\u751f\u4ea7\u5355"),H?n.a.createElement("span",null,n.a.createElement("span",{style:{marginLeft:10,color:"tomato",fontSize:8}},"\u672a\u62a5\u8d27\u95e8\u5e97:"),n.a.createElement("span",{style:{marginLeft:5,color:"red",fontSize:14,fontWeight:"bold"}},A)):n.a.createElement("span",null)),n.a.createElement("div",null,n.a.createElement(x.a,{danger:!0,disabled:V,type:"primary",onClick:this.handleDistributionPrint,style:{width:210,height:30,marginLeft:50,marginTop:10}},"\u6253\u5370\u914d\u8d27\u5355"),W?n.a.createElement("span",null,n.a.createElement("span",{style:{marginLeft:10,color:"tomato",fontSize:8}},"\u672a\u62a5\u8d27\u6a21\u677f:"),n.a.createElement("span",{style:{marginLeft:5,color:"red",fontSize:14,fontWeight:"bold"}},B)):n.a.createElement("span",null)),n.a.createElement("div",null,n.a.createElement(x.a,{danger:!0,disabled:U,type:"primary",onClick:this.handleDistributionInput,style:{width:210,height:30,marginLeft:50,marginTop:10}},"\u5f00\u59cb\u914d\u8d27"))),n.a.createElement("div",{style:{marginLeft:30,marginTop:0,marginRight:30,marginBottom:0}},n.a.createElement(b.a,{style:{marginLeft:0},overlay:function(){return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.key,e.setState({currentShop4OrderList:Re[a]},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Re.map((function(e){var t="black";return e.name===a.name&&(t="red"),n.a.createElement(y.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:o},n.a.createElement(x.a,{size:"small",style:{width:160},onClick:function(e){return e.preventDefault()}},a.name,n.a.createElement(X.a,null))),n.a.createElement(b.a,{overlay:function(){return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.key,e.setState({currentTemplate4OrderList:He[a]},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},He.map((function(e){var t="black";return e.name===i.name&&(t="red"),n.a.createElement(y.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:o},n.a.createElement(x.a,{size:"small",style:{width:160,marginLeft:10},onClick:function(e){return e.preventDefault()}},i.name,n.a.createElement(X.a,null))),n.a.createElement(Ae,{open:u,onOpenChange:function(t){e.setState({timePickerOpen4OrderList:t})},style:{marginLeft:10},size:"small",locale:$.a,bordered:!0,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,disabled:o,value:[ee()(c,"YYYY-MM-DD+HH:mm:ss"),ee()(d,"YYYY-MM-DD+HH:mm:ss")],defaultValue:[ee()(c,"YYYY-MM-DD+HH:mm:ss"),ee()(d,"YYYY-MM-DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ee()("00:00:00","HH:mm:ss"),ee()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!0,showMinute:!0,showSecond:!0},onOk:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>=2&&r[0]&&r[1])){t.next=5;break}if(!(r[0]>r[1])){t.next=4;break}return g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u65f6\u95f4"),t.abrupt("return");case 4:e.setState({beginDateTime4OrderList:r[0],endDateTime4OrderList:r[1]},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),renderExtraFooter:function(){return n.a.createElement("span",null,n.a.createElement(x.a,{size:"small",type:"primary",onClick:function(t){var r=ee()().subtract(1,"day").startOf("day"),a=ee()().subtract(1,"day").endOf("day");e.setState({beginDateTime4OrderList:r,endDateTime4OrderList:a,timePickerOpen4OrderList:!1},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))))}},"\u6628\u5929"),n.a.createElement(x.a,{style:{marginLeft:10},size:"small",type:"primary",onClick:function(t){var r=ee()().startOf("day"),a=ee()().endOf("day");e.setState({beginDateTime4OrderList:r,endDateTime4OrderList:a,timePickerOpen4OrderList:!1},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))))}},"\u4eca\u5929"))}}),n.a.createElement("span",{style:{marginLeft:5,marginRight:5,color:"red",fontSize:15}},this.getDayTip(c,d)),n.a.createElement(x.a,{style:{width:180,marginLeft:10},type:"primary",disabled:o,onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"\u67e5\u8be2\u8ba2\u8d27\u5355"),n.a.createElement(_e.a,{style:{marginTop:10},size:"small",loading:o,dataSource:r,columns:J,rowSelection:F,pagination:!1,bordered:!0,scroll:{y:150,scrollToFirstRowOnChange:!0},footer:function(){return n.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171".concat(r.length,"\u9879"))}})),n.a.createElement("div",{style:{marginLeft:30,marginTop:10,marginRight:30,marginBottom:30}},n.a.createElement(b.a,{style:{marginLeft:0},overlay:function(){return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.key,e.setState({currentShop4FlowList:Re[a]},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Re.map((function(e){var t="black";return e.name===h.name&&(t="red"),n.a.createElement(y.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:E},n.a.createElement(x.a,{size:"small",style:{width:160},onClick:function(e){return e.preventDefault()}},h.name,n.a.createElement(X.a,null))),n.a.createElement(b.a,{overlay:function(){return n.a.createElement(y.a,{onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.key,e.setState({currentFlowType:We[a]},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},We.map((function(e){var t="black";return e.name===k.name&&(t="red"),n.a.createElement(y.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:E},n.a.createElement(x.a,{size:"small",style:{width:160,marginLeft:10},onClick:function(e){return e.preventDefault()}},k.name,n.a.createElement(X.a,null))),n.a.createElement(Ae,{open:S,onOpenChange:function(t){e.setState({timePickerOpen4FlowList:t})},style:{marginLeft:10},size:"small",locale:$.a,bordered:!0,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,disabled:E,value:[ee()(w,"YYYY-MM-DD+HH:mm:ss"),ee()(T,"YYYY-MM-DD+HH:mm:ss")],defaultValue:[ee()(w,"YYYY-MM-DD+HH:mm:ss"),ee()(T,"YYYY-MM-DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ee()("00:00:00","HH:mm:ss"),ee()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!0,showMinute:!0,showSecond:!0},onOk:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>=2&&r[0]&&r[1])){t.next=5;break}if(!(r[0]>r[1])){t.next=4;break}return g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u65f6\u95f4"),t.abrupt("return");case 4:e.setState({beginDateTime4FlowList:r[0],endDateTime4FlowList:r[1]},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),renderExtraFooter:function(){return n.a.createElement("span",null,n.a.createElement(x.a,{size:"small",type:"primary",onClick:function(t){var r=ee()().subtract(1,"day").startOf("day"),a=ee()().subtract(1,"day").endOf("day");e.setState({beginDateTime4FlowList:r,endDateTime4FlowList:a,timePickerOpen4FlowList:!1},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"\u6628\u5929"),n.a.createElement(x.a,{style:{marginLeft:10},size:"small",type:"primary",onClick:function(t){var r=ee()().startOf("day"),a=ee()().endOf("day");e.setState({beginDateTime4FlowList:r,endDateTime4FlowList:a,timePickerOpen4FlowList:!1},Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"\u4eca\u5929"))}}),n.a.createElement("span",{style:{marginLeft:5,marginRight:5,color:"red",fontSize:15}},this.getDayTip(w,T)),n.a.createElement(x.a,{style:{width:180,marginLeft:10},type:"primary",disabled:E,onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"\u67e5\u8be2\u8d27\u6d41\u5355"),N.length>0?n.a.createElement(x.a,{style:{marginLeft:10},danger:!0},"\u5f2f\u9ea6(\u603b\u90e8)\uff1a\u5e8f\u53f7\u3010".concat(N,"\u3011\u8c03\u8d27\u5355\u8981\u5904\u7406")):n.a.createElement("div",null),n.a.createElement(_e.a,{style:{marginTop:10},size:"small",loading:E,dataSource:v,columns:q,pagination:!1,bordered:!0,scroll:{y:160,scrollToFirstRowOnChange:!0},footer:function(){return n.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},n.a.createElement("span",null,"\u603b\u5171 ".concat(v.length," \u9879")),j.length>0?n.a.createElement(x.a,{size:"small",danger:!0,style:{marginLeft:10,fontSize:13,color:"red"}},"\u5e8f\u53f7\u3010".concat(j,"\u3011\u8c03\u8d27\u5355\u672a\u5904\u7406")):n.a.createElement("span",null))}})),n.a.createElement(ve.a,{width:1e3,centered:!0,keyboard:!0,maskClosable:!1,title:n.a.createElement("div",null,n.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentOrderShopName),n.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentOrderTime)),visible:_,okText:"\u77e5\u9053\u4e86",cancelButtonProps:{hidden:!0},onOk:function(){e.setState({orderDetailModalVisible:!1})},onCancel:function(){e.setState({orderDetailModalVisible:!1})}},n.a.createElement(_e.a,{style:{marginTop:10},size:"small",loading:Y,dataSource:M,columns:G,pagination:!1,bordered:!0,scroll:{y:400,scrollToFirstRowOnChange:!0},footer:function(){return n.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171 ".concat(M.length," \u9879"))}})),n.a.createElement(ve.a,{width:1e3,centered:!0,keyboard:!0,maskClosable:!1,title:n.a.createElement("div",null,n.a.createElement("div",{style:{color:"green",fontSize:10}},"-"!==this._currentTransferFrom?"".concat(this._currentTransferFrom,"=>").concat(this._currentTransferTo):"".concat(this._currentTransferTo)),n.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentFlowDetailStatus[0]),n.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentFlowDetailStatus[1])),visible:I,onCancel:function(){e.setState({flowDetailModalVisible:!1})},footer:Z?n.a.createElement("div",{style:{marginRight:10,marginBottom:20,marginTop:20}},n.a.createElement(Ye.b,null,n.a.createElement(x.a,{key:"refuse",type:"primary",danger:!0,disabled:C,onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e._currentFlowRefuseText,e._currentFlowRefuseText="\u53d1\u9001\u4e2d",e.setState({refuseFlowLoading:!0}),t.next=5,L(e._currentFlowId);case 5:if(!(n=t.sent)||0!==n.errCode){t.next=14;break}return e._currentFlowRefuseText="",e._currentFlowDetailStatus[1]="\u5df2\u62d2\u7edd\u6536\u8d27",g.b.success("\u62d2\u7edd\u6536\u8d27\u6210\u529f~"),t.next=12,e.fetchFlowList();case 12:t.next=16;break;case 14:e._currentFlowRefuseText=a,g.b.error("\u62d2\u7edd\u6536\u8d27\u5931\u8d25~");case 16:e.setState({refuseFlowLoading:!1});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},this._currentFlowRefuseText),n.a.createElement(x.a,{key:"confirm",type:"primary",danger:!0,disabled:P,onClick:function(){var t=Object(l.a)(s.a.mark((function t(r){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e._currentFlowConfirmText,e._currentFlowConfirmText="\u53d1\u9001\u4e2d",e.setState({confirmFlowLoading:!0}),t.next=5,z(e._currentFlowId);case 5:if(!(n=t.sent)||0!==n.errCode){t.next=14;break}return e._currentFlowConfirmText="",e._currentFlowDetailStatus[1]="\u5df2\u5b8c\u6210\u6536\u8d27",g.b.success("\u786e\u8ba4\u6536\u8d27\u6210\u529f~"),t.next=12,e.fetchFlowList();case 12:t.next=16;break;case 14:e._currentFlowConfirmText=a,g.b.error("\u786e\u8ba4\u6536\u8d27\u5931\u8d25~");case 16:e.setState({confirmFlowLoading:!1});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},this._currentFlowConfirmText))):n.a.createElement("div",null)},n.a.createElement(_e.a,{style:{marginTop:10},size:"small",loading:O,dataSource:D,columns:K,pagination:!1,bordered:!0,scroll:{y:400,scrollToFirstRowOnChange:!0},footer:function(){return n.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171 ".concat(D.length," \u9879"))}})))}}]),r}(n.a.Component),Je=r(70),qe={"1595310806940367327":[],"1595397637628133418":[],"1595077654714716554":[],"1595077405589137749":[]},Ke=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=qe[t]).length>0)){e.next=3;break}return e.abrupt("return",{errCode:0,list:r});case 3:return e.next=5,C(t);case 5:if(!(0===(a=e.sent).errCode&&a.list.length>0)){e.next=9;break}return qe[t]=a.list,e.abrupt("return",a);case 9:return e.abrupt("return",{errCode:-1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=r(113),Ze={"187-2006251756022":1,"187-2006291720144":2,"187-2007261431428":3,"187-2006261548488":4,"187-2006251720443":5,"187-2007171555580":6,"182-2106241432414":1,"182-2106281603003":2,"182-2106281600071":3,"182-2106281603355":4,"182-2106241433091":5,"182-2106281601535":6,"182-2010291510063":7},Xe=["\u5e38\u6e29\u7c7b","\u5410\u53f8\u9910\u5305\u7c7b"],$e=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).componentDidMount=Object(l.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.query,(r=t&&t.get("param"))&&(r=unescape(r),n=JSON.parse(r),a._template=n.template,a._shop=n.shop,a._beginDateTime=n.beginDateTime,a._endDateTime=n.endDateTime,a._orderList=n.orderList,a.refresh());case 3:case"end":return e.stop()}}),e)}))),a.refresh=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({productSpinning:!0,productSpinTipText:"\u51c6\u5907\u6253\u5370..."},Object(l.a)(s.a.mark((function e(){var t,r,n,i,o,c,l,d,u,m,p,f,h,b,y,x,v,E,k,w,T,S,I,D,C,P,N,L,z,j,M,Y,_,F,A,R,H,B,V,W,U,J,q,K,G,Z,X,$,Q,ee,te,re,ae,ne,ie,oe,ce;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a.setState({productSpinTipText:"\u51c6\u5907\u83b7\u53d6..."}),r=0;case 3:if(!(r<a._orderList.length)){e.next=59;break}if(!(n=a._orderList[r])){e.next=56;break}return a.setState({productSpinTipText:"\u83b7\u53d6"+n.orderShop+"..."}),e.next=9,O(n.orderId);case 9:if(0!==(i=e.sent).errCode||!i.items){e.next=53;break}o=!1,c=void 0,c=0;case 14:if(!(c<t.length)){e.next=21;break}if(t[c].orderShop!==n.orderShop||t[c].templateName!==n.templateName){e.next=18;break}return o=!0,e.abrupt("break",21);case 18:++c,e.next=14;break;case 21:if(!o){e.next=43;break}l=t[c].items,d=i.items,u=0;case 25:if(!(u<d.length)){e.next=41;break}m=d[u],p=-1,f=0;case 29:if(!(f<l.length)){e.next=37;break}if(l[f].barcode!==m.barcode){e.next=34;break}return p=f,e.abrupt("break",37);case 34:++f,e.next=29;break;case 37:-1!==p?(h=l[p].orderNumber+m.orderNumber,l[p].orderNumber=h):(b=Object(Je.a)({},m),l.push(b));case 38:++u,e.next=25;break;case 41:e.next=51;break;case 43:for((y={}).orderShop=n.orderShop,y.templateName=n.templateName,y.expectTime=n.expectTime,y.orderTime=n.orderTime,y.items=i.items,x=0;x<i.items.length;++x)v=a._template.templateId+"-"+i.items[x].barcode,E=Ze[v],i.items[x].sortId=E||200;t.push(y);case 51:e.next=56;break;case 53:return t=[],g.b.error("\u83b7\u53d6<"+n.orderShop+">\u8ba2\u8d27\u4ea7\u54c1\u51fa\u9519\uff0c\u8bf7\u68c0\u67e5\uff01"),e.abrupt("break",59);case 56:++r,e.next=3;break;case 59:a.setState({productSpinTipText:"\u5408\u5e76\u81f3\u751f\u4ea7\u8f66\u95f4..."}),(k={}).orderShop="000 - \u5f2f\u9ea6(\u751f\u4ea7\u8f66\u95f4)",k.templateName=a._template.name,t&&t.length>0&&(k.expectTime=t[0].expectTime,k.orderTime=t[0].orderTime),w=[],T=0;case 66:if(!(T<t.length)){e.next=88;break}S=t[T].items,I=0;case 69:if(!(I<S.length)){e.next=85;break}D=S[I],C=D.barcode,P=-1,N=0;case 74:if(!(N<w.length)){e.next=81;break}if(w[N].barcode!==C){e.next=78;break}return P=N,e.abrupt("break",81);case 78:++N,e.next=74;break;case 81:-1!==P?(L=w[P].orderNumber+D.orderNumber,w[P].orderNumber=L):(z=Object(Je.a)({},D),w.push(z));case 82:++I,e.next=69;break;case 85:++T,e.next=66;break;case 88:return j=w,e.next=91,Ke(a._template.templateUid);case 91:if(!(0===(M=e.sent).errCode&&M.list.length>0)){e.next=112;break}Y=M.list,j=[],_=0;case 96:if(!(_<Y.length)){e.next=112;break}F=-1,A=0;case 99:if(!(A<w.length)){e.next=106;break}if(Y[_].barcode!==w[A].barcode){e.next=103;break}return F=A,e.abrupt("break",106);case 103:++A,e.next=99;break;case 106:R={},-1!==F?(R.categoryName=w[F].categoryName,R.orderProductName=w[F].orderProductName,R.barcode=w[F].barcode,R.barcodeSimple=w[F].barcodeSimple,R.sortId=w[F].sortId,R.orderNumber=w[F].orderNumber):(R.categoryName=Y[_].categoryName,R.orderProductName=Y[_].name,R.barcode=Y[_].barcode,R.barcodeSimple=Y[_].barcodeSimple,H=a._template.templateId+"-"+R.barcode,B=Ze[H],R.sortId=B||200,R.orderNumber=0),j.push(R);case 109:++_,e.next=96;break;case 112:V=[],W=0;case 114:if(!(W<j.length)){e.next=129;break}U=j[W],J=-1,q=V.length-1;case 118:if(!(q>=0)){e.next=125;break}if(V[q].categoryName!==U.categoryName){e.next=122;break}return J=q,e.abrupt("break",125);case 122:--q,e.next=118;break;case 125:-1!==J?V.splice(J+1,0,U):V.push(U);case 126:++W,e.next=114;break;case 129:V=V.sort((function(e,t){return e.sortId-t.sortId})),k.items=V,t.unshift(k),K=[],G=0;case 134:if(!(G<t.length)){e.next=175;break}if("000 - \u5f2f\u9ea6(\u751f\u4ea7\u8f66\u95f4)"!==(Z=t[G]).orderShop){e.next=139;break}return K.push(Z),e.abrupt("continue",172);case 139:if(-1===Xe.indexOf(Z.templateName)){e.next=141;break}return e.abrupt("continue",172);case 141:(X={}).orderShop=Z.orderShop,X.templateName=Z.templateName,X.expectTime=Z.expectTime,X.orderTime=Z.orderTime,X.items=[],$=0;case 148:if(!($<k.items.length)){e.next=171;break}if(!(Q=k.items[$])){e.next=168;break}(ee={}).categoryName=Q.categoryName,ee.orderProductName=Q.orderProductName,ee.barcode=Q.barcode,ee.barcodeSimple=Q.barcodeSimple,ee.sortId=Q.sortId,ee.orderNumber=0,te=0;case 159:if(!(te<Z.items.length)){e.next=167;break}if(re=Z.items[te],ee.barcode!==re.barcode){e.next=164;break}return ee.orderNumber=re.orderNumber,e.abrupt("break",167);case 164:++te,e.next=159;break;case 167:X.items.push(ee);case 168:++$,e.next=148;break;case 171:K.push(X);case 172:++G,e.next=134;break;case 175:for(ae=[],ne=0;ne<K.length;++ne)for(ie=K[ne].items,oe=0;oe<ie.length;++oe)oe%29===0&&((ce={}).orderShop=K[ne].orderShop,ce.templateName=K[ne].templateName,ce.expectTime=K[ne].expectTime,ce.orderTime=K[ne].orderTime,ce.items=[],ae.push(ce)),ae[ae.length-1].items.push(ie[oe]);a.setState({productSpinning:!1,productSpinTipText:"",allProductionDataToBePrint:ae});case 178:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),a.getLodopAfterInit=function(){var e=Object(Ge.getLodop)();if(e){e.PRINT_INIT("react\u4f7f\u7528\u6253\u5370\u63d2\u4ef6CLodop");e.SET_PRINTER_INDEX(Fe(e)),e.SET_PRINT_PAGESIZE(2,0,0,"\u9488\u6253\u4e09\u7b49\u5206"),e.SET_PREVIEW_WINDOW(0,0,0,800,600,""),e.SET_SHOW_MODE("LANDSCAPE_DEFROTATED",1),e.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),e.ADD_PRINT_HTM(0,0,"100%","100%","<style>\n                </style> "+document.getElementById("printDiv").innerHTML)}return e},a.productPrintPreprew=function(){var e=a.getLodopAfterInit();e&&e.PREVIEW()},a.productPrintDirect=function(){var e=a.getLodopAfterInit();e&&e.PRINT()},a.productPrintDirectAndBack=function(){a.productPrintDirect(),a.handleBack()},a.handleBack=function(e){var t={};t.template=a._template,t.shop=a._shop,t.beginDateTime=a._beginDateTime,t.endDateTime=a._endDateTime;var r=JSON.stringify(t),n="http://localhost:4000/orderManagement";n="http://gratefulwheat.ruyue.xyz/orderManagement",n+="?",n+="param="+escape(r),window.location.replace(n)},a.state={productSpinTipText:"\u6253\u5370\u751f\u4ea7\u5355",productSpinning:!1,allProductionDataToBePrint:[]},a._orderList=void 0,a._template=void 0,a._shop=void 0,a._beginDateTime=void 0,a._endDateTime=void 0,a}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.allProductionDataToBePrint,a=t.productSpinTipText,i=t.productSpinning;return n.a.createElement(E.a,{tip:a,spinning:i,size:"large"},n.a.createElement("div",null,n.a.createElement("div",{style:{marginLeft:10,marginTop:10}},n.a.createElement("div",{id:"printConfig",style:{float:"left",borderStyle:"none",width:90}},n.a.createElement("div",null,n.a.createElement(x.a,{type:"primary",style:{width:90,height:80},onClick:function(t){return e.handleBack(t)}},n.a.createElement("div",{style:{fontSize:16}},"\u540e\u9000"))),n.a.createElement(x.a,{type:"primary",style:{marginTop:10,width:90,height:80},onClick:this.productPrintPreprew},n.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u6253\u5370\u9884\u89c8")),n.a.createElement(x.a,{type:"primary",danger:!0,style:{marginTop:10,width:90,height:80},onClick:this.productPrintDirectAndBack},n.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u76f4\u63a5\u6253\u5370"))),n.a.createElement("div",{style:{float:"left"}},n.a.createElement("span",{style:{marginLeft:10,fontSize:12,color:"green"}},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(r&&r.length>0&&r[0].orderTime)),n.a.createElement("span",{style:{marginLeft:20,fontSize:12,color:"green"}},"\u671f\u671b\u5230\u8d27\uff1a".concat(r&&r.length>0&&r[0].expectTime)),n.a.createElement("div",{id:"printDiv",style:{marginLeft:10,borderStyle:"dotted",width:420,height:980}},n.a.createElement("div",{id:"printTable",style:{marginTop:0,marginLeft:0,width:410,height:949,backgroundColor:"transparent"}},r.map((function(e){var t=e.items,a=r.indexOf(e);return n.a.createElement("div",{key:a,style:{float:"left",zIndex:10,backgroundColor:"transparent",marginTop:10,height:949}},n.a.createElement("div",{style:{float:"left",marginLeft:0,width:38,height:949,backgroundColor:"transparent"}}),n.a.createElement("table",{border:"1",cellSpacing:"0",style:{float:"left",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2",style:{width:318,textAlign:"center",backgroundColor:"lightyellow"}},e.orderShop)),n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2",style:{textAlign:"center"}},e.templateName)),n.a.createElement("tr",null,n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u54c1\u540d"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u8ba2\u8d27\u91cf"))),n.a.createElement("tbody",null,t.map((function(e){var r=t.indexOf(e)+1,a=e.orderNumber>1e3?"red":"transparent";return n.a.createElement("tr",{key:r},n.a.createElement("th",{key:"1",style:{height:20,textAlign:"center",fontSize:16}},e.orderProductName),n.a.createElement("th",{key:"2",style:{height:20,textAlign:"center",fontSize:16,backgroundColor:a}},0!==e.orderNumber?e.orderNumber:""))}))),n.a.createElement("tfoot",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2"},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(e.orderTime))),n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2"},"\u671f\u671b\u5230\u8d27\uff1a".concat(e.expectTime))))),n.a.createElement("div",{style:{float:"left",marginLeft:0,width:38,height:949,backgroundColor:"transparent"}}))}))))))))}}]),r}(n.a.Component),Qe=[{index:0,name:"\u5168\u90e8\u6a21\u677f",templateId:"",templateUid:""},{index:1,name:"\u73b0\u70e4\u7c7b",templateId:"187",templateUid:"1595310806940367327"},{index:2,name:"\u897f\u70b9\u7c7b",templateId:"189",templateUid:"1595397637628133418"},{index:3,name:"\u5e38\u6e29\u7c7b",templateId:"183",templateUid:"1595077654714716554"},{index:4,name:"\u5410\u53f8\u9910\u5305\u7c7b",templateId:"182",templateUid:"1595077405589137749"}],et={"187-2006251756022":1,"187-2006291720144":2,"187-2007261431428":3,"187-2006261548488":4,"187-2006251720443":5,"187-2007171555580":6,"182-2106241432414":1,"182-2106281603003":2,"182-2106281600071":3,"182-2106281603355":4,"182-2106241433091":5,"182-2106281601535":6,"182-2010291510063":7},tt={"\u73b0\u70e4\u7c7b":1,"\u897f\u70b9\u7c7b":2,"\u5e38\u6e29\u7c7b":3,"\u5410\u53f8\u9910\u5305\u7c7b":4},rt=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).componentDidMount=Object(l.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.query,(r=t&&t.get("param"))&&(r=unescape(r),n=JSON.parse(r),a._template=n.template,a._shop=n.shop,a._beginDateTime=n.beginDateTime,a._endDateTime=n.endDateTime,a._orderList=n.orderList,a.refresh());case 3:case"end":return e.stop()}}),e)}))),a.refresh=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({productSpinning:!0,productSpinTipText:"\u51c6\u5907\u6253\u5370..."},Object(l.a)(s.a.mark((function e(){var t,r,n,i,o,c,l,d,u,m,p,f,h,b,y,x,v,E,k,w,T,S,I,D,C,P,N,L,z,j,M,Y,_,F,A,R,H,B,V,W,U,J,q,K,G,Z,X,$;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a.setState({productSpinTipText:"\u51c6\u5907\u83b7\u53d6..."}),r=0;case 3:if(!(r<a._orderList.length)){e.next=70;break}if(!(n=a._orderList[r])){e.next=67;break}return a.setState({productSpinTipText:"\u83b7\u53d6"+n.templateName+"..."}),e.next=9,O(n.orderId);case 9:if(0!==(i=e.sent).errCode||!i.items){e.next=64;break}o=-1,c=0;case 13:if(!(c<Qe.length)){e.next=20;break}if(Qe[c].name!==n.templateName){e.next=17;break}return o=c,e.abrupt("break",20);case 17:++c,e.next=13;break;case 20:if(-1!==o){e.next=22;break}return e.abrupt("return");case 22:l=!1,d=void 0,d=0;case 25:if(!(d<t.length)){e.next=32;break}if(t[d].orderShop!==n.orderShop||t[d].templateName!==n.templateName){e.next=29;break}return l=!0,e.abrupt("break",32);case 29:++d,e.next=25;break;case 32:if(!l){e.next=54;break}u=t[d].items,m=i.items,p=0;case 36:if(!(p<m.length)){e.next=52;break}f=m[p],h=-1,b=0;case 40:if(!(b<u.length)){e.next=48;break}if(u[b].barcode!==f.barcode){e.next=45;break}return h=b,e.abrupt("break",48);case 45:++b,e.next=40;break;case 48:-1!==h?(y=u[h].orderNumber+f.orderNumber,u[h].orderNumber=y):((x={}).categoryName=f.categoryName,x.orderProductName=f.orderProductName,x.barcode=f.barcode,x.barcodeSimple=f.barcodeSimple,x.orderNumber=f.orderNumber,x.sortId=f.sortId,u.push(x));case 49:++p,e.next=36;break;case 52:e.next=62;break;case 54:for((v={}).orderShop=n.orderShop,v.templateName=n.templateName,v.expectTime=n.expectTime,v.orderTime=n.orderTime,v.items=i.items,E=0;E<i.items.length;++E)k=Qe[o].templateId+"-"+i.items[E].barcode,w=et[k],i.items[E].sortId=w||200;t.push(v);case 62:e.next=67;break;case 64:return t=[],g.b.error("\u83b7\u53d6<"+n.orderShop+">\u8ba2\u8d27\u4ea7\u54c1\u51fa\u9519\uff0c\u8bf7\u68c0\u67e5\uff01"),e.abrupt("break",70);case 67:++r,e.next=3;break;case 70:a.setState({productSpinTipText:"\u6574\u7406\u6a21\u677f\u4e2d..."}),T=[],S=0;case 73:if(!(S<t.length)){e.next=138;break}I=t[S].items,D=I,C=-1,P=0;case 78:if(!(P<Qe.length)){e.next=85;break}if(Qe[P].name!==t[S].templateName){e.next=82;break}return C=P,e.abrupt("break",85);case 82:++P,e.next=78;break;case 85:if(-1!==C){e.next=87;break}return e.abrupt("return");case 87:return e.next=89,Ke(Qe[C].templateUid);case 89:if(!(0===(N=e.sent).errCode&&N.list.length>0)){e.next=135;break}L=N.list,D=[],z=0;case 94:if(!(z<L.length)){e.next=110;break}j=-1,M=0;case 97:if(!(M<I.length)){e.next=104;break}if(L[z].barcode!==I[M].barcode){e.next=101;break}return j=M,e.abrupt("break",104);case 101:++M,e.next=97;break;case 104:Y={},-1!==j?(Y.categoryName=I[j].categoryName,Y.orderProductName=I[j].orderProductName,Y.barcode=I[j].barcode,Y.barcodeSimple=I[j].barcodeSimple,Y.sortId=I[j].sortId,Y.orderNumber=I[j].orderNumber):(Y.categoryName=L[z].categoryName,Y.orderProductName=L[z].name,Y.barcode=L[z].barcode,Y.barcodeSimple=L[z].barcodeSimple,_=Qe[C].templateId+"-"+L[z].barcode,F=et[_],Y.sortId=F||200,Y.orderNumber=0),D.push(Y);case 107:++z,e.next=94;break;case 110:A=[],R=0;case 112:if(!(R<D.length)){e.next=127;break}H=D[R],B=-1,V=A.length-1;case 116:if(!(V>=0)){e.next=123;break}if(A[V].categoryName!==H.categoryName){e.next=120;break}return B=V,e.abrupt("break",123);case 120:--V,e.next=116;break;case 123:-1!==B?A.splice(B+1,0,H):A.push(H);case 124:++R,e.next=112;break;case 127:A=A.sort((function(e,t){return e.sortId-t.sortId})),(W={}).orderShop=t[S].orderShop,W.templateName=t[S].templateName,W.expectTime=t[S].expectTime,W.orderTime=t[S].orderTime,W.items=A,T.push(W);case 135:++S,e.next=73;break;case 138:for(a.setState({productSpinTipText:"\u6392\u5e8f\u4e2d..."}),U=[],J=0;J<T.length;++J)(q=T[J]).sortId=tt[q.templateName],U.push(q);for(U=U.sort((function(e,t){return e.sortId-t.sortId})),a.setState({productSpinTipText:"\u6574\u7406A4\u4e2d..."}),K=[],G=0;G<U.length;++G)for(Z=U[G].items,X=0;X<Z.length;++X)X%29===0&&(($={}).orderShop=U[G].orderShop,$.templateName=U[G].templateName,$.expectTime=U[G].expectTime,$.orderTime=U[G].orderTime,$.items=[],K.push($)),K[K.length-1].items.push(Z[X]);a.setState({productSpinning:!1,productSpinTipText:"",allDistributionDataToBePrint:K});case 146:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),a.getLodopAfterInit=function(){var e=Object(Ge.getLodop)();if(e){e.PRINT_INIT("react\u4f7f\u7528\u6253\u5370\u63d2\u4ef6CLodop");e.SET_PRINTER_INDEX(function(e){for(var t=-1,r=e.GET_PRINTER_COUNT(),a=0;a<r;a++){if("HP DeskJet 3630 series"===e.GET_PRINTER_NAME(a)){t=a;break}}return t}(e)),e.SET_PRINT_PAGESIZE(2,0,0,"A4"),e.SET_PREVIEW_WINDOW(0,0,0,800,600,""),e.SET_SHOW_MODE("LANDSCAPE_DEFROTATED",1),e.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),e.ADD_PRINT_HTM(0,0,"100%","100%","<style>\n                </style> "+document.getElementById("printDiv").innerHTML)}return e},a.productPrintPreprew=function(){var e=a.getLodopAfterInit();e&&e.PREVIEW()},a.productPrintDirect=function(){var e=a.getLodopAfterInit();e&&e.PRINT()},a.productPrintDirectAndBack=function(){a.productPrintDirect(),a.handleBack()},a.handleBack=function(e){var t={};t.template=a._template,t.shop=a._shop,t.beginDateTime=a._beginDateTime,t.endDateTime=a._endDateTime;var r=JSON.stringify(t),n="http://localhost:4000/orderManagement";n="http://gratefulwheat.ruyue.xyz/orderManagement",n+="?",n+="param="+escape(r),window.location.replace(n)},a.state={allDistributionDataToBePrint:[],productSpinTipText:"",productSpinning:!1},a._template=void 0,a._shop=void 0,a._beginDateTime=void 0,a._endDateTime=void 0,a}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.allDistributionDataToBePrint,a=t.productSpinTipText,i=t.productSpinning;return n.a.createElement(E.a,{tip:a,spinning:i,size:"large"},n.a.createElement("div",null,n.a.createElement("div",{style:{marginLeft:10,marginTop:10}},n.a.createElement("div",{id:"printConfig",style:{float:"left",borderStyle:"none",width:90}},n.a.createElement("div",null,n.a.createElement(x.a,{type:"primary",style:{width:90,height:80},onClick:function(t){return e.handleBack(t)}},n.a.createElement("div",{style:{fontSize:16}},"\u540e\u9000"))),n.a.createElement(x.a,{type:"primary",style:{marginTop:10,width:90,height:80},onClick:this.productPrintPreprew},n.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u6253\u5370\u9884\u89c8")),n.a.createElement(x.a,{type:"primary",danger:!0,style:{marginTop:10,width:90,height:80},onClick:this.productPrintDirectAndBack},n.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u76f4\u63a5\u6253\u5370"))),n.a.createElement("div",{style:{float:"left"}},n.a.createElement("span",{style:{marginLeft:10,fontSize:12,color:"green"}},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(r&&r.length>0&&r[0].orderTime)),n.a.createElement("span",{style:{marginLeft:20,fontSize:12,color:"green"}},"\u671f\u671b\u5230\u8d27\uff1a".concat(r&&r.length>0&&r[0].expectTime)),n.a.createElement("div",{id:"printDiv",style:{marginLeft:10,borderStyle:"dotted",width:1379,height:968}},n.a.createElement("div",{id:"printTable",style:{marginTop:0,marginLeft:28,width:1375,height:964,backgroundColor:"transparent"}},r.map((function(e){var t=e.items,a=r.indexOf(e);return n.a.createElement("div",{key:a,style:{float:"left",zIndex:10,backgroundColor:"transparent",marginTop:44,height:920}},n.a.createElement("div",{style:{float:"left",marginLeft:0,width:4,height:920}}),n.a.createElement("table",{border:"1",cellSpacing:"0",style:{float:"left",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"7",style:{width:323,textAlign:"center",backgroundColor:"lightgrey"}},e.orderShop)),n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"7",style:{width:323,textAlign:"center"}},e.templateName)),n.a.createElement("tr",null,n.a.createElement("th",{style:{textAlign:"center",fontSize:14}},"\u7b80\u7801"),n.a.createElement("th",{style:{textAlign:"center"}},"\u54c1\u540d"),n.a.createElement("th",{style:{textAlign:"center",fontSize:10}},"\u8ba2\u8d27\u91cf"),n.a.createElement("th",{style:{textAlign:"center"}},"\u4e00"),n.a.createElement("th",{style:{textAlign:"center"}},"\u4e8c"),n.a.createElement("th",{style:{textAlign:"center"}},"\u4e09"),n.a.createElement("th",{style:{textAlign:"center",fontSize:12}},"\u5907\u6ce8"))),n.a.createElement("tbody",null,t.map((function(e){var r=t.indexOf(e)+1,a=e.orderNumber>1e3?"red":"transparent";return n.a.createElement("tr",{key:r,style:{height:24}},n.a.createElement("th",{key:"1",style:{textAlign:"center",fontSize:16,width:16}},e.barcodeSimple),n.a.createElement("th",{key:"2",style:{textAlign:"center",fontSize:15,width:130}},e.orderProductName),n.a.createElement("th",{key:"3",style:{textAlign:"center",fontSize:16,width:8,backgroundColor:a}},0!==e.orderNumber?e.orderNumber:""),n.a.createElement("th",{key:"4",style:{textAlign:"center",fontSize:16,width:8}}),n.a.createElement("th",{key:"5",style:{textAlign:"center",fontSize:16,width:8}}),n.a.createElement("th",{key:"6",style:{textAlign:"center",fontSize:16,width:8}}),n.a.createElement("th",{key:"7",style:{textAlign:"center",fontSize:16,width:8}}))}))),n.a.createElement("tfoot",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"7"},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(e.orderTime))),n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"7"},"\u671f\u671b\u5230\u8d27\uff1a".concat(e.expectTime))))),n.a.createElement("div",{style:{float:"left",marginLeft:0,width:4,height:920}}))}))))))))}}]),r}(n.a.Component),at=r(126),nt=r(178),it=r(127),ot=r(403),ct=r(411),st=r(220),lt=r.n(st),dt=r(423),ut=r(79),mt=r.n(ut),pt=f.a.Search,ft=[{index:0,name:"\u5168\u90e8\u6a21\u677f",templateId:"",templateUid:""},{index:1,name:"\u73b0\u70e4\u7c7b",templateId:"187",templateUid:"1595310806940367327"},{index:2,name:"\u897f\u70b9\u7c7b",templateId:"189",templateUid:"1595397637628133418"},{index:3,name:"\u5e38\u6e29\u7c7b",templateId:"183",templateUid:"1595077654714716554"},{index:4,name:"\u5410\u53f8\u9910\u5305\u7c7b",templateId:"182",templateUid:"1595077405589137749"}],ht={"187-2006251756022":1,"187-2006291720144":2,"187-2007261431428":3,"187-2006261548488":4,"187-2006251720443":5,"187-2007171555580":6,"182-2106241432414":1,"182-2106281603003":2,"182-2106281600071":3,"182-2106281603355":4,"182-2106241433091":5,"182-2106281601535":6,"182-2010291510063":7},gt=["\u5916\u8d2d\u54c1","\u5f2f\u9ea6\u8017\u6750","\u5f2f\u9ea6\u5305\u88c5","\u5f2f\u9ea6\u4f20\u7edf\u96f6\u98df","\u5f2f\u9ea6\u5c0f\u96f6\u98df","\u5f2f\u9ea6\u534a\u6210\u54c1"],bt=n.a.createContext(null),yt=function(e){e.index;var t=Object(it.a)(e,["index"]),r=ot.a.useForm(),a=Object(nt.a)(r,1)[0];return n.a.createElement(ot.a,{form:a,component:!1},n.a.createElement(bt.Provider,{value:a},n.a.createElement("tr",t)))},xt=function(e){var t=e.title,r=e.editable,i=e.children,o=e.dataIndex,c=e.record,d=e.handleEditableCellNextFocus,u=e.handleEditableCellCurrentFocus,m=e.handleEditableCellCurrentEnter,p=Object(it.a)(e,["title","editable","children","dataIndex","record","handleEditableCellNextFocus","handleEditableCellCurrentFocus","handleEditableCellCurrentEnter"]),h=i,g=Object(a.useRef)(null),b=Object(a.useContext)(bt);if(c){g&&g.current&&setTimeout((function(){c&&c.editing&&g.current&&g.current.select()}),0);var y=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.validateFields();case 3:t=e.sent,r=parseInt(t[o]),c[o]=r,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.validateFields();case 3:if(t=e.sent,!((r=parseInt(t[o]))>1e3||r<=0)){e.next=8;break}return new Audio(mt.a).play(),e.abrupt("return");case 8:d(),m(c,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Save failed:",e.t0),new Audio(mt.a).play();case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(c);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(r){var E=c[o];h=n.a.createElement(ot.a.Item,{style:{margin:0},name:o,rules:[{required:!0,message:"".concat(t," \u8bf7\u8f93\u5165\u6574\u6570."),pattern:/^[0-9]+$/}],initialValue:E},n.a.createElement(f.a,{id:c&&c.key,ref:g,autoComplete:"off",onChange:y,onPressEnter:x,onFocus:v}))}}return n.a.createElement("td",p,h)},vt=n.a.createContext(null),Et=function(e){e.index;var t=Object(it.a)(e,["index"]),r=ot.a.useForm(),a=Object(nt.a)(r,1)[0];return n.a.createElement(ot.a,{form:a,component:!1},n.a.createElement(vt.Provider,{value:a},n.a.createElement("tr",t)))},kt=function(e){var t=e.title,r=e.editable,i=e.children,o=e.dataIndex,c=e.record,d=e.handleEditableCellNextFocus,u=e.handleEditableCellCurrentFocus,m=e.handleEditableCellOnChangeAddOrRemove,p=Object(it.a)(e,["title","editable","children","dataIndex","record","handleEditableCellNextFocus","handleEditableCellCurrentFocus","handleEditableCellOnChangeAddOrRemove"]),h=i,g=Object(a.useRef)(null),b=Object(a.useContext)(vt);if(c){var y=function(){g&&g.current&&setTimeout((function(){c&&c.editing&&g.current&&g.current.select()}),0)};y();var x=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.validateFields();case 3:t=e.sent,r=parseFloat(t[o]),c[o]=r,e.next=22;break;case 8:if(e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0),"+"!==(a=e.t0.values[o].substring(e.t0.values[o].length-1))){e.next=20;break}if(!(c[o]>1e3||c[o]<=0)){e.next=17;break}return new Audio(mt.a).play(),y(),e.abrupt("return");case 17:n="add",e.next=21;break;case 20:"-"===a&&(n="remove");case 21:m(n,c);case 22:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.validateFields();case 3:d(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Save failed:",e.t0),new Audio(mt.a).play();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(c);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=c[o];r&&(h=n.a.createElement(ot.a.Item,{style:{margin:0},name:o,rules:[{required:!0,message:"".concat(t," \u8bf7\u8f93\u5165\u6570(\u5141\u8bb8\u5305\u542b2\u4f4d\u5c0f\u6570)."),pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{0,2})?$/}],initialValue:k},n.a.createElement(f.a,{id:c&&c.key,ref:g,autoComplete:"off",onChange:x,onPressEnter:v,onFocus:E})))}return n.a.createElement("td",p,h)},wt=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).componentDidMount=Object(l.a)(s.a.mark((function e(){var t,r,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.query,(r=t&&t.get("param"))&&(r=unescape(r),n=JSON.parse(r),i=n.shop,a.setState({currentShop:i}),a._template=n.template,a._beginDateTime=n.beginDateTime,a._endDateTime=n.endDateTime,a._orderList=n.orderList,a.refresh());case 3:case"end":return e.stop()}}),e)}))),a.refresh=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({productSpinning:!0,productSpinTipText:"\u51c6\u5907\u5f55\u5165..."},Object(l.a)(s.a.mark((function e(){var t,r,n,i,o,c,l,d,u,m,p,f,h,b,y,x,v,E,k,w,T,S,I,D,C,P,N,L,z,j,M,Y,_,F,A,R,H,B,V,W;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a.setState({productSpinTipText:"\u51c6\u5907\u83b7\u53d6..."}),r=0;case 3:if(!(r<a._orderList.length)){e.next=65;break}if(!(n=a._orderList[r])){e.next=62;break}return e.next=8,O(n.orderId);case 8:if(0!==(i=e.sent).errCode||!i.items){e.next=59;break}o=!1,c=void 0,c=0;case 13:if(!(c<t.length)){e.next=20;break}if(t[c].orderShop!==n.orderShop||t[c].templateName!==n.templateName){e.next=17;break}return o=!0,e.abrupt("break",20);case 17:++c,e.next=13;break;case 20:if(!o){e.next=42;break}l=t[c].items,d=i.items,u=0;case 24:if(!(u<d.length)){e.next=40;break}m=d[u],p=-1,f=0;case 28:if(!(f<l.length)){e.next=36;break}if(l[f].barcode!==m.barcode){e.next=33;break}return p=f,e.abrupt("break",36);case 33:++f,e.next=28;break;case 36:-1!==p?(h=l[p].orderNumber+m.orderNumber,l[p].orderNumber=h):((b={}).categoryName=m.categoryName,b.orderProductName=m.orderProductName,b.specification=m.specification,b.barcode=m.barcode,b.barcodeSimple=m.barcodeSimple,b.orderNumber=m.orderNumber,b.transferPrice=m.transferPrice,b.sortId=m.sortId,l.push(b));case 37:++u,e.next=24;break;case 40:e.next=57;break;case 42:(y={}).orderShop=n.orderShop,y.templateName=n.templateName,x=0;case 46:if(!(x<ft.length)){e.next=53;break}if(ft[x].name!==n.templateName){e.next=50;break}return y.templateUid=ft[x].templateUid,e.abrupt("break",53);case 50:++x,e.next=46;break;case 53:for(y.expectTime=n.expectTime,y.items=i.items,v=0;v<i.items.length;++v)E=a._template.templateId+"-"+i.items[v].barcode,k=ht[E],i.items[v].sortId=k||200;t.push(y);case 57:e.next=62;break;case 59:return t=[],g.b.error("\u83b7\u53d6<"+n.orderShop+">\u8ba2\u8d27\u4ea7\u54c1\u51fa\u9519\uff0c\u8bf7\u68c0\u67e5\uff01"),e.abrupt("break",65);case 62:++r,e.next=3;break;case 65:a.setState({productSpinTipText:"\u6309\u7167\u6a21\u677f\u6392\u5e8f..."}),w=[],T=0;case 68:if(!(T<t.length)){e.next=105;break}return S=t[T],I=S.items,(D={}).orderShop=S.orderShop,D.templateName=S.templateName,D.expectTime=S.expectTime,D.templateUid=S.templateUid,a.setState({productSpinTipText:"\u67e5\u627e-".concat(S.templateName,"-\u6a21\u677f...")}),e.next=79,Ke(S.templateUid);case 79:if(!(0===(C=e.sent).errCode&&C.list.length>0)){e.next=101;break}P=C.list,N=[],L=0;case 84:if(!(L<P.length)){e.next=100;break}z=-1,j=0;case 87:if(!(j<I.length)){e.next=94;break}if(P[L].barcode!==I[j].barcode){e.next=91;break}return z=j,e.abrupt("break",94);case 91:++j,e.next=87;break;case 94:M={},-1!==z?(M.categoryName=I[z].categoryName,M.orderProductName=I[z].orderProductName,M.specification=I[z].specification,M.barcode=I[z].barcode,M.barcodeSimple=I[z].barcodeSimple,M.sortId=I[z].sortId,M.orderNumber=I[z].orderNumber,M.transferNumber=0,M.transferPrice=I[z].transferPrice):(M.categoryName=P[L].categoryName,M.orderProductName=P[L].name,M.specification=P[L].specification,M.barcode=P[L].barcode,M.barcodeSimple=P[L].barcodeSimple,M.transferPrice=P[L].transferPrice,Y=a._template.templateId+"-"+M.barcode,_=ht[Y],M.sortId=_||200,M.orderNumber=0,M.transferNumber=0),N.push(M);case 97:++L,e.next=84;break;case 100:D.items=N;case 101:w.push(D);case 102:++T,e.next=68;break;case 105:for(a.setState({productSpinTipText:"\u6574\u7406\u5546\u54c1..."}),F=[],A=0,R=0;R<w.length;++R)for(H=w[R],B=H.items,V=0;V<B.length;++V)(W=B[V]).key=++A,F.push(W);a.setState({productSpinning:!1,productSpinTipText:"",allProductionDataToBeTransfer:F});case 110:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),a.getColumnSearchProps=function(e){return{filterDropdownVisible:a.state.filterDropdownVisible4Transfer,filterDropdown:function(e){var t=e.setSelectedKeys,r=(e.selectedKeys,e.confirm);e.clearFilters;return n.a.createElement("div",{style:{padding:8,width:130}},n.a.createElement(f.a,{ref:function(e){!a._searchInput&&e&&(a._searchInput=e,a._searchInput.focus())},autoComplete:"off",size:"large",placeholder:"+\u6dfb\u52a0\u5546\u54c1",value:a._searchText4Transfer,onChange:function(e){var n=/^[0-9]+$/.test(e.target.value);if(""!==e.target.value&&!n)return"+"===e.target.value.substring(e.target.value.length-1)?a.handleAddProduct():new Audio(mt.a).play(),void(a._searchText4Transfer=a._lastSearchText4Transfer);t(e.target.value?[e.target.value]:[]),r(),a._searchText4Transfer=e.target.value,a._lastSearchText4Transfer=e.target.value,a.setState({transferItems4NextFocus:[]},(function(){var e=[];a.state.allProductionDataToBeTransfer.forEach((function(t){-1!==t.barcodeSimple.indexOf(a._searchText4Transfer)&&(t.editing=!1,e.push(t))})),e.length>0&&a.setState({transferItems4NextFocus:e})}))},onFocus:function(e){a.setState({transferItems4NextFocus:[]},(function(){var e=[];a.state.allProductionDataToBeTransfer.forEach((function(t){-1!==t.barcodeSimple.indexOf(a._searchText4Transfer)&&(t.editing=!1,e.push(t))})),e.length>0&&a.setState({transferItems4NextFocus:e})}))},onPressEnter:function(e){4===a._searchText4Transfer.length?a.setState({transferItems4NextFocus:[]},(function(){var e=[];a.state.allProductionDataToBeTransfer.forEach((function(t){-1!==t.barcodeSimple.indexOf(a._searchText4Transfer)&&(t.editing=!1,e.push(t))})),e.length>0?(e[0].editing=!0,a.setState({transferItems4NextFocus:e})):new Audio(mt.a).play()})):new Audio(mt.a).play()},style:{marginBottom:8,display:"block"}}))},filterIcon:function(e){return n.a.createElement(dt.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,r){var a=r[e].toString();return a?a.includes(t):""},onFilterDropdownVisibleChange:function(e){e&&a._searchInput&&setTimeout((function(){return a._searchInput&&a._searchInput.select()}),300)},render:function(e){return n.a.createElement(lt.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a._searchText4Transfer],autoEscape:!0,textToHighlight:e?e.toString():""})}}},a.onAddProductionSelectChange=function(e){a.setState({addProductionSelectedRowKeys:e})},a.onAddProductSelect=function(e,t){e.editing=!1,a._searchInput4AddProduct&&a._searchInput4AddProduct.select();var r=a.state.allProductionDataRealToBeTransfer;if(t){var n={};n.barcode=e.barcode,n.barcodeSimple=e.barcode.substring(e.barcode.length-4,e.barcode.length),n.categoryName=e.categoryName,n.editing=!1,n.transferPrice=e.price,n.orderProductName=e.productName,n.specification=e.specification,n.orderNumber=parseFloat(e.orderNumber),n.transferNumber=parseFloat(e.transferNumber),n.price=e.price,n.memberPrice=e.memberPrice,n.wholePrice=e.wholePrice,n.partnerPrice=a.makePartnerPriceByCategory(e.categoryName,n.price,n.memberPrice,n.wholePrice),n.partnerPriceTotal=parseFloat((n.partnerPrice*n.transferNumber).toFixed(2)),n.sortId=200,n.remark="\u65b0\u589e";var i=0;n.key=++i;var o=[];o.push(n);for(var c=0;c<r.length;++c){var s=r[c];s.barcode!==n.barcode&&(s.key=++i,o.push(s))}a.setState({allProductionDataRealToBeTransfer:o})}else{for(var l=[],d=0,u=0;u<r.length;++u){var m=r[u];m.barcode!==e.barcode&&(m.key=++d,l.push(m))}a.setState({allProductionDataRealToBeTransfer:l})}},a.handleAddProductOnSearch=function(){var e=Object(l.a)(s.a.mark((function e(t,r){var n,i,o,c,l,d,u,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<=0)){e.next=3;break}return g.b.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5546\u54c1\u540d\u79f0\u6216\u6761\u7801"),e.abrupt("return");case 3:if(n=a.state.searchProductDataToBeAdd,i="search","Enter"===r.key&&(a._lastSearchText4AddProduct!==t?i="search":n.length>0&&(i="setAndJump")),"search"!==i){e.next=16;break}return a.setState({searchingProductData:!0,searchProductDataToBeAdd:[]}),a._lastSearchText4AddProduct=t,e.next=11,P(t);case 11:0===(o=e.sent).errCode&&o.items&&o.items.length>0&&(c=a.state.allProductionDataRealToBeTransfer,l=[],o.items.forEach((function(e){e.transferNumber=0,e.editing=!1,e.orderNumber=0,c.forEach((function(t){e.barcode===t.barcode&&-1===l.indexOf(e.key)&&l.push(e.key)}))})),a.setState({searchProductDataToBeAdd:o.items,addProductionSelectedRowKeys:l})),a.setState({searchingProductData:!1}),e.next=17;break;case 16:if("setAndJump"===i){for(d=a.state.searchProductDataToBeAdd,u=0;u<d.length;++u)(m=d[u])&&(m.editing=!0);a.forceUpdate()}case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),a.handleAddProductionModalonOk=function(){a.setState({isAddProductionModalVisible:!1,filterDropdownVisible4Transfer:!0},(function(){setTimeout((function(){a._searchInput&&a._searchInput.select()}),400)}))},a.handleProductTransferConfirm=Object(l.a)(s.a.mark((function e(){var t,r,n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({productTransferConfirmText:"\u914d\u8d27\u4fe1\u606f\u53d1\u9001\u4e2d...."}),t=a.state.allProductionDataRealToBeTransfer,r=a.state.currentShop.userId,n=[],t.forEach((function(e){var t={};t.barcode=e.barcode,t.quantity=e.transferNumber,t.buyPrice=e.transferPrice,n.push(t)})),e.prev=5,e.next=8,N(r,n);case 8:(i=e.sent)&&0===i.errCode?((o=ve.a.success()).update({title:"\u914d\u8d27\u6210\u529f\uff0c\u5546\u54c1\u5df2\u53d1\u9001\u81f3<<"+a.state.currentShop.name+">>\u6536\u94f6\u673a~",okButtonProps:{hidden:!0}}),setTimeout((function(){o.destroy(),a.setState({productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"}),a.handleBack()}),1500)):(a.setState({productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"}),ve.a.error({title:"\u914d\u8d27\u5931\u8d25\uff0c\u8bf7\u67e5\u770b\u5931\u8d25\u539f\u56e0~"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),a.setState({productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"}),ve.a.error({title:e.t0.toString()});case 16:case"end":return e.stop()}}),e,null,[[5,12]])}))),a.handleEditableCellNextFocus=function(){for(var e=a.state.transferItems4NextFocus,t=-1,r=0;r<e.length;++r){if(e[r].editing){t=r;break}}var n=t+1;n>=0&&n<e.length?e[n].editing=!0:a._searchInput&&a._searchInput.select(),t>=0&&t<e.length&&(e[t].editing=!1),a.setState({transferItems4NextFocus:e})},a.handleEditableCellCurrentFocus=function(e){for(var t=a.state.transferItems4NextFocus,r=0;r<t.length;++r){var n=t[r];n.editing=!1,n.barcode===e.barcode&&(n.editing=!0)}a.forceUpdate()},a.doAddToTransfer=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,i,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({allProductionDataRealToBeTransferAdding:!0,allProductionDataRealToBeTransferAddingText:"\u6b63\u5728\u63d2\u5165<<"+t.orderProductName+">>"}),e.next=3,P(t.barcode);case 3:if((r=e.sent)&&0===r.errCode&&1===r.items.length){e.next=9;break}return g.b.warning("\u67e5\u627e\u5546\u54c1\u4fe1\u606f\u5931\u8d25~"),e.abrupt("return");case 9:n=r.items[0];case 10:if(n){for(t.specification=n.specification,t.price=n.price,t.memberPrice=n.memberPrice,t.wholePrice=n.wholePrice,t.partnerPrice=a.makePartnerPriceByCategory(n.categoryName,n.price,n.memberPrice,n.wholePrice),t.partnerPriceTotal=parseFloat((t.partnerPrice*t.transferNumber).toFixed(2)),i=[],o=0,t.key=++o,i.splice(0,0,t),c=0;c<a.state.allProductionDataRealToBeTransfer.length;++c)(l=Object(Je.a)({},a.state.allProductionDataRealToBeTransfer[c])).barcode!==t.barcode&&(l.key=++o,i.push(l));a.setState({allProductionDataRealToBeTransferAdding:!1,allProductionDataRealToBeTransferAddingText:"",allProductionDataRealToBeTransfer:i})}case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.startToRunAddToTransfers=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a._readyToBeAddTransfers[0]){e.next=3;break}return e.abrupt("return");case 3:return a._readyToBeAddRuning=!0,r=Object(Je.a)({},t),e.next=7,a.doAddToTransfer(r);case 7:a._readyToBeAddTransfers.shift(),a._readyToBeAddRuning=!1,a.startToRunAddToTransfers();case 10:case"end":return e.stop()}}),e)}))),a.handleEditableCellCurrentEnter=function(){var e=Object(l.a)(s.a.mark((function e(t,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[r]>0?(a._readyToBeAddTransfers.push(t),a._readyToBeAddRuning||a.startToRunAddToTransfers()):new Audio(mt.a).play();case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),a.handleDeleteProduct4Preview=function(e){for(var t=[],r=0,n=0;n<a.state.allProductionDataRealToBeTransfer.length;++n){var i=Object(Je.a)({},a.state.allProductionDataRealToBeTransfer[n]);i.barcode!==e.barcode&&(i.key=++r,t.push(i))}a.setState({allProductionDataRealToBeTransfer:t})},a.handleEditableCell4AddProductNextFocus=function(){for(var e=a.state.searchProductDataToBeAdd,t=-1,r=0;r<e.length;++r){if(e[r].editing){t=r;break}}for(var n=t;;){if(++n>=e.length){a._searchInput4AddProduct&&a._searchInput4AddProduct.select();break}e[n].editing=!0;break}t>=0&&t<e.length&&(e[t].editing=!1),a.forceUpdate()},a.handleEditableCell4AddProductCurrentFocus=function(e){for(var t=a.state.searchProductDataToBeAdd,r=0;r<t.length;++r){t[r].editing=!1}e.editing=!0,a.forceUpdate()},a.handleEditableCellAddProductOnChangeAddOrRemove=function(e,t){if("add"===e){a.onAddProductSelect(t,!0);var r=Object(at.a)(a.state.addProductionSelectedRowKeys);-1===r.indexOf(t.key)&&r.push(t.key),a.setState({addProductionSelectedRowKeys:r})}else if("remove"===e){a.onAddProductSelect(t,!1);var n=Object(at.a)(a.state.addProductionSelectedRowKeys);-1!==n.indexOf(t.key)&&n.splice(n.indexOf(t.key),1),a.setState({addProductionSelectedRowKeys:n})}},a.makePartnerPriceByCategory=function(e,t,r,n){var i=t;if(-1===gt.indexOf(e)){var o=t;"002 - \u5f2f\u9ea6(\u65e7\u9547\u5e97)"===a.state.currentShop.name&&(o=r<t?r:t),i=.7*o}else i=n;return i=parseFloat(i.toFixed(2))},a.getLodopAfterInit=function(){var e=Object(Ge.getLodop)();if(e){e.PRINT_INIT("react\u4f7f\u7528\u6253\u5370\u63d2\u4ef6CLodop");e.SET_PRINTER_INDEX(Fe(e)),e.SET_PRINT_PAGESIZE(1,0,0,"\u9488\u6253\u4e09\u7b49\u5206"),e.SET_PREVIEW_WINDOW(0,0,0,800,600,""),e.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),e.ADD_PRINT_HTM(10,0,"100%","95%","<style>\n                </style> "+document.getElementById("printDiv").innerHTML)}return e},a.productPrintPreprew=function(){var e=a.getLodopAfterInit();e&&e.PREVIEW()},a.productPrintDirect=function(){var e=a.getLodopAfterInit();e&&e.PRINT()},a.productPrintDirectAndBack=function(){a.productPrintDirect(),a.setState({productTransferPrintShow:!1,filterDropdownVisible4Transfer:!0})},a.handleBack=function(){var e={};e.template=a._template,e.shop=a.state.currentShop,e.beginDateTime=a._beginDateTime,e.endDateTime=a._endDateTime;var t=JSON.stringify(e),r="http://localhost:4000/orderManagement";r="http://gratefulwheat.ruyue.xyz/orderManagement",r+="?",r+="param="+escape(t),window.location.replace(r)},a.handleAddProduct=function(){a.setState({addProductionSelectedRowKeys:[],isAddProductionModalVisible:!0,filterDropdownVisible4Transfer:!1,searchProductDataToBeAdd:[]}),setTimeout((function(){a._searchInput4AddProduct&&(a._searchInput4AddProduct.select(),a._searchInput4AddProduct.setState({value:""}))}),0)},a.makeTotalPrice=function(){var e=0;return a.state.allProductionDataRealToBeTransfer.forEach((function(t){e+=t.price})),e},a.makePartnerPrice=function(){var e=0;return a.state.allProductionDataRealToBeTransfer.forEach((function(t){e+=t.partnerPrice})),e},a.makePartnerPriceTotal=function(){var e=0;return a.state.allProductionDataRealToBeTransfer.forEach((function(t){e+=t.partnerPriceTotal})),e},a.state={allProductionDataToBeTransfer:[],allProductionDataRealToBeTransfer:[],allProductionDataRealToBeTransferAdding:!1,allProductionDataRealToBeTransferAddingText:"",searchProductDataToBeAdd:[],searchingProductData:!1,isAddProductionModalVisible:!1,addProductionSelectedRowKeys:[],currentShop:{},productSpinTipText:"",productSpinning:!1,transferItems4NextFocus:[],filterDropdownVisible4Transfer:!0,productTransferPrintShow:!1,productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"},a._searchInput=null,a._searchInput4AddProduct=null,a._searchText4Transfer="",a._lastSearchText4Transfer="",a._lastSearchText4AddProduct="",a._searchText4AddProduct4onChange="",a._lastSearchText4AddProduct4onChange="",a._template=void 0,a._beginDateTime=void 0,a._endDateTime=void 0,a._readyToBeAddTransfers=[],a._readyToBeAddRuning=!1,a}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.allProductionDataToBeTransfer,a=t.allProductionDataRealToBeTransfer,i=t.allProductionDataRealToBeTransferAdding,o=t.allProductionDataRealToBeTransferAddingText,c=t.searchProductDataToBeAdd,s=t.searchingProductData,l=t.isAddProductionModalVisible,d=t.addProductionSelectedRowKeys,u=t.currentShop,m=t.productSpinTipText,p=t.productSpinning,f=t.productTransferPrintShow,h=t.productTransferConfirmText,g=a&&a.length<=0||"---\u786e\u5b9a\u51fa\u8d27---"!==h||i,b=[{title:"\u5e8f",dataIndex:"key",key:"key",width:60,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},Object(Je.a)({title:"\u7b80\u7801",dataIndex:"barcodeSimple",key:"barcodeSimple",width:200,editingIndex:"editing"},this.getColumnSearchProps("barcodeSimple")),{title:"\u54c1\u540d",dataIndex:"orderProductName",key:"orderProductName",width:160,render:function(e){return n.a.createElement("span",{style:{fontSize:14,color:"red"}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:80,render:function(e){return n.a.createElement("span",{style:{fontSize:14}},e)}},{title:"\u914d\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:160,editable:!0,render:function(e){return n.a.createElement("span",{style:{fontSize:16}},e)}},{title:"\u914d\u8d27\u4ef7",dataIndex:"transferPrice",key:"transferPrice",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5206\u7c7b",dataIndex:"categoryName",key:"categoryName",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return"\u65b0\u589e"===e?n.a.createElement("span",{style:{fontSize:14,color:"skyblue",backgroundColor:"yellow",fontWeight:"bold"}},e):n.a.createElement("span",{style:{fontSize:10}},e)}}],y={body:{row:yt,cell:xt}},v=b.map((function(t){return t.editable?Object(Je.a)(Object(Je.a)({},t),{},{onCell:function(r){return{record:r,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleEditableCellNextFocus:e.handleEditableCellNextFocus,handleEditableCellCurrentFocus:e.handleEditableCellCurrentFocus,handleEditableCellCurrentEnter:e.handleEditableCellCurrentEnter}}}):t})),k={body:{row:Et,cell:kt}},w=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u5f62\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u54c1\u540d",dataIndex:"productName",key:"productName",width:120,render:function(e){return n.a.createElement("span",{style:{fontSize:14,color:"red"}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:60,render:function(e){return n.a.createElement("span",{style:{fontSize:14}},e)}},{title:"\u914d\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:80,editable:!0,render:function(e){return n.a.createElement("span",{style:{fontSize:16}},e)}},{title:"\u5206\u7c7b",dataIndex:"categoryName",key:"categoryName",width:120,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:120,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u9500\u552e\u4ef7",dataIndex:"price",key:"price",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u4f1a\u5458\u4ef7",dataIndex:"memberPrice",key:"memberPrice",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6279\u53d1\u4ef7",dataIndex:"wholePrice",key:"wholePrice",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}}].map((function(t){return t.editable?Object(Je.a)(Object(Je.a)({},t),{},{onCell:function(r){return{record:r,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleEditableCellNextFocus:e.handleEditableCell4AddProductNextFocus,handleEditableCellCurrentFocus:e.handleEditableCell4AddProductCurrentFocus,handleEditableCellOnChangeAddOrRemove:e.handleEditableCellAddProductOnChangeAddOrRemove}}}):t})),T={hideSelectAll:!0,selectedRowKeys:d,onChange:this.onAddProductionSelectChange,onSelect:this.onAddProductSelect},S=ee()().format("YYYY-MM-DD HH:mm a"),I=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u5f62\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u54c1\u540d",dataIndex:"orderProductName",key:"orderProductName",width:160,render:function(e){return n.a.createElement("span",{style:{fontSize:14,color:"red"}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:80,render:function(e){return n.a.createElement("span",{style:{fontSize:14}},e)}},{title:"\u914d\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:80,editable:!0,render:function(e,t){var r=parseFloat(t.orderNumber),a=parseFloat(e),i=0!==r&&r===a?"transparent":"yellow";return n.a.createElement("span",{style:{fontSize:16,backgroundColor:i,padding:4}},e)}},{title:"\u5206\u7c7b",dataIndex:"categoryName",key:"categoryName",width:120,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:120,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u9500\u552e\u4ef7",dataIndex:"price",key:"price",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u4f1a\u5458\u4ef7",dataIndex:"memberPrice",key:"memberPrice",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6279\u53d1\u4ef7",dataIndex:"wholePrice",key:"wholePrice",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u52a0\u76df\u4ef7",dataIndex:"partnerPrice",key:"partnerPrice",width:100,render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u64cd\u4f5c",key:"action",render:function(t,r){return n.a.createElement(x.a,{type:"primary",danger:!0,onClick:function(t){e.handleDeleteProduct4Preview(r)}},"\u5220\u9664")}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return n.a.createElement("span",{style:{fontSize:10}},e)}}];return n.a.createElement("div",null,n.a.createElement(E.a,{tip:m,spinning:p,size:"large"},n.a.createElement("div",null,n.a.createElement("div",{style:{zIndex:2,bottom:0,left:0,right:0,position:"fixed",width:"100%",height:60,backgroundColor:"lightgray"}},n.a.createElement("div",null,n.a.createElement(x.a,{danger:!0,type:"primary",disabled:g,onClick:function(t){e.setState({productTransferPrintShow:!0,filterDropdownVisible4Transfer:!1})},style:{width:210,height:30,marginLeft:50,marginTop:10}},"---\u6253\u5370\u51fa\u8d27\u5355---"),n.a.createElement(ct.a,{title:"\u662f\u5426\u786e\u5b9a\u51fa\u8d27\uff1f",onConfirm:this.handleProductTransferConfirm,disabled:g},n.a.createElement(x.a,{danger:!0,type:"primary",disabled:g,style:{width:210,height:30,marginLeft:50,marginTop:10}},h)))),n.a.createElement("div",{style:{marginLeft:10,marginTop:10}},n.a.createElement(x.a,{type:"primary",style:{width:80,height:40},onClick:function(t){return e.handleBack()}},n.a.createElement("div",{style:{fontSize:16}},"\u540e\u9000")),n.a.createElement("span",{style:{marginLeft:10}},"\u5f2f\u9ea6(\u603b\u90e8)->"),n.a.createElement("span",{style:{marginLeft:0,marginRight:10,color:"red"}},u.name),n.a.createElement(x.a,{type:"primary",danger:!0,style:{width:60,height:30},onClick:function(){e.handleAddProduct()}},n.a.createElement("div",{style:{fontSize:8}},"+\u5546\u54c1"))),n.a.createElement(_e.a,{style:{marginTop:10,marginLeft:10,marginRight:10},size:"small",components:y,rowClassName:function(){return"editable-row"},dataSource:r,columns:v,pagination:!1,bordered:!0,scroll:{y:160,scrollToFirstRowOnChange:!0},footer:function(){return n.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171 ".concat(r.length," \u9879"))}}))),n.a.createElement("div",null,n.a.createElement(_e.a,{style:{height:480,backgroundColor:"transparent",marginLeft:10,marginRight:10},size:"small",loading:{spinning:i,tip:o},dataSource:a,columns:I,bordered:!0,pagination:!1,scroll:{y:295,scrollToFirstRowOnChange:!0},footer:function(){return n.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:15}},"\u603b\u5171 ".concat(a.length," \u9879"))}})),n.a.createElement("div",null,n.a.createElement(ve.a,{width:1200,centered:!0,keyboard:!0,maskClosable:!1,closable:!1,title:n.a.createElement("div",null,n.a.createElement("span",null,"\u6dfb\u52a0\u5546\u54c1"),n.a.createElement(pt,{style:{width:240,marginLeft:20},ref:function(t){!e._searchInput4AddProduct&&t&&(t&&t.focus(),e._searchInput4AddProduct=t)},enterButton:!0,placeholder:"-\u8fd4\u56de",onSearch:function(t,r){return e.handleAddProductOnSearch(t,r)},onChange:function(t){if(""!==t.target.value){var r=t.target.value.substring(t.target.value.length-1);if("-"===r)return void e.handleAddProductionModalonOk();if("+"===r||"*"===r||"/"===r||"."===r)return void new Audio(mt.a).play()}e._searchText4AddProduct4onChange=t.target.value,e._lastSearchText4AddProduct4onChange=t.target.value}})),visible:l,onOk:this.handleAddProductionModalonOk,okText:"\u5b8c\u6bd5",cancelButtonProps:{hidden:!0}},n.a.createElement(_e.a,{size:"small",rowSelection:T,loading:s,dataSource:c,components:k,columns:w,bordered:!0,pagination:!1,scroll:{y:400,scrollToFirstRowOnChange:!0}}))),n.a.createElement("div",null,n.a.createElement(ve.a,{width:1e3,centered:!0,keyboard:!0,maskClosable:!1,maskStyle:{backgroundColor:"white"},title:n.a.createElement("div",{style:{height:0}}),closable:!1,visible:f,footer:n.a.createElement("div",{style:{marginRight:120,marginBottom:20,marginTop:20}},n.a.createElement(x.a,{key:"back",onClick:function(t){return e.setState({productTransferPrintShow:!1,filterDropdownVisible4Transfer:!0})}},"\u53d6\u6d88"),",",n.a.createElement(x.a,{key:"submit",type:"primary",danger:!0,onClick:function(t){return e.productPrintDirectAndBack()}},"\u76f4\u63a5\u6253\u5370"),",",n.a.createElement(x.a,{key:"link",type:"primary",onClick:function(t){return e.productPrintPreprew()}},"\u6253\u5370\u9884\u89c8"))},n.a.createElement("div",{id:"printDiv",style:{width:"100%",height:500,borderStyle:"dotted"}},n.a.createElement("div",{style:{marginLeft:10,marginTop:10,marginRight:10,backgroundColor:"transparent"}},n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:30}},"\u95e8\u5e97\u51fa\u8d27\u5355"),n.a.createElement("span",{style:{marginLeft:10,fontSize:20,backgroundColor:"green",paddingLeft:10,paddingRight:10,color:"white"}},"\u5171".concat(a.length,"\u9879"))),n.a.createElement("div",null,n.a.createElement("span",null,"\u6536\u8d27\u95e8\u5e97\uff1a"),n.a.createElement("span",null,u.name),n.a.createElement("span",{style:{marginLeft:100}},"\u51fa\u5355\u65f6\u95f4\uff1a"),n.a.createElement("span",null,S)),n.a.createElement("div",null,n.a.createElement("table",{border:"1",cellSpacing:"0",style:{float:"left",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u5e8f"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u6761\u7801"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u54c1\u540d"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u8ba2\u8d27\u91cf"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u914d\u8d27\u91cf"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u5206\u7c7b"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u89c4\u683c"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u9500\u552e\u4ef7"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u52a0\u76df\u4ef7"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u8fdb\u8d27\u603b\u4ef7"),n.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u5907\u6ce8"))),n.a.createElement("tbody",null,a.map((function(e){var t=a.indexOf(e)+1,r=0!==e.transferNumber&&e.transferNumber===e.orderNumber?"transparent":"yellow";return n.a.createElement("tr",{key:t},n.a.createElement("th",{key:"1",style:{height:22,width:20,textAlign:"center",fontSize:16}},t),n.a.createElement("th",{key:"2",style:{height:22,width:120,textAlign:"center",fontSize:16}},e.barcode),n.a.createElement("th",{key:"3",style:{height:22,width:160,textAlign:"center",fontSize:16}},e.orderProductName),n.a.createElement("th",{key:"4",style:{height:22,width:30,textAlign:"center",fontSize:16}},e.orderNumber),n.a.createElement("th",{key:"5",style:{backgroundColor:r,height:22,width:30,textAlign:"center",fontSize:16}},e.transferNumber),n.a.createElement("th",{key:"6",style:{height:22,width:140,textAlign:"center",fontSize:16}},e.categoryName),n.a.createElement("th",{key:"7",style:{height:22,width:140,textAlign:"center",fontSize:16}},e.specification),n.a.createElement("th",{key:"8",style:{height:22,width:40,textAlign:"center",fontSize:16}},e.price),n.a.createElement("th",{key:"9",style:{height:22,width:40,textAlign:"center",fontSize:16}},e.partnerPrice),n.a.createElement("th",{key:"10",style:{height:22,width:40,textAlign:"center",fontSize:16}},e.partnerPriceTotal),n.a.createElement("th",{key:"11",style:{height:22,width:"*",textAlign:"center",fontSize:16}}))})),n.a.createElement("tr",{key:"total"},n.a.createElement("th",{key:"1",colSpan:"9",style:{height:24,textAlign:"center",fontSize:16}},"\u603b\u8ba1"),n.a.createElement("th",{key:"2",style:{height:24,textAlign:"center",fontSize:16}},this.makePartnerPriceTotal().toFixed(2)))))))))))}}]),r}(n.a.Component),Tt=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).componentDidMount=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:case"end":return e.stop()}}),e)}))),a._a=1,a}return Object(u.a)(r,[{key:"render",value:function(){return n.a.createElement("div",null,"\u5916\u5356\u5e73\u53f0")}}]),r}(n.a.Component),St=r(424),It=r(405),Dt=r(407),Ot=It.a.Panel,Ct=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(d.a)(this,r),(a=t.call(this,e)).handleCollapseOnChange=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,n,i,o,c,l,d,u,m,p,f,h,g,b,y,x,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:e.prev=2,r=t,n=a.state.birthdayCakeCategorys,o=Object(at.a)(n),c=0;case 7:if(!(c<o.length)){e.next=15;break}if((l=o[c]).categoryId!==r){e.next=12;break}return i=l,e.abrupt("break",15);case 12:++c,e.next=7;break;case 15:if(!(i&&i.productItems.length>0)){e.next=17;break}return e.abrupt("return");case 17:return e.next=19,K(r);case 19:if(!(0===(d=e.sent).errCode&&d.list.length>0)){e.next=44;break}u=d.list,m=[],p=0;case 24:if(!(p<u.length)){e.next=42;break}f=u[p],h=f.productName,g=f.saleNumber,b=-1,y=0;case 30:if(!(y<m.length)){e.next=38;break}if(m[y].productName!==h){e.next=35;break}return b=y,e.abrupt("break",38);case 35:++y,e.next=30;break;case 38:-1===b?((x={}).productName=h,x.saleNumber=g,x.key=m.length+1,m.push(x)):(v=m[b]).saleNumber=v.saleNumber+g;case 39:++p,e.next=24;break;case 42:m=m.sort((function(e,t){return t.saleNumber-e.saleNumber})),i.productItems=m;case 44:a.setState({birthdayCakeCategorys:o}),e.next=50;break;case 47:e.prev=47,e.t0=e.catch(2),console.log(e.t0);case 50:case"end":return e.stop()}}),e,null,[[2,47]])})));return function(t){return e.apply(this,arguments)}}();return a.state={birthdayCakeCategorys:[{categoryId:"1634302334442115588",categoryName:"\u5f2f\u9ea6\u513f\u7ae5\u86cb\u7cd5",productItems:[]},{categoryId:"1634302367129657476",categoryName:"\u5f2f\u9ea6\u5973\u795e\u86cb\u7cd5",productItems:[]},{categoryId:"1634302388959605558",categoryName:"\u5f2f\u9ea6\u7537\u795e\u86cb\u7cd5",productItems:[]},{categoryId:"1634302403310226908",categoryName:"\u5f2f\u9ea6\u5bb6\u5ead\u86cb\u7cd5",productItems:[]},{categoryId:"1634302419875701981",categoryName:"\u5f2f\u9ea6\u60c5\u4fa3\u86cb\u7cd5",productItems:[]},{categoryId:"1634302432122635916",categoryName:"\u5f2f\u9ea6\u795d\u5bff\u86cb\u7cd5",productItems:[]},{categoryId:"1634302446119593980",categoryName:"\u5f2f\u9ea6\u5e86\u5178\u6d3e\u5bf9\u86cb\u7cd5",productItems:[]}]},a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.birthdayCakeCategorys;return n.a.createElement("div",null,n.a.createElement(It.a,{accordion:!0,ghost:!0,expandIcon:function(e){var t=e.isActive;return n.a.createElement(St.a,{rotate:t?90:0})},onChange:this.handleCollapseOnChange},e.map((function(e){return n.a.createElement(Ot,{header:e.categoryName,key:e.categoryId},e.productItems.map((function(e){return n.a.createElement("div",{key:e.key},n.a.createElement(Dt.a,{width:200,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}),n.a.createElement("span",null,e.productName),n.a.createElement("span",null,e.saleNumber))})))}))))}}]),r}(n.a.Component),Pt=r(45),Nt=r(225),Lt=(r(398),r(20)),zt=r(231);function jt(){var e=new URLSearchParams(Object(Pt.e)().search);return n.a.createElement("div",null,n.a.createElement(Pt.a,{exact:!0,path:"/",children:n.a.createElement(ne,null)}),n.a.createElement(Pt.a,{path:"/productsale",children:n.a.createElement(ne,{query:e})}),n.a.createElement(Pt.a,{path:"/discardsale",children:n.a.createElement(se,{query:e})}),n.a.createElement(Pt.a,{path:"/productsaleanddiscard",children:n.a.createElement(fe,{query:e})}),n.a.createElement(Pt.a,{path:"/couponsummary",children:n.a.createElement(be,{query:e})}),n.a.createElement(Pt.a,{path:"/diyreserve",children:n.a.createElement(Me,{query:e})}),n.a.createElement(Pt.a,{path:"/productionPlanPrinter",children:n.a.createElement($e,{query:e})}),n.a.createElement(Pt.a,{path:"/orderManagement",children:n.a.createElement(Ue,{query:e})}),n.a.createElement(Pt.a,{path:"/productDistributePrinter",children:n.a.createElement(rt,{query:e})}),n.a.createElement(Pt.a,{path:"/productDistributeInputer",children:n.a.createElement(wt,{query:e})}),n.a.createElement(Pt.a,{path:"/productEShop",children:n.a.createElement(Tt,{query:e})}),n.a.createElement(Pt.a,{path:"/birthdayCakeSale",children:n.a.createElement(Ct,{query:e})}))}function Mt(){return n.a.createElement(Lt.b,{locale:zt.a},n.a.createElement(Nt.a,null,n.a.createElement(jt,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,t,r){e.exports=r.p+"static/media/di.0258c2a5.wav"}},[[235,1,2]]]);
//# sourceMappingURL=main.3eb87d1a.chunk.js.map