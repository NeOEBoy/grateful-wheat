(this.webpackJsonpwww=this.webpackJsonpwww||[]).push([[0],{251:function(e,t,a){e.exports=a(411)},256:function(e,t,a){},339:function(e,t,a){},406:function(e,t,a){e.exports=a.p+"static/media/shoppingCart.09b8794b.png"},407:function(e,t,a){e.exports=a.p+"static/media/\u6559\u80b2\u5c40\u5e97\u4e2a\u4eba\u5fae\u4fe1.240c0538.jpg"},408:function(e,t,a){e.exports=a.p+"static/media/logo.224b18a1.png"},409:function(e,t,a){},411:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(64),o=a.n(i),c=(a(256),a(3)),l=a.n(c),s=a(9),d=a(34),u=a(35),m=a(37),p=a(36),f=a(243),h=a(414),g=a(244),y=a(186),b=a(183),v=a(54),E=a(421),k=a(176);console.log("process.env.NODE_ENV = production");var x="http://gratefulwheat.ruyue.xyz/apis",w=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r,i,o){var c,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=x+"/product/saleList",c+="?pageIndex=",c+=r,c+="&pageSize=",c+=i,c+="&userId=",c+=t,c+="&beginDateTime=",c+=a,c+="&endDateTime=",c+=n,c+="&keyword=",c+=o,e.next=15,fetch(c);case 15:return s=e.sent,e.next=18,s.json();case 18:return d=e.sent,e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})));return function(t,a,n,r,i,o){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r){var i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x+"/product/discardList",i+="?userId=",i+=t,i+="&beginDateTime=",i+=a,i+="&endDateTime=",i+=n,i+="&keyword=",i+=r,console.log(i),e.next=12,fetch(i);case 12:return o=e.sent,e.next=15,o.json();case 15:return c=e.sent,e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r,i){var o,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=x+"/product/saleAndDiscardList",o+="?userId=",o+=t,o+="&categoryId=",o+=a,o+="&beginDateTime=",o+=n,o+="&endDateTime=",o+=r,o+="&keyword=",o+=i,e.next=13,fetch(o);case 13:return c=e.sent,e.next=16,c.json();case 16:return s=e.sent,e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,a,n,r,i){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x+"/coupon/couponSummaryList",r+="?userId=",r+=t,r+="&beginDateTime=",r+=a,r+="&endDateTime=",r+=n,e.next=9,fetch(r);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r,i){var o,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=x+"/product/orderList",o+="?userId=",o+=t,o+="&templateId=",o+=a,o+="&timeType=",o+=n,o+="&beginDateTime=",o+=r,o+="&endDateTime=",o+=i,e.next=13,fetch(o);case 13:return c=e.sent,e.next=16,c.json();case 16:return s=e.sent,e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,a,n,r,i){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/product/orderItems",a+="?orderId=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/product/findTemplate",a+="?templateUid=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/product/loadProductsByKeyword",a+="?keyword=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(s.a)(l.a.mark((function e(t,a){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x+"/product/createStockFlowOut",(n={}).toUserId=t,n.items=a,e.next=6,fetch("http://gratefulwheat.ruyue.xyz/apis/product/createStockFlowOut",{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 6:return r=e.sent,e.next=9,r.json();case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/product/refuseStockFlow",a+="?flowId=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/product/confirmStockFlow",a+="?flowId=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r){var i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x+"/product/flowList",i+="?userId=",i+=t,i+="&flowTypeId=",i+=a,i+="&beginDateTime=",i+=n,i+="&endDateTime=",i+=r,e.next=11,fetch(i);case 11:return o=e.sent,e.next=14,o.json();case 14:return c=e.sent,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/product/flowDetail",a+="?flowId=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x+"/coupon/diyCouponList",r+="?pageIndex=",r+=t,r+="&pageSize=",r+=a,r+="&keyword=",r+=n,e.next=9,fetch(r);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/member/memberList",a+="?keyword=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(s.a)(l.a.mark((function e(t,a){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x+"/coupon/saveRemark",n+="?couponId=",n+=t,n+="&remark=",n+=a,e.next=7,fetch(n);case 7:return r=e.sent,e.next=10,r.json();case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/coupon/createDIYEvent",a+="?started=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x+"/coupon/DIYEventList",e.next=3,fetch("http://gratefulwheat.ruyue.xyz/apis/coupon/DIYEventList");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/coupon/DeleteDIYEvent",a+="?_id=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x+"/coupon/joinToEvent",r+="?couponId=",r+=t,r+="&memberName=",r+=a,r+="&eventId=",r+=n,e.next=9,fetch(r);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r,i){var o,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=x+"/coupon/sendSMSAndJoinToEvent",o+="?phoneNumber=",o+=t,o+="&templateParam1=",o+=a,o+="&couponId=",o+=n,o+="&memberName=",o+=r,o+="&eventId=",o+=i,e.next=13,fetch(o);case 13:return c=e.sent,e.next=16,c.json();case 16:return s=e.sent,e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,a,n,r,i){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x+"/coupon/leaveFromEvent",r+="?couponId=",r+=t,r+="&memberName=",r+=a,r+="&eventId=",r+=n,e.next=9,fetch(r);case 9:return i=e.sent,e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/coupon/saveLastPage",a+="?page=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x+"/coupon/getLastPage",e.next=3,fetch("http://gratefulwheat.ruyue.xyz/apis/coupon/getLastPage");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r,i,o,c){var s,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x+"/product/loadProductsSale",s+="?categoryId=",s+=t,s+="&userId=",s+=a,s+="&isSellWell=",s+=n,s+="&beginDateTime=",s+=r,s+="&endDateTime=",s+=i,s+="&orderColumn=",s+=o,s+="&asc=",s+=c,e.next=17,fetch(s);case 17:return d=e.sent,e.next=20,d.json();case 20:return u=e.sent,e.abrupt("return",u);case 22:case"end":return e.stop()}}),e)})));return function(t,a,n,r,i,o,c){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/0latestCake.json",e.next=3,fetch("/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/0latestCake.json",{mode:"no-cors"});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/1allCake.json",e.next=3,fetch("/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/1allCake.json",{mode:"no-cors"});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x+"/wechat/sign",a+="?url=",a+=t,e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=a(232),$=a.n(Z),Q=a(196),ee=(a(122),a(58)),te=a(10),ae=a.n(te),ne=f.a.Search,re=h.a.RangePicker,ie=[{index:0,name:"\u5168\u90e8",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u76d8\u9640\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u6f33\u6d66\u7acb\u4eba",userId:"4382444"}],oe=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleInfiniteOnLoad=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchNextPage();case 2:case"end":return e.stop()}}),e)})));var r=n.props.query,i="",o="";return r&&(i=(i=r.get("beginDateTime")).replace(" ","+"),o=(o=r.get("endDateTime")).replace(" ","+")),n.state={listData:[],loading:!1,hasMore:!0,pageIndex:1,shopIndex:1,userId:"",beginDateTime:i,endDateTime:o,keyword:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,a="",t&&(a=t.get("id")),e.next=5,this.initFirstPage(a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r){var i,o=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<ie.length)){e.next=8;break}if(ie[i].userId!==t){e.next=5;break}return this.setState({shopIndex:i}),e.abrupt("break",8);case 5:i++,e.next=1;break;case 8:this.setState({userId:void 0!==t?t:this.state.userId,listData:[],loading:!1,hasMore:!0,pageIndex:1,beginDateTime:void 0!==a?a:this.state.beginDateTime,endDateTime:void 0!==n?n:this.state.endDateTime,keyword:void 0!==r?r:this.state.keyword},Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fetchNextPage();case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"fetchNextPage",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n,r,i,o,c,s,d,u,m,p,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.hasMore,n=t.pageIndex,r=t.listData,a){e.next=4;break}return g.b.warning("\u6ca1\u6709\u66f4\u591a\u6570\u636e\u4e86"),e.abrupt("return");case 4:return this.setState({loading:!0}),e.prev=5,i=this.state,o=i.userId,c=i.beginDateTime,s=i.endDateTime,d=i.keyword,u=[],e.next=10,w(o,c,s,n,20,d);case 10:(m=e.sent)&&0===m.errCode&&(u=m.list),p=u.length/20>=1,f=n,p&&f++,r=r.concat(u),this.setState({listData:r,hasMore:p,loading:!1,pageIndex:f}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),this.setState({loading:!1});case 22:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.shopIndex,n=t.beginDateTime,i=t.endDateTime,o=ie[a].name;return r.a.createElement("div",{style:{height:window.innerHeight,overflow:"auto"}},r.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u70ed\u5356",r.a.createElement("br",null),r.a.createElement(y.a,{overlay:function(){var t=ie[0],a=ie[1],n=ie[2],i=ie[3],o=ie[4],c=ie[5],d=ie[6],u=ie[7];return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.key,r=ie[n].userId,t.next=4,e.initFirstPage(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(b.a.Item,{key:t.index},t.name),r.a.createElement(b.a.Item,{key:a.index},a.name),r.a.createElement(b.a.Item,{key:n.index},n.name),r.a.createElement(b.a.Item,{key:i.index},i.name),r.a.createElement(b.a.Item,{key:o.index},o.name),r.a.createElement(b.a.Item,{key:c.index},c.name),r.a.createElement(b.a.Item,{key:d.index},d.name),r.a.createElement(b.a.Item,{key:u.index},u.name))},trigger:["click"]},r.a.createElement(v.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},o,r.a.createElement(Q.a,null))),r.a.createElement("br",null),r.a.createElement(re,{size:"small",locale:ee.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ae()(n,"YYYY.MM.DD+HH:mm:ss"),ae()(i,"YYYY.MM.DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ae()("00:00:00","HH:mm:ss"),ae()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,a[0]?a[0].format("YYYY.MM.DD+HH:mm:ss"):void 0,a[1]?a[1].format("YYYY.MM.DD+HH:mm:ss"):void 0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement("br",null),r.a.createElement(ne,{style:{width:280,marginTop:15},size:"small",placeholder:"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u540e\u67e5\u8be2",enterButton:"\u67e5\u8be2",onSearch:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,void 0,void 0,a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),r.a.createElement($.a,{initialLoad:!1,pageStart:0,loadMore:this.handleInfiniteOnLoad,hasMore:!this.state.loading&&this.state.hasMore,useWindow:!1},r.a.createElement(E.b,{dataSource:this.state.listData,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},footer:r.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var a=e.state.listData.indexOf(t),n="gray";0===a?n="orange":1===a?n="green":2===a&&(n="red");var i="-"!==t.specification?" | "+t.specification:"",o=""!==t.category?" | "+t.category:"";return r.a.createElement(E.b.Item,null,r.a.createElement("div",{style:{width:30,height:30,backgroundColor:n,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},r.a.createElement("div",{style:{marginTop:3}},a+1)),r.a.createElement(E.b.Item.Meta,{title:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:16}},t.name),r.a.createElement("span",{style:{fontSize:12}},i),r.a.createElement("span",{style:{fontSize:10}},o)),description:"\u9500\u552e\u6570\u91cf\uff1a".concat(t.saleNumber," \u73b0\u6709\u5e93\u5b58\uff1a").concat(t.currentNumber)}),r.a.createElement("span",{style:{marginRight:25,color:"coral",fontSize:18}},"\uffe5".concat(t.realIncome)))}},this.state.loading&&this.state.hasMore&&r.a.createElement("div",null,r.a.createElement(k.a,{style:{position:"absolute",bottom:15,width:"100%",textAlign:"center"}})))))}}]),a}(r.a.Component),ce=h.a.RangePicker,le=f.a.Search,se=[{index:0,name:"\u5168\u90e8",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u76d8\u9640\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u6f33\u6d66\u7acb\u4eba",userId:"4382444"}],de=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a);var r=(n=t.call(this,e)).props.query,i="",o="";return r&&(i=(i=r.get("beginDateTime")).replace(" ","+"),o=(o=r.get("endDateTime")).replace(" ","+")),n.state={userId:"",shopIndex:1,listData:[],loading:!1,beginDateTime:i,endDateTime:o,keyword:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,a="",t&&(a=t.get("id")),e.next=5,this.initFirstPage(a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r){var i,o=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<se.length)){e.next=8;break}if(se[i].userId!==t){e.next=5;break}return this.setState({shopIndex:i}),e.abrupt("break",8);case 5:i++,e.next=1;break;case 8:this.setState({userId:void 0!==t?t:this.state.userId,listData:[],loading:!1,beginDateTime:void 0!==a?a:this.state.beginDateTime,endDateTime:void 0!==n?n:this.state.endDateTime,keyword:void 0!==r?r:this.state.keyword},Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fetchListData();case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"fetchListData",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n,r,i,o,c,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state,a=t.listData,n=t.userId,r=t.beginDateTime,i=t.endDateTime,o=t.keyword,c=[],this.setState({loading:!0}),e.next=6,T(n,r,i,o);case 6:(s=e.sent)&&0===s.errCode&&(c=s.list),d=a.concat(c),this.setState({listData:d,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({loading:!1});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.shopIndex,n=t.beginDateTime,i=t.endDateTime,o=se[a].name;return r.a.createElement("div",null,r.a.createElement(E.b,{dataSource:this.state.listData,loading:this.state.loading,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},header:r.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u62a5\u635f",r.a.createElement("br",null),r.a.createElement(y.a,{overlay:function(){var t=se[0],a=se[1],n=se[2],i=se[3],o=se[4],c=se[5],d=se[6],u=se[7];return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.key,r=se[n].userId,t.next=4,e.initFirstPage(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(b.a.Item,{key:t.index},t.name),r.a.createElement(b.a.Item,{key:a.index},a.name),r.a.createElement(b.a.Item,{key:n.index},n.name),r.a.createElement(b.a.Item,{key:i.index},i.name),r.a.createElement(b.a.Item,{key:o.index},o.name),r.a.createElement(b.a.Item,{key:c.index},c.name),r.a.createElement(b.a.Item,{key:d.index},d.name),r.a.createElement(b.a.Item,{key:u.index},u.name))},trigger:["click"]},r.a.createElement(v.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},o,r.a.createElement(Q.a,null))),r.a.createElement("br",null),r.a.createElement(ce,{size:"small",locale:ee.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ae()(n,"YYYY.MM.DD+HH:mm:ss"),ae()(i,"YYYY.MM.DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ae()("00:00:00","HH:mm:ss"),ae()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a[0].format("YYYY.MM.DD+HH:mm:ss")),console.log(a[1].format("YYYY.MM.DD+HH:mm:ss")),t.next=4,e.initFirstPage(void 0,a[0]?a[0].format("YYYY.MM.DD+HH:mm:ss"):void 0,a[1]?a[1].format("YYYY.MM.DD+HH:mm:ss"):void 0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement("br",null),r.a.createElement(le,{style:{width:280,marginTop:15},size:"small",placeholder:"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u540e\u67e5\u8be2",enterButton:"\u67e5\u8be2",onSearch:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,void 0,void 0,a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),footer:r.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var a=e.state.listData.indexOf(t),n="gray";0===a?n="orange":1===a?n="green":2===a&&(n="red");var i="-"!==t.specification?" | "+t.specification:"",o=""!==t.category?" | "+t.category:"";return r.a.createElement(E.b.Item,null,r.a.createElement("div",{style:{width:30,height:30,backgroundColor:n,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},r.a.createElement("div",{style:{marginTop:3}},a+1)),r.a.createElement(E.b.Item.Meta,{title:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:16}},t.name),r.a.createElement("span",{style:{fontSize:12}},i),r.a.createElement("span",{style:{fontSize:10}},o)),description:"\u62a5\u635f\u6570\u91cf\uff1a".concat(t.discardNumber)}),r.a.createElement("span",{style:{marginRight:25,color:"coral",fontSize:18}},"\uffe5".concat(t.diacardMoney)))}}))}}]),a}(r.a.Component),ue=f.a.Search,me=h.a.RangePicker,pe=[{index:0,name:"\u5168\u90e8\u95e8\u5e97",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u76d8\u9640\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u6f33\u6d66\u7acb\u4eba",userId:"4382444"}],fe="%221593049816479739965%22,%221593049854760654816%22,%221592989355905414162%22,%221593049881212199906%22,%221593059349213583584%22",he=[{index:0,name:"\u5168\u90e8",categoryId:fe},{index:1,name:"\u73b0\u70e4\u7c7b",categoryId:"%221593049816479739965%22"},{index:2,name:"\u5410\u53f8\u7c7b",categoryId:"%221593049854760654816%22"},{index:3,name:"\u9910\u5305\u7c7b",categoryId:"%221626767161867698544%22"},{index:4,name:"\u897f\u70b9\u7c7b",categoryId:"%221592989355905414162%22"},{index:5,name:"\u5e38\u6e29\u7c7b",categoryId:"%221593049881212199906%22"},{index:6,name:"\u5e72\u70b9\u7c7b",categoryId:"%221593059349213583584%22"}],ge=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a);var r=(n=t.call(this,e)).props.query,i=ae()().format("YYYY-MM-DD")+"+00:00:00",o=ae()().format("YYYY-MM-DD")+"+23:59:59";return r&&(i=r.get("beginDateTime")?r.get("beginDateTime"):i,o=r.get("endDateTime")?r.get("endDateTime"):o),n.state={userId:"",shopIndex:1,categoryId:fe,categoryIndex:0,listData:[],loading:!1,beginDateTime:i,endDateTime:o,keyword:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,a="",t&&t.get("id")&&(a=t.get("id")),e.next=5,this.initFirstPage(a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(s.a)(l.a.mark((function e(t,a,n,r,i){var o,c,d=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<pe.length)){e.next=8;break}if(pe[o].userId!==t){e.next=5;break}return this.setState({shopIndex:o}),e.abrupt("break",8);case 5:o++,e.next=1;break;case 8:c=0;case 9:if(!(c<he.length)){e.next=16;break}if(he[c].categoryId!==a){e.next=13;break}return this.setState({categoryIndex:c}),e.abrupt("break",16);case 13:c++,e.next=9;break;case 16:this.setState({userId:void 0!==t?t:this.state.userId,categoryId:void 0!==a?a:this.state.categoryId,listData:[],loading:!1,beginDateTime:void 0!==n?n:this.state.beginDateTime,endDateTime:void 0!==r?r:this.state.endDateTime,keyword:void 0!==i?i:""},Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetchListData();case 2:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r,i){return e.apply(this,arguments)}}()},{key:"fetchListData",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n,r,i,o,c,s,d,u,m,p,f,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state,a=t.listData,n=t.userId,r=t.categoryId,i=t.beginDateTime,o=t.endDateTime,c=t.keyword,s=[],this.setState({loading:!0}),(u=(d=i).indexOf("+"))>=0&&(d=d.substring(0,u)),(p=(m=o).indexOf("+"))>=0&&(m=m.substring(0,p)),e.next=12,S(n,r,d,m,c);case 12:(f=e.sent)&&0===f.errCode&&(s=f.list),h=a.concat(s),this.setState({listData:h,loading:!1}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),this.setState({loading:!1});case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.shopIndex,n=t.beginDateTime,i=t.endDateTime,o=t.categoryIndex,c=pe[a].name,d=he[o].name;return r.a.createElement("div",null,r.a.createElement(E.b,{dataSource:this.state.listData,loading:this.state.loading,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},header:r.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u5546\u54c1\u62a5\u635f\u4e0e\u9500\u552e\u5206\u6790",r.a.createElement("br",null),r.a.createElement(y.a,{overlay:function(){var t=pe[0],a=pe[1],n=pe[2],i=pe[3],o=pe[4],c=pe[5],d=pe[6],u=pe[7];return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.key,r=pe[n].userId,t.next=4,e.initFirstPage(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(b.a.Item,{key:t.index},t.name),r.a.createElement(b.a.Item,{key:a.index},a.name),r.a.createElement(b.a.Item,{key:n.index},n.name),r.a.createElement(b.a.Item,{key:i.index},i.name),r.a.createElement(b.a.Item,{key:o.index},o.name),r.a.createElement(b.a.Item,{key:c.index},c.name),r.a.createElement(b.a.Item,{key:d.index},d.name),r.a.createElement(b.a.Item,{key:u.index},u.name))},trigger:["click"]},r.a.createElement(v.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},c,r.a.createElement(Q.a,null))),r.a.createElement("br",null),r.a.createElement(y.a,{overlay:function(){var t=he[0],a=he[1],n=he[2],i=he[3],o=he[4],c=he[5],d=he[6];return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.key,r=he[n].categoryId,t.next=4,e.initFirstPage(void 0,r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(b.a.Item,{key:t.index},t.name),r.a.createElement(b.a.Item,{key:a.index},a.name),r.a.createElement(b.a.Item,{key:n.index},n.name),r.a.createElement(b.a.Item,{key:i.index},i.name),r.a.createElement(b.a.Item,{key:o.index},o.name),r.a.createElement(b.a.Item,{key:c.index},c.name),r.a.createElement(b.a.Item,{key:d.index},d.name))},trigger:["click"]},r.a.createElement(v.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},d,r.a.createElement(Q.a,null))),r.a.createElement("br",null),r.a.createElement(me,{size:"small",locale:ee.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ae()(n,"YYYY-MM-DD+HH:mm:ss"),ae()(i,"YYYY-MM-DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ae()("00:00:00","HH:mm:ss"),ae()("23:59:59","HH:mm:ss")],showTime:!1,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length>=2)){t.next=3;break}return t.next=3,e.initFirstPage(void 0,void 0,a[0]?a[0].format("YYYY-MM-DD"):void 0,a[1]?a[1].format("YYYY-MM-DD"):void 0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement("br",null),r.a.createElement(ue,{style:{width:280,marginTop:15},size:"small",placeholder:"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u540e\u67e5\u8be2",enterButton:"\u67e5\u8be2",onSearch:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initFirstPage(void 0,void 0,void 0,void 0,a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),value:this.state.keyword,onChange:function(t){var a=t.target.value;e.setState({keyword:a})}})),footer:r.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var a=e.state.listData.indexOf(t),n="gray";0===a?n="orange":1===a?n="green":2===a&&(n="red");var i="-"!==t.specification?" | "+t.specification:"",o=""!==t.category?" | "+t.category:"";return r.a.createElement(E.b.Item,null,r.a.createElement("div",{style:{width:30,height:30,backgroundColor:n,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},r.a.createElement("div",{style:{marginTop:3}},a+1)),r.a.createElement(E.b.Item.Meta,{title:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:16}},t.name),r.a.createElement("span",{style:{fontSize:12}},i),r.a.createElement("span",{style:{fontSize:10}},o)),description:r.a.createElement("div",null,r.a.createElement("div",{style:{color:"coral",fontSize:12}},"\u62a5\u635f\u6570\u91cf\uff1a".concat(t.discardNumber,"  \u62a5\u635f\u91d1\u989d\uff1a\uffe5").concat(t.diacardMoney)),r.a.createElement("div",{style:{color:"coral",fontSize:12}},"\u9500\u552e\u6570\u91cf\uff1a".concat(t.saleNumber,"  \u9500\u552e\u91d1\u989d\uff1a\uffe5").concat(t.saleMoney)),r.a.createElement("div",{style:{color:"darkred",fontSize:16}},"\u62a5\u635f\u7387\uff1a".concat(t.discardProportion," %")))}))}}))}}]),a}(r.a.Component),ye=h.a.RangePicker,be=[{index:0,name:"\u5168\u90e8",userId:""},{index:1,name:"\u6559\u80b2\u5c40\u5e97",userId:"3995767"},{index:2,name:"\u65e7\u9547\u5e97",userId:"3995771"},{index:3,name:"\u6c5f\u6ee8\u5e97",userId:"4061089"},{index:4,name:"\u6c64\u6cc9\u5e97",userId:"4061092"},{index:5,name:"\u76d8\u9640\u5e97",userId:"4339546"},{index:6,name:"\u72ee\u5934\u5e97",userId:"4359267"},{index:7,name:"\u6f33\u6d66\u7acb\u4eba",userId:"4382444"}],ve=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a);var r=(n=t.call(this,e)).props.query,i=ae()().format("YYYY.MM.DD")+"+00:00:00",o=ae()().format("YYYY.MM.DD")+"+23:59:59";return r&&(i=r.get("beginDateTime")?r.get("beginDateTime"):i,o=r.get("endDateTime")?r.get("endDateTime"):o),n.state={userId:"",shopIndex:1,listData:[],loading:!1,beginDateTime:i,endDateTime:o},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,a="",t&&t.get("id")&&(a=t.get("id")),e.next=5,this.initFirstPage(a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFirstPage",value:function(){var e=Object(s.a)(l.a.mark((function e(t,a,n){var r,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<be.length)){e.next=8;break}if(be[r].userId!==t){e.next=5;break}return this.setState({shopIndex:r}),e.abrupt("break",8);case 5:r++,e.next=1;break;case 8:this.setState({userId:void 0!==t?t:this.state.userId,listData:[],loading:!1,beginDateTime:void 0!==a?a:this.state.beginDateTime,endDateTime:void 0!==n?n:this.state.endDateTime},Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetchListData();case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"fetchListData",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n,r,i,o,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state,a=t.listData,n=t.userId,r=t.beginDateTime,i=t.endDateTime,o=[],this.setState({loading:!0}),e.next=6,I(n,r,i);case 6:(c=e.sent)&&0===c.errCode&&(o=c.list),s=a.concat(o),this.setState({listData:s,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({loading:!1});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.shopIndex,n=t.beginDateTime,i=t.endDateTime,o=be[a].name;return r.a.createElement("div",null,r.a.createElement(E.b,{dataSource:this.state.listData,loading:this.state.loading,locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},header:r.a.createElement("div",{style:{textAlign:"center",fontSize:24,fontWeight:"bold"}},"\u4f18\u60e0\u52b5\u7edf\u8ba1",r.a.createElement("br",null),r.a.createElement(y.a,{overlay:function(){var t=be[0],a=be[1],n=be[2],i=be[3],o=be[4],c=be[5],d=be[6],u=be[7];return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.key,r=be[n].userId,t.next=4,e.initFirstPage(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(b.a.Item,{key:t.index},t.name),r.a.createElement(b.a.Item,{key:a.index},a.name),r.a.createElement(b.a.Item,{key:n.index},n.name),r.a.createElement(b.a.Item,{key:i.index},i.name),r.a.createElement(b.a.Item,{key:o.index},o.name),r.a.createElement(b.a.Item,{key:c.index},c.name),r.a.createElement(b.a.Item,{key:d.index},d.name),r.a.createElement(b.a.Item,{key:u.index},u.name))},trigger:["click"]},r.a.createElement(v.a,{size:"small",style:{width:240},onClick:function(e){return e.preventDefault()}},o,r.a.createElement(Q.a,null))),r.a.createElement("br",null),r.a.createElement(ye,{size:"small",locale:ee.a,bordered:!0,style:{width:320,marginTop:15},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,defaultValue:[ae()(n,"YYYY.MM.DD+HH:mm:ss"),ae()(i,"YYYY.MM.DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ae()("00:00:00","HH:mm:ss"),ae()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!1,showMinute:!1,showSecond:!1},onChange:function(e){e||g.b.warning("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65e5\u671f!")},onOk:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a[0].format("YYYY.MM.DD+HH:mm:ss")),console.log(a[1].format("YYYY.MM.DD+HH:mm:ss")),t.next=4,e.initFirstPage(void 0,a[0]?a[0].format("YYYY.MM.DD+HH:mm:ss"):void 0,a[1]?a[1].format("YYYY.MM.DD+HH:mm:ss"):void 0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement("br",null)),footer:r.a.createElement("div",{style:{height:100,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),renderItem:function(t){var a=e.state.listData.indexOf(t),n="gray";return 0===a?n="orange":1===a?n="green":2===a&&(n="red"),r.a.createElement(E.b.Item,null,r.a.createElement("div",{style:{width:30,height:30,backgroundColor:n,color:"white",fontSize:14,fontWeight:"bold",textAlign:"center",marginRight:15,marginLeft:15,borderRadius:10}},r.a.createElement("div",{style:{marginTop:3}},a+1)),r.a.createElement(E.b.Item.Meta,{title:r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:16}},t.name)),description:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",{style:{color:"darkred",fontSize:14}},"\u5c5e\u6027\uff1a"),r.a.createElement("span",{style:{color:"darkred",fontSize:12}},"\u9762\u503c\u91d1\u989d\uff1a".concat(t.faceValue," , \u9500\u552e\u4ef7\u683c\uff1a\uffe5").concat(t.salePrice))),r.a.createElement("div",null,r.a.createElement("span",{style:{color:"darkred",fontSize:14}},"\u6838\u9500\uff1a"),r.a.createElement("span",{style:{color:"darkred",fontSize:12}},"\u6570\u91cf\uff1a".concat(t.writeOffNumber," , \u4f18\u60e0\u91d1\u989d\uff1a\uffe5").concat(t.writeOffValue,", \u4ea4\u6613\u91d1\u989d\uff1a\uffe5").concat(t.payValue))),r.a.createElement("div",null,r.a.createElement("span",{style:{color:"gray",fontSize:14}},"\u9500\u552e\uff1a"),r.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u6570\u91cf\uff1a".concat(t.saleNumber," , \u9500\u552e\u91d1\u989d\uff1a\uffe5").concat(t.saleValue))),r.a.createElement("div",null,r.a.createElement("span",{style:{color:"gray",fontSize:14}},"\u975e\u9500\u552e(\u8d60\u9001)\uff1a"),r.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u6570\u91cf\uff1a".concat(t.presentNumber))))}))}}))}}]),a}(r.a.Component),Ee=a(415),ke=a(182),xe=a(418),we=a(185),Te=a(425),Se=a(83),Ie=a(426),De=a(137),Oe=a(427),Ce=a(428),Le=a(429),Pe=a(430),Ne=a(431),ze=a(432),je=(a(339),f.a.TextArea),Me=f.a.Search,Ae=Ee.a.Text,_e=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).showCallModal=function(){var e=Object(s.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({callModalVisible:!0,phoneNumToBeCall:"-----------"}),e.next=3,n.getPhoneNumberBy(t);case 3:(a=e.sent)&&n.setState({phoneNumToBeCall:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleCallModalOnOk=function(){n.setState({callModalVisible:!1}),window.location.href="tel:"+n.state.phoneNumToBeCall},n.handleCallModalOnCancel=function(){n.setState({callModalVisible:!1})},n.showMessageModal=function(){var e=Object(s.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({messageModalVisible:!0,phoneNumToBeCall:"-----------"}),e.next=3,n.getPhoneNumberBy(t);case 3:(a=e.sent)&&n.setState({phoneNumToBeCall:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleMessageModalOnOk=Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({messageModalVisible:!1}),t=n.state,a=t.DIYEventList,r=t.whichEventIndexToChoose,i=t.lastMessageItem,!(o=a[r])){e.next=12;break}return c=ae()(o.started).utcOffset(8),s=i.couponId,d=i.memberName,u=o._id,e.next=10,U(n.state.phoneNumToBeCall,c.format("MM-DD HH:mm"),s,d,u);case 10:(m=e.sent)&&0===m.errCode?(g.b.info("\u52a0\u5165DIY\u6d3b\u52a8\u540d\u5355\u5e76\u6210\u529f\u53d1\u9001\u77ed\u4fe1"),i.remark=m.remark,n.fetchDIYEventList(),"small"===n.state.DIYEventShowMode&&(n.setState({DIYEventShowMode:"large"}),n.setState({DIYEventShowMode:"small"})),n.forceUpdate()):m?g.b.info(m.errMessage):g.b.info("\u6dfb\u52a0\u5931\u8d25");case 12:case"end":return e.stop()}}),e)}))),n.handleMessageModalOnCancel=function(){n.setState({messageModalVisible:!1})},n.showCreateDIYEventModal=function(){n.setState({createDIYEventModalVisible:!0})},n.showJoinToEventModal=function(){n.setState({joinToEventModalVisible:!0})},n.getPhoneNumberBy=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",e.next=3,_(t);case 3:return 0===(n=e.sent).errCode&&1===n.list.length&&(r=n.list[0].phoneNum,a=r),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleCreateDIYEventModalOnOk=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({createDIYEventModalVisible:!1}),t=n.state.eventTime4createDIY,e.next=4,Y(t);case 4:a=e.sent,console.log(a),0!==a.errCode?g.b.error(a.errMessage):(g.b.info("\u521b\u5efaDIY\u6d3b\u52a8\u6210\u529f\uff01"),n.fetchDIYEventList(!1));case 7:case"end":return e.stop()}}),e)}))),n.handleCreateDIYEventModalOnCancel=function(){n.setState({createDIYEventModalVisible:!1})},n.handleCreateDIYEventDayOnOk=function(e){n.setState({eventTime4createDIY:e})},n.handleDeleteDIY=function(){var e=Object(s.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:if(!(a=e.sent)||0!==a.errCode){e.next=6;break}return e.next=6,n.fetchDIYEventList(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleJoinToEventModalOnOk=Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({joinToEventModalVisible:!1}),t=n.state,a=t.lastJoinToEventItem,r=t.whichEventIndexToChoose,i=t.DIYEventList,o=a.couponId,c=a.memberName,s=i[r],d=s._id,e.next=8,H(o,c,d);case 8:(u=e.sent)&&0===u.errCode?(g.b.info("\u6d3b\u52a8\u52a0\u5165\u6210\u529f"),n.fetchDIYEventList(),a.remark=u.remark,"small"===n.state.DIYEventShowMode&&(n.setState({DIYEventShowMode:"large"}),n.setState({DIYEventShowMode:"small"})),n.forceUpdate()):u?g.b.info(u.errMessage):g.b.info("\u6dfb\u52a0\u5931\u8d25");case 10:case"end":return e.stop()}}),e)}))),n.handleJoinToEventModalOnCancel=function(){n.setState({joinToEventModalVisible:!1})},n.state={pageIndex:1,total:1,listData:[],loading:!1,callModalVisible:!1,phoneNumToBeCall:"",messageModalVisible:!1,lastCallItem:void 0,lastMessageItem:void 0,lastSaveItem:void 0,lastJoinToEventItem:void 0,keyword:"",createDIYEventModalVisible:!1,eventTime4createDIY:ae()().set("second",0).set("millisecond",0),DIYEventList:[],DIYEventShowMode:"large",whichEventIndexToChoose:0,joinToEventModalVisible:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:(t=e.sent)&&0===t.errCode&&(a=t.page,this.fetchListDataByPage(a)),this.fetchDIYEventList(!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDIYEventList",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,R();case 3:(n=e.sent)&&0===n.errCode&&(a=n.list),this.setState({DIYEventList:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchListDataByPage",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=this.state.keyword,this.setState({listData:[],pageIndex:t},Object(s.a)(l.a.mark((function e(){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=1,n.setState({loading:!0}),e.next=5,A(t,10,a);case 5:(o=e.sent)&&0===o.errCode&&(r=o.list,i=o.total),n.setState({listData:r,loading:!1,total:i});case 8:case"end":return e.stop()}}),e)}))))}catch(r){this.setState({loading:!1})}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.listData,n=t.pageIndex,i=t.total,o=t.loading,c=t.phoneNumToBeCall,d=t.lastCallItem,u=t.lastMessageItem,m=t.lastSaveItem,p=t.lastJoinToEventItem,f=t.DIYEventList,y=t.DIYEventShowMode,b=t.whichEventIndexToChoose,k="-----------"===c,x="-----------"===c||f.length<=0,w=f.length<=0,T=ae()();if(f.length>0&&b>=0&&b<f.length){var S=f[b];S&&(T=ae()(S.started).utcOffset(8))}var I=0;return f.forEach((function(e){e.participants&&(I+=e.participants.length)})),r.a.createElement("div",null,r.a.createElement("div",{style:{position:"fixed",zIndex:5,fontSize:12,fontWeight:"bold",width:"100%",background:"rgba(136,136,136,0.95)"}},r.a.createElement("div",{style:{marginTop:4,marginLeft:6,fontSize:24}},"DIY\u6d3b\u52a8\u9884\u7ea6"),r.a.createElement(Me,{style:{width:240,marginTop:4,marginLeft:6,marginBottom:4},size:"middle",placeholder:"\u5238\u53f7/\u4f1a\u5458\u53f7/\u4f1a\u5458\u59d3\u540d",enterButton:"\u67e5\u8be2",onSearch:Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchListDataByPage(1);case 1:case"end":return t.stop()}}),t)}))),value:this.state.keyword,onChange:function(t){var a=t.target.value;e.setState({keyword:a})}}),r.a.createElement(ke.a,{style:{marginTop:4,marginLeft:6,marginBottom:12},onChange:function(t){e.fetchListDataByPage(t),V(t)},showQuickJumper:!0,showSizeChanger:!1,defaultCurrent:1,current:n,pageSize:10,total:i})),"small"===y?r.a.createElement("div",{style:{position:"fixed",zIndex:5,fontSize:12,bottom:0,right:0,background:"rgba(136,136,136,0.9)",borderRadius:10}},r.a.createElement(v.a,{size:"small",shape:"round",style:{marginLeft:4,marginTop:4,marginRight:4,marginBottom:4},icon:r.a.createElement(Te.a,null),onClick:function(){e.setState({DIYEventShowMode:"large"})}},r.a.createElement("span",null,"\u67e5\u770bDIY\u6d3b\u52a8"),r.a.createElement("span",{style:{marginLeft:4,width:22,height:22,backgroundColor:"orange",borderRadius:11},className:"animaToBig"},I))):r.a.createElement("div",{style:{position:"fixed",zIndex:5,fontSize:12,bottom:0,right:0,background:"rgba(136,136,136,0.98)",borderRadius:10}},r.a.createElement(E.b,{size:"small",locale:{emptyText:"\u6ca1\u6709DIY\u6d3b\u52a8\uff0c\u8bf7\u521b\u5efa"},dataSource:f,renderItem:function(t){var a=ae()(t.started).utcOffset(8).format("YYYY-MM-DD dddd HH:mm"),n=t.participants.length;return r.a.createElement(E.b.Item,null,r.a.createElement("div",{style:{marginLeft:-10,marginRight:0},className:"animaToBig"},r.a.createElement(v.a,{size:"small",onClick:function(){void 0!==t.fold?t.fold=!t.fold:t.fold=!0,e.forceUpdate()}},r.a.createElement("span",null,a),r.a.createElement("span",{style:{marginLeft:4,width:22,height:22,backgroundColor:"orange",borderRadius:11}},n)),t.fold?r.a.createElement("div",{style:{textAlign:"center",color:"green",fontSize:12}},"\u70b9\u51fb\u4e0a\u65b9\u6807\u9898\u5c55\u5f00\u540d\u5355"):r.a.createElement(E.b,{split:!1,size:"small",style:{width:196,marginTop:2},grid:{column:2,gutter:0},locale:{emptyText:"\u6ca1\u6709\u53c2\u52a0\u8005\uff0c\u8bf7\u9080\u8bf7"},dataSource:t.participants,renderItem:function(a){var n=t.participants.indexOf(a);return r.a.createElement(E.b.Item,{style:{background:"gray",margin:2},extra:r.a.createElement("div",null,r.a.createElement(v.a,{shape:"circle",danger:!0,style:{marginLeft:-16},size:"small",disabled:!0},n+1),r.a.createElement(v.a,{danger:!0,style:{marginLeft:20},size:"small",icon:r.a.createElement(Se.a,null),onClick:Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:xe.a.confirm({style:{top:0},title:"\u662f\u5426\u5220\u9664",content:"\u5220\u9664\u4f1a\u4eceDIY\u6d3b\u52a8\u540d\u5355\u4e2d\u79fb\u9664\u8be5\u4f1a\u5458",okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){var t=Object(s.a)(l.a.mark((function t(){var n,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.couponId,r=a.memberName,i=a.eventId,t.next=5,W(n,r,i);case 5:return t.next=7,e.fetchDIYEventList(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 1:case"end":return t.stop()}}),t)})))})),className:"animaToBig"},r.a.createElement(E.b.Item.Meta,{title:r.a.createElement("div",{style:{marginTop:-4,marginBottom:-4}},r.a.createElement(Ae,{style:{color:"white",fontSize:12,width:94,marginLeft:-12},ellipsis:!0},a.memberName))}))}})),r.a.createElement("div",null,r.a.createElement(v.a,{size:"small",danger:!0,icon:r.a.createElement(Ie.a,null),style:{marginLeft:2,marginRight:10},onClick:function(){xe.a.confirm({style:{top:0},icon:r.a.createElement(De.a,null),title:"\u662f\u5426\u5220\u9664",content:r.a.createElement("div",null,"\u5220\u9664\u4f1a\u76f8\u5e94\u89e3\u6563",r.a.createElement("span",{style:{color:"red"}},a),"\u7684DIY\u6d3b\u52a8?"),okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){e.handleDeleteDIY(t._id)}})}})))},header:r.a.createElement("div",{style:{textAlign:"center",fontSize:12,color:"white",height:10}},"DIY\u6d3b\u52a8\u5217\u8868",r.a.createElement(v.a,{style:{position:"absolute",right:4,top:6},type:"dashed",shape:"circle",size:"small",icon:r.a.createElement(Oe.a,null),onClick:function(){e.setState({DIYEventShowMode:"small"})}})),footer:r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(v.a,{icon:r.a.createElement(Ce.a,null),shape:"round",style:{marginBottom:0},size:"small",onClick:function(){e.showCreateDIYEventModal()}},"\u521b\u5efaDIY\u6d3b\u52a8"))})),r.a.createElement(E.b,{size:"small",locale:{emptyText:"\u6682\u65f6\u6ca1\u6709\u6570\u636e"},loading:o,header:r.a.createElement("div",{style:{height:110}}),footer:r.a.createElement("div",{style:{height:40,textAlign:"center",fontSize:14,fontWeight:"lighter"}},"\u5f2f\u9ea6--\u5fc3\u91cc\u6ee1\u6ee1\u90fd\u662f\u4f60"),dataSource:a,renderItem:function(t){var a="-"!==t.couponWriteOffTime,n=d===t,i=m===t,o=u===t,c=p===t;return r.a.createElement(E.b.Item,{key:t.serialNumber},r.a.createElement("div",{style:{width:20,height:20,backgroundColor:"crimson",color:"white",fontSize:12,fontWeight:"bold",textAlign:"center",marginRight:6,marginLeft:6,borderRadius:4}},r.a.createElement("div",{style:{marginTop:1}},r.a.createElement("span",null,t.serialNumber))),r.a.createElement(E.b.Item.Meta,{title:r.a.createElement("div",null,r.a.createElement("span",{style:{color:"black",fontSize:14}},"\u5238\u7f16\u53f7\uff1a"),r.a.createElement("span",{style:{color:"black",fontSize:12}},t.couponId)),description:r.a.createElement("div",null,r.a.createElement("div",{style:{marginTop:-10}},r.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u5236\u5238:"),r.a.createElement("span",{style:{color:"gray",fontSize:10}},"".concat(t.couponCreateTime))),r.a.createElement("div",{style:{marginTop:-8}},r.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u4f7f\u7528:"),r.a.createElement("span",{style:{color:"gray",fontSize:10}},"".concat(t.couponWriteOffTime))),r.a.createElement("div",{style:{marginTop:-8}},r.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u540d\u5b57:"),r.a.createElement(Ae,{ellipsis:!0,style:{color:"crimson",fontSize:10,width:100}},"".concat(t.memberName))),r.a.createElement("div",{style:{marginTop:-8}},r.a.createElement("span",{style:{color:"gray",fontSize:12}},"\u72b6\u6001:"),r.a.createElement("span",{style:{color:"crimson",fontSize:10}},"".concat(t.couponStatus))),r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(Le.a,null),shape:"circle",danger:n,onClick:function(){e.setState({lastCallItem:t}),e.showCallModal(t.memberId)},disabled:a}),r.a.createElement("span",null," "),r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(Pe.a,null),shape:"circle",danger:c,onClick:function(){e.setState({lastJoinToEventItem:t}),e.showJoinToEventModal()},disabled:a}),r.a.createElement("span",null," "),r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(Ne.a,null),shape:"circle",danger:o,onClick:function(){e.setState({lastMessageItem:t}),e.showMessageModal(t.memberId)},disabled:a}))}),r.a.createElement("div",{style:{marginRight:10}},r.a.createElement("div",null,"\u5907\u6ce8\uff1a"),r.a.createElement(je,{value:t.remark,onChange:function(a){var n=a.target.value;t.remark=n,e.forceUpdate()},disabled:a,style:{width:180},placeholder:"\u8fd9\u91cc\u8f93\u5165\u5907\u6ce8",autoSize:{minRows:2}}),r.a.createElement("br",null),r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(ze.a,null),disabled:a,danger:i,onClick:Object(s.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({lastSaveItem:t}),a.next=3,F(t.couponId,t.remark);case 3:0===a.sent.errCode?g.b.success("\u5df2\u7ecf\u4fdd\u5b58"):g.b.warning("\u4fdd\u5b58\u5931\u8d25");case 5:case"end":return a.stop()}}),a)}))),style:{marginTop:2}},"\u4fdd\u5b58\u5907\u6ce8")))}}),r.a.createElement(xe.a,{style:{top:0},title:"\u62e8\u6253\u7535\u8bdd",visible:this.state.callModalVisible,onOk:this.handleCallModalOnOk,onCancel:this.handleCallModalOnCancel,okText:"\u786e\u8ba4\u62e8\u6253",cancelText:"\u53d6\u6d88",closable:!0,okButtonProps:{disabled:k},cancelButtonProps:{disabled:k}},r.a.createElement("div",null,r.a.createElement("span",null,"\u4f1a\u5458\u7535\u8bdd\u4e3a\uff1a"),r.a.createElement("span",{style:{color:"red"}},c),r.a.createElement("span",null,"\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u62e8\u6253\uff1f"))),r.a.createElement(xe.a,{style:{top:0},title:"\u53d1\u9001\u77ed\u4fe1",visible:this.state.messageModalVisible,onOk:this.handleMessageModalOnOk,onCancel:this.handleMessageModalOnCancel,okText:"\u6dfb\u52a0\u5230\u540d\u5355\u4e2d\u5e76\u53d1\u9001\u77ed\u4fe1",cancelText:"\u53d6\u6d88",closable:!0,okButtonProps:{disabled:x},cancelButtonProps:{disabled:x}},f.length>0?r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:16}},"\u4f1a\u5458\u7535\u8bdd\u4e3a\uff1a"),r.a.createElement("span",{style:{color:"red"}},c),r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:16}},"\u77ed\u4fe1\u6a21\u677f\u4e3a\uff1a"),r.a.createElement("span",null,"\u3010\u5f2f\u9ea6\u70d8\u7119\u3011\u60a8\u5df2\u6210\u529f\u9884\u7ea6DIY\u6d3b\u52a8\uff0c\u6d3b\u52a8\u65f6\u95f4\uff1a"),r.a.createElement("span",{style:{color:"green",textDecoration:"underline"}},"".concat(T.format("MM-DD HH:mm"))),r.a.createElement("span",null,"\uff0c\u8bf7\u63d0\u524d10\u5206\u949f\u5230\u8fbe\uff0c\u5982\u53d8\u66f4\u8bf7\u63d0\u524d\u4e00\u5929\u62e8\u625313290768588\u3002"),r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:16}},"\u6d3b\u52a8\u65f6\u95f4\u4e3a\uff1a"),r.a.createElement(we.a.Group,{name:"radiogroup",defaultValue:0,value:b,onChange:function(t){var a=t.target.value;e.setState({whichEventIndexToChoose:a})}},f.map((function(e){var t=ae()(e.started).utcOffset(8).format("YYYY-MM-DD dddd HH:mm"),a=f.indexOf(e);return r.a.createElement(we.a,{key:a,value:a},t)}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,"\u53d1\u9001\u6b63\u6587\u77ed\u6d88\u606f\u7ed9\u4f1a\u5458\uff0c\u662f\u5426\u53d1\u9001\uff1f")):r.a.createElement("div",null,"\u8fd8\u672a\u521b\u5efaDIY\u6d3b\u52a8\uff0c\u8bf7\u5148\u53f3\u4e0b\u89d2\u521b\u5efaDIY\u6d3b\u52a8\u518d\u53d1\u9001\u77ed\u4fe1\u3002")),r.a.createElement(xe.a,{style:{top:0},title:"\u521b\u5efaDIY\u6d3b\u52a8",visible:this.state.createDIYEventModalVisible,onOk:this.handleCreateDIYEventModalOnOk,onCancel:this.handleCreateDIYEventModalOnCancel,okText:"\u786e\u8ba4\u521b\u5efa",cancelText:"\u53d6\u6d88",closable:!0},r.a.createElement("div",null,r.a.createElement("span",null,"\u6d3b\u52a8\u65f6\u95f4\uff1a"),r.a.createElement(h.a,{format:"MM-DD dddd HH:mm",showTime:{format:"HH:mm"},value:this.state.eventTime4createDIY,onOk:this.handleCreateDIYEventDayOnOk}),r.a.createElement("div",{style:{marginTop:10}},r.a.createElement("span",null,"\u5feb\u6377\u8bbe\u7f6e\uff1a"),r.a.createElement("span",null,r.a.createElement(v.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ae()().endOf("week").subtract(1,"days").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u672c\u5468\u516d15:30"),r.a.createElement(v.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ae()().endOf("week").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u672c\u5468\u65e515:30"),r.a.createElement(v.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ae()().add(7,"days").endOf("week").subtract(1,"days").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u4e0b\u5468\u516d15:30"),r.a.createElement(v.a,{style:{marginLeft:8,marginTop:8},type:"dashed",danger:!0,onClick:function(){var t=ae()().add(7,"days").endOf("week").set("hour",15).set("minute",30).set("second",0).set("millisecond",0);e.setState({eventTime4createDIY:t})}},"\u4e0b\u5468\u65e515:30"))))),r.a.createElement(xe.a,{style:{top:0},title:"\u9009\u62e9\u53c2\u52a0DIY\u6d3b\u52a8",visible:this.state.joinToEventModalVisible,onOk:this.handleJoinToEventModalOnOk,onCancel:this.handleJoinToEventModalOnCancel,okText:"\u786e\u8ba4\u52a0\u5165",cancelText:"\u53d6\u6d88",closable:!0,okButtonProps:{disabled:w},cancelButtonProps:{disabled:w}},f.length>0?r.a.createElement("div",null,r.a.createElement(we.a.Group,{name:"radiogroup",defaultValue:0,value:b,onChange:function(t){var a=t.target.value;e.setState({whichEventIndexToChoose:a})}},f.map((function(e){var t=ae()(e.started).utcOffset(8).format("YYYY-MM-DD dddd HH:mm"),a=f.indexOf(e);return r.a.createElement(we.a,{key:a,value:a},t)})))):r.a.createElement("div",null,"\u8fd8\u672a\u521b\u5efaDIY\u6d3b\u52a8\uff0c\u8bf7\u5148\u53f3\u4e0b\u89d2\u521b\u5efaDIY\u6d3b\u52a8\u518d\u9009\u62e9\u3002")))}}]),a}(r.a.Component),Fe=a(422),Ye=a(413),Re=function(e){for(var t=-1,a=e.GET_PRINTER_COUNT(),n=0;n<a;n++){if("EPSON L380 Series"===e.GET_PRINTER_NAME(n)){t=n;break}}return t},Be=function(e){for(var t=-1,a=e.GET_PRINTER_COUNT(),n=0;n<a;n++){if("EPSON LQ-735K ESC/P2"===e.GET_PRINTER_NAME(n)){t=n;break}}return t},He=h.a.RangePicker,Ue=[{index:0,name:"\u5168\u90e8\u95e8\u5e97",userId:""},{index:1,name:"001 - \u5f2f\u9ea6(\u6559\u80b2\u5c40\u5e97)",userId:"3995767"},{index:2,name:"002 - \u5f2f\u9ea6(\u65e7\u9547\u5e97)",userId:"3995771"},{index:3,name:"003 - \u5f2f\u9ea6(\u6c5f\u6ee8\u5e97)",userId:"4061089"},{index:4,name:"004 - \u5f2f\u9ea6(\u6c64\u6cc9\u5e97)",userId:"4061092"},{index:5,name:"005 - \u5f2f\u9ea6(\u76d8\u9640\u5e97)",userId:"4339546"},{index:6,name:"006 - \u5f2f\u9ea6(\u72ee\u5934\u5e97)",userId:"4359267"},{index:7,name:"007 - \u5f2f\u9ea6(\u6f33\u6d66\u7acb\u4eba)",userId:"4382444"}],We=[{index:0,name:"\u5168\u90e8\u6a21\u677f",templateId:"",templateUid:""},{index:1,name:"\u73b0\u70e4\u7c7b",templateId:"187",templateUid:"1595310806940367327"},{index:2,name:"\u897f\u70b9\u7c7b",templateId:"189",templateUid:"1595397637628133418"},{index:3,name:"\u5e38\u6e29\u7c7b",templateId:"183",templateUid:"1595077654714716554"},{index:4,name:"\u9910\u5305\u7c7b",templateId:"182",templateUid:"1595077405589137749"},{index:5,name:"\u5410\u53f8\u7c7b",templateId:"2873",templateUid:"1649149816769757925"}],Ve=[{index:0,name:"\u8ba2\u8d27\u65f6\u95f4",timeType:"0"},{index:1,name:"\u5230\u8d27\u65f6\u95f4",timeType:"2"}],Ke=["001 - \u5f2f\u9ea6(\u6559\u80b2\u5c40\u5e97)","002 - \u5f2f\u9ea6(\u65e7\u9547\u5e97)","003 - \u5f2f\u9ea6(\u6c5f\u6ee8\u5e97)","004 - \u5f2f\u9ea6(\u6c64\u6cc9\u5e97)","005 - \u5f2f\u9ea6(\u76d8\u9640\u5e97)","006 - \u5f2f\u9ea6(\u72ee\u5934\u5e97)","007 - \u5f2f\u9ea6(\u6f33\u6d66\u7acb\u4eba)"],qe=["\u73b0\u70e4\u7c7b","\u897f\u70b9\u7c7b","\u5e38\u6e29\u7c7b","\u9910\u5305\u7c7b","\u5410\u53f8\u7c7b"],Je=[{index:0,name:"\u5168\u90e8\u8d27\u5355",flowTypeId:""},{index:1,name:"\u95e8\u5e97\u8fdb\u8d27\u5355",flowTypeId:"12"},{index:2,name:"\u666e\u901a\u8c03\u8d27\u5355",flowTypeId:"10"},{index:3,name:"\u8c03\u62e8\u9000\u8d27\u5355",flowTypeId:"23"},{index:4,name:"\u666e\u901a\u51fa\u5e93\u5355",flowTypeId:"17"},{index:5,name:"\u91c7\u8d2d\u9000\u8d27\u5355",flowTypeId:"14"}],Ge=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).fetchOrderList=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.setState({alreadyOrderListData:[],alreadyOrderLoading:!0,selectedRowKeys4OrderList:[]},Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u,m,p,f,h,g,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.currentShop4OrderList,r=t.currentTemplate4OrderList,i=t.currentOrderTimeType,o=t.beginDateTime4OrderList,c=t.endDateTime4OrderList,s=[],d=[],u=Ke,m=qe,p=o.format("YYYY.MM.DD%2BHH:mm:ss"),f=c.format("YYYY.MM.DD%2BHH:mm:ss"),e.next=9,D(a.userId,r.templateId,i.timeType,p,f);case 9:(h=e.sent)&&0===h.errCode&&(s=(s=h.list).sort((function(e,t){return e.orderShopIndex-t.orderShopIndex})),g=[],y=[],s.forEach((function(e){e.key=s.indexOf(e)+1,d.push(e.key),-1===g.indexOf(e.orderShop)&&g.push(e.orderShop),-1===y.indexOf(e.templateName)&&y.push(e.templateName)})),u=[],Ke.forEach((function(e){-1===g.indexOf(e)&&u.push(e)})),m=[],qe.forEach((function(e){-1===y.indexOf(e)&&m.push(e)}))),n.setState({alreadyOrderListData:s,selectedRowKeys4OrderList:d,alreadyOrderLoading:!1,noyetOrderShops:u,noyetOrderTemplates:m});case 12:case"end":return e.stop()}}),e)}))))}catch(t){n.setState({alreadyOrderLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),n.fetchFlowList=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.setState({flowListLoading:!0},Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.currentShop4FlowList,r=t.currentFlowType,i=t.beginDateTime4FlowList,o=t.endDateTime4FlowList,c=[],s=i.format("YYYY.MM.DD%2BHH:mm:ss"),d=o.format("YYYY.MM.DD%2BHH:mm:ss"),e.next=6,j(a.userId,r.flowTypeId,s,d);case 6:u=e.sent,m=[],p=[],u&&0===u.errCode&&(c=u.list).forEach((function(e){var t=e.transferStatus,a=e.flowType;"\u8c03\u8d27\u5355"!==a&&"\u8c03\u62e8\u9000\u8d27\u5355"!==a||t[1].length<=0&&-1===t[0].indexOf("\u5df2\u62d2\u7edd\u51fa\u8d27")&&(p.push(e.key),"\u5f2f\u9ea6(\u603b\u90e8)"===e.transferTo&&m.push(e.key))})),n.setState({flowListData:c,flowListLoading:!1,baseShopUnHandleFlowSNs:m,allShopUnHandleFlowSNs:p});case 11:case"end":return e.stop()}}),e)}))))}catch(t){n.setState({flowListLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),n.fetchFlowDetail=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.setState({flowDetailData:[],flowDetailLoading:!0},Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n._currentFlowId);case 2:t=e.sent,a=[],t&&0===t.errCode&&(a=t.list),n.setState({flowDetailData:a,flowDetailLoading:!1});case 6:case"end":return e.stop()}}),e)}))))}catch(t){n.setState({flowDetailLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),n.fetchOrderDetail=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.setState({orderDetailData:[],orderDetailLoading:!0},Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(n._currentOrderId);case 2:t=e.sent,a=[],t&&0===t.errCode&&t.items&&(a=t.items),n.setState({orderDetailData:a,orderDetailLoading:!1});case 6:case"end":return e.stop()}}),e)}))))}catch(t){n.setState({orderDetailLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),n.onOrderItemSelectChange=function(e){n.setState({selectedRowKeys4OrderList:e})},n.handleProductionPrint=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,r,i,o,c,s,d,u,m,p,f,h,g,y,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},r=n.state,i=r.alreadyOrderListData,o=r.currentShop4OrderList,c=r.currentTemplate4OrderList,s=r.currentOrderTimeType,d=r.selectedRowKeys4OrderList,u=r.beginDateTime4OrderList,m=r.endDateTime4OrderList,p=[],f=0;case 4:if(!(f<i.length)){e.next=12;break}if(h=i[f],-1!==d.indexOf(h.key)){e.next=8;break}return e.abrupt("continue",9);case 8:p.push(h);case 9:++f,e.next=4;break;case 12:a.orderList=p,a.template=c,a.timeType=s,a.shop=o,a.beginDateTime=u,a.endDateTime=m,g=JSON.stringify(a),y="param="+escape(g),b="http://localhost:4000/productionPlanPrinter",b="http://gratefulwheat.ruyue.xyz/productionPlanPrinter",b+="?",b+=y,window.location.replace(b);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDistributionPrint=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,r,i,o,c,s,d,u,m,p,f,h,g,y,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},r=n.state,i=r.alreadyOrderListData,o=r.currentTemplate4OrderList,c=r.currentOrderTimeType,s=r.currentShop4OrderList,d=r.beginDateTime4OrderList,u=r.endDateTime4OrderList,m=r.selectedRowKeys4OrderList,p=[],f=0;case 4:if(!(f<i.length)){e.next=12;break}if(h=i[f],-1!==m.indexOf(h.key)){e.next=8;break}return e.abrupt("continue",9);case 8:p.push(h);case 9:++f,e.next=4;break;case 12:a.orderList=p,a.template=o,a.timeType=c,a.shop=s,a.beginDateTime=d,a.endDateTime=u,g=JSON.stringify(a),y="param="+escape(g),b="http://localhost:4000/productDistributePrinter",b="http://gratefulwheat.ruyue.xyz/productDistributePrinter",b+="?",b+=y,window.location.replace(b);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDistributionInput=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,r,i,o,c,s,d,u,m,p,f,h,g,y,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},r=n.state,i=r.alreadyOrderListData,o=r.currentTemplate4OrderList,c=r.currentShop4OrderList,s=r.currentOrderTimeType,d=r.beginDateTime4OrderList,u=r.endDateTime4OrderList,m=r.selectedRowKeys4OrderList,p=[],f=0;case 4:if(!(f<i.length)){e.next=12;break}if(h=i[f],-1!==m.indexOf(h.key)){e.next=8;break}return e.abrupt("continue",9);case 8:p.push(h);case 9:++f,e.next=4;break;case 12:a.orderList=p,a.template=o,a.timeType=s,a.shop=c,a.beginDateTime=d,a.endDateTime=u,g=JSON.stringify(a),y="param="+escape(g),b="http://localhost:4000/productDistributeInputer",b="http://gratefulwheat.ruyue.xyz/productDistributeInputer",b+="?",b+=y,window.location.replace(b);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getDayTip=function(e,t){var a="",n=ae()().startOf("day"),r=ae()().endOf("day"),i=ae()().subtract(1,"day").startOf("day"),o=ae()().subtract(1,"day").endOf("day"),c=ae()().add(1,"day").startOf("day"),l=ae()().add(1,"day").endOf("day");return 0===e.diff(n,"milliseconds")&&0===t.diff(r)?a="\u4eca\u5929":0===e.diff(i,"milliseconds")&&0===t.diff(o)?a="\u6628\u5929":0===e.diff(c,"milliseconds")&&0===t.diff(l)&&(a="\u660e\u5929"),a};var r=ae()().startOf("day"),i=ae()().endOf("day");var o=ae()().startOf("day"),c=ae()().endOf("day");return n.state={alreadyOrderListData:[],alreadyOrderLoading:!1,currentShop4OrderList:Ue[0],currentTemplate4OrderList:We[1],currentOrderTimeType:Ve[0],beginDateTime4OrderList:r,endDateTime4OrderList:i,timePickerOpen4OrderList:!1,selectedRowKeys4OrderList:[],noyetOrderShops:[],noyetOrderTemplates:[],orderDetailData:[],orderDetailLoading:!1,orderDetailModalVisible:!1,currentShop4FlowList:Ue[0],currentFlowType:Je[0],beginDateTime4FlowList:o,endDateTime4FlowList:c,timePickerOpen4FlowList:!1,flowListData:[],flowListLoading:!1,flowDetailData:[],flowDetailLoading:!1,flowDetailModalVisible:!1,refuseFlowLoading:!1,confirmFlowLoading:!1,baseShopUnHandleFlowSNs:[],allShopUnHandleFlowSNs:[]},n._currentFlowId="",n._currentFlowDetailStatus=[],n._currentFlowConfirmText="",n._currentFlowRefuseText="",n._currentTransferFrom="",n._currentTransferTo="",n._currentFlowType="",n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.query,(a=t&&t.get("param"))&&(a=unescape(a),n=JSON.parse(a),this.setState({currentTemplate4OrderList:n.template,currentOrderTimeType:n.timeType,currentShop4OrderList:n.shop,beginDateTime4OrderList:ae()(n.beginDateTime),endDateTime4OrderList:ae()(n.endDateTime)})),e.next=5,this.fetchOrderList();case 5:return e.next=7,this.fetchFlowList();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.alreadyOrderListData,n=t.currentShop4OrderList,i=t.currentTemplate4OrderList,o=t.currentOrderTimeType,c=t.alreadyOrderLoading,d=t.beginDateTime4OrderList,u=t.endDateTime4OrderList,m=t.timePickerOpen4OrderList,p=t.selectedRowKeys4OrderList,f=t.noyetOrderShops,h=t.noyetOrderTemplates,E=t.currentShop4FlowList,k=t.flowListData,x=t.flowListLoading,w=t.currentFlowType,T=t.beginDateTime4FlowList,S=t.endDateTime4FlowList,I=t.timePickerOpen4FlowList,D=t.flowDetailModalVisible,O=t.flowDetailData,C=t.flowDetailLoading,L=t.refuseFlowLoading,P=t.confirmFlowLoading,j=t.baseShopUnHandleFlowSNs,M=t.allShopUnHandleFlowSNs,A=t.orderDetailData,_=t.orderDetailLoading,F=t.orderDetailModalVisible,Y={selectedRowKeys:p,onChange:this.onOrderItemSelectChange},R="\u65e0";f&&f.length>0&&(R=f.join(" | "));var B=""!==n.userId||""===i.templateId||p.length<=0,H=""===n.userId,U="\u65e0";h&&h.length>0&&(U=h.join(" | "));var W=""===n.userId||""!==i.templateId||p.length<=0,V=""===i.templateId,K=""===n.userId||""!==i.templateId||c,q=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u5355\u53f7",dataIndex:"orderSerialNumber",key:"orderSerialNumber",width:180,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u65f6\u95f4",dataIndex:"orderTime",key:"orderTime",width:150,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u671f\u671b\u5230\u8d27",dataIndex:"expectTime",key:"expectTime",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u5355\u7c7b\u578b",dataIndex:"orderType",key:"orderType",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u6536\u94f6\u5458",dataIndex:"orderCashier",key:"orderCashier",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6a21\u677f\u540d\u79f0",dataIndex:"templateName",key:"templateName",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u95e8\u5e97",dataIndex:"orderShop",key:"orderShop",width:150,render:function(e){return r.a.createElement("span",{style:{fontSize:10,color:"red"}},e)}},{title:"\u914d\u8d27\u95e8\u5e97",dataIndex:"prepareShop",key:"prepareShop",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u72b6\u6001",dataIndex:"status",key:"status",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:"80",render:function(t,a){return r.a.createElement(Fe.b,{size:"middle"},r.a.createElement(v.a,{size:"small",onClick:function(t){e._currentOrderId=a.orderId,e._currentOrderShopName=a.orderShop,e._currentOrderTime=a.orderTime,e.setState({orderDetailModalVisible:!0},(function(){e.fetchOrderDetail()}))}},"\u67e5\u770b"))}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}}],J=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8d27\u6d41\u5355\u53f7",dataIndex:"flowNumber",key:"flowNumber",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"flowTime",key:"flowTime",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8d27\u5355\u7c7b\u578b",dataIndex:"flowType",key:"flowType",width:80,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u51fa\u8d27\u65b9",dataIndex:"transferFrom",key:"transferFrom",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8fdb\u8d27\u65b9",dataIndex:"transferTo",key:"transferTo",width:100,render:function(e){var t="\u5f2f\u9ea6(\u603b\u90e8)"===e?"red":"black";return r.a.createElement("span",{style:{fontSize:10,color:t}},e)}},{title:"\u72b6\u6001",dataIndex:"transferStatus",key:"transferStatus",width:320,render:function(e,t){var a="transparent",n="gray",i="transparent",o="gray";return"\u8c03\u8d27\u5355"!==t.flowType&&"\u8c03\u62e8\u9000\u8d27\u5355"!==t.flowType||(a=e[1]||-1!==e[0].indexOf("\u5df2\u62d2\u7edd\u51fa\u8d27")?"transparent":"yellow",n=e[1]||-1!==e[0].indexOf("\u5df2\u62d2\u7edd\u51fa\u8d27")?"gray":"black",i=-1===e[1].indexOf("\u5df2\u62d2\u7edd\u6536\u8d27")?"transparent":"red",o=-1===e[1].indexOf("\u5df2\u62d2\u7edd\u6536\u8d27")?"gray":"white"),r.a.createElement("div",{style:{backgroundColor:"transparent"}},r.a.createElement("div",{style:{fontSize:6,color:n,backgroundColor:a}},e[0]),r.a.createElement("div",{style:{fontSize:6,color:o,backgroundColor:i}},e[1]))}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:80,render:function(t,a){return r.a.createElement(Fe.b,{size:"middle"},r.a.createElement(v.a,{size:"small",onClick:function(t){e._currentFlowId=a.flowId,e._currentFlowDetailStatus=a.transferStatus,e._currentTransferFrom=a.transferFrom,e._currentTransferTo=a.transferTo,e._currentFlowType=a.flowType,e.setState({flowDetailModalVisible:!0},(function(){e.fetchFlowDetail()}))}},"\u67e5\u770b"))}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}}],G=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u540d\u79f0",dataIndex:"name",key:"name",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u7c7b\u522b",dataIndex:"categoryName",key:"categoryName",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u51fa\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:80,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5355\u4f4d",dataIndex:"unitName",key:"unitName",width:60,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u9500\u552e\u4ef7",dataIndex:"sellPrice",key:"sellPrice",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}}],X=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u540d\u79f0",dataIndex:"orderProductName",key:"orderProductName",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u7c7b\u522b",dataIndex:"categoryName",key:"categoryName",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:80,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}}],Z=!1;return"\u8c03\u8d27\u5355"!==this._currentFlowType&&"\u8c03\u62e8\u9000\u8d27\u5355"!==this._currentFlowType||this._currentFlowDetailStatus[0].length>0&&this._currentFlowDetailStatus[1].length<=0&&(-1!==this._currentFlowDetailStatus[0].indexOf("\u5f85\u786e\u8ba4\u51fa\u8d27")?(this._currentFlowConfirmText="\u786e\u8ba4\u51fa\u8d27",this._currentFlowRefuseText="\u62d2\u7edd\u51fa\u8d27",Z=!0):-1!==this._currentFlowDetailStatus[0].indexOf("\u5df2\u5b8c\u6210\u51fa\u8d27")&&(this._currentFlowConfirmText="\u786e\u8ba4\u6536\u8d27",this._currentFlowRefuseText="\u62d2\u7edd\u6536\u8d27",Z=!0)),r.a.createElement("div",null,r.a.createElement("div",{style:{marginLeft:30,marginTop:5,fontSize:18}},"\u751f\u4ea7 VS \u914d\u8d27"),r.a.createElement("div",{style:{zIndex:2,bottom:0,left:0,right:0,position:"fixed",width:"100%",height:140,backgroundColor:"lightgray"}},r.a.createElement("div",null,r.a.createElement(v.a,{danger:!0,disabled:B,type:"primary",onClick:this.handleProductionPrint,style:{width:210,height:30,marginLeft:50,marginTop:10}},"\u6253\u5370\u751f\u4ea7\u5355"),H?r.a.createElement("span",null,r.a.createElement("span",{style:{marginLeft:10,color:"tomato",fontSize:8}},"\u672a\u62a5\u8d27\u95e8\u5e97:"),r.a.createElement("span",{style:{marginLeft:5,color:"red",fontSize:14,fontWeight:"bold"}},R)):r.a.createElement("span",null)),r.a.createElement("div",null,r.a.createElement(v.a,{danger:!0,disabled:W,type:"primary",onClick:this.handleDistributionPrint,style:{width:210,height:30,marginLeft:50,marginTop:10}},"\u6253\u5370\u914d\u8d27\u5355"),V?r.a.createElement("span",null,r.a.createElement("span",{style:{marginLeft:10,color:"tomato",fontSize:8}},"\u672a\u62a5\u8d27\u6a21\u677f:"),r.a.createElement("span",{style:{marginLeft:5,color:"red",fontSize:14,fontWeight:"bold"}},U)):r.a.createElement("span",null)),r.a.createElement("div",null,r.a.createElement(v.a,{danger:!0,disabled:K,type:"primary",onClick:this.handleDistributionInput,style:{width:210,height:30,marginLeft:50,marginTop:10}},"\u5f00\u59cb\u914d\u8d27"))),r.a.createElement("div",{style:{marginLeft:30,marginTop:0,marginRight:30,marginBottom:0}},r.a.createElement(y.a,{style:{marginLeft:0},overlay:function(){return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.key,e.setState({currentShop4OrderList:Ue[n]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ue.map((function(e){var t="black";return e.name===n.name&&(t="red"),r.a.createElement(b.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:c},r.a.createElement(v.a,{size:"small",style:{width:160},onClick:function(e){return e.preventDefault()}},n.name,r.a.createElement(Q.a,null))),r.a.createElement(y.a,{overlay:function(){return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.key,e.setState({currentTemplate4OrderList:We[n]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},We.map((function(e){var t="black";return e.name===i.name&&(t="red"),r.a.createElement(b.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:c},r.a.createElement(v.a,{size:"small",style:{width:160,marginLeft:10},onClick:function(e){return e.preventDefault()}},i.name,r.a.createElement(Q.a,null))),r.a.createElement(y.a,{overlay:function(){return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.key,e.setState({currentOrderTimeType:Ve[n]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ve.map((function(e){var t="black";return e.name===o.name&&(t="red"),r.a.createElement(b.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:c},r.a.createElement(v.a,{size:"small",style:{width:120,marginLeft:10},onClick:function(e){return e.preventDefault()}},o.name,r.a.createElement(Q.a,null))),r.a.createElement("span",null,"=>"),r.a.createElement(He,{open:m,onOpenChange:function(t){e.setState({timePickerOpen4OrderList:t})},style:{marginLeft:0},size:"small",locale:ee.a,bordered:!0,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,disabled:c,value:[ae()(d,"YYYY-MM-DD+HH:mm:ss"),ae()(u,"YYYY-MM-DD+HH:mm:ss")],defaultValue:[ae()(d,"YYYY-MM-DD+HH:mm:ss"),ae()(u,"YYYY-MM-DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ae()("00:00:00","HH:mm:ss"),ae()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!0,showMinute:!0,showSecond:!0},onOk:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length>=2&&a[0]&&a[1])){t.next=5;break}if(!(a[0]>a[1])){t.next=4;break}return g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u65f6\u95f4"),t.abrupt("return");case 4:e.setState({beginDateTime4OrderList:a[0],endDateTime4OrderList:a[1]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),renderExtraFooter:function(){return r.a.createElement("span",null,r.a.createElement(v.a,{size:"small",type:"primary",onClick:function(t){var a=ae()().subtract(1,"day").startOf("day"),n=ae()().subtract(1,"day").endOf("day");e.setState({beginDateTime4OrderList:a,endDateTime4OrderList:n,timePickerOpen4OrderList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))))}},"\u6628\u5929"),r.a.createElement(v.a,{style:{marginLeft:10},size:"small",type:"primary",onClick:function(t){var a=ae()().startOf("day"),n=ae()().endOf("day");e.setState({beginDateTime4OrderList:a,endDateTime4OrderList:n,timePickerOpen4OrderList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))))}},"\u4eca\u5929"),r.a.createElement(v.a,{style:{marginLeft:10},size:"small",type:"primary",onClick:function(t){var a=ae()().add(1,"day").startOf("day"),n=ae()().add(1,"day").endOf("day");e.setState({beginDateTime4OrderList:a,endDateTime4OrderList:n,timePickerOpen4OrderList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)}))))}},"\u660e\u5929"))}}),r.a.createElement("span",{style:{marginLeft:5,marginRight:5,color:"red",fontSize:15}},this.getDayTip(d,u)),r.a.createElement(v.a,{style:{width:180,marginLeft:10},type:"primary",disabled:c,onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrderList();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"\u67e5\u8be2\u8ba2\u8d27\u5355"),r.a.createElement(Ye.a,{style:{marginTop:10},size:"small",loading:c,dataSource:a,columns:q,rowSelection:Y,pagination:!1,bordered:!0,scroll:{y:150,scrollToFirstRowOnChange:!0},footer:function(){return r.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171".concat(a.length,"\u9879"))}})),r.a.createElement("div",{style:{marginLeft:30,marginTop:10,marginRight:30,marginBottom:30}},r.a.createElement(y.a,{style:{marginLeft:0},overlay:function(){return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.key,e.setState({currentShop4FlowList:Ue[n]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ue.map((function(e){var t="black";return e.name===E.name&&(t="red"),r.a.createElement(b.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:x},r.a.createElement(v.a,{size:"small",style:{width:160},onClick:function(e){return e.preventDefault()}},E.name,r.a.createElement(Q.a,null))),r.a.createElement(y.a,{overlay:function(){return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.key,e.setState({currentFlowType:Je[n]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Je.map((function(e){var t="black";return e.name===w.name&&(t="red"),r.a.createElement(b.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:x},r.a.createElement(v.a,{size:"small",style:{width:160,marginLeft:10},onClick:function(e){return e.preventDefault()}},w.name,r.a.createElement(Q.a,null))),r.a.createElement(He,{open:I,onOpenChange:function(t){e.setState({timePickerOpen4FlowList:t})},style:{marginLeft:10},size:"small",locale:ee.a,bordered:!0,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],inputReadOnly:!0,disabled:x,value:[ae()(T,"YYYY-MM-DD+HH:mm:ss"),ae()(S,"YYYY-MM-DD+HH:mm:ss")],defaultValue:[ae()(T,"YYYY-MM-DD+HH:mm:ss"),ae()(S,"YYYY-MM-DD+HH:mm:ss")],showTime:{hideDisabledOptions:!0,defaultValue:[ae()("00:00:00","HH:mm:ss"),ae()("23:59:59","HH:mm:ss")],showTime:!0,showHour:!0,showMinute:!0,showSecond:!0},onOk:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length>=2&&a[0]&&a[1])){t.next=5;break}if(!(a[0]>a[1])){t.next=4;break}return g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u65f6\u95f4"),t.abrupt("return");case 4:e.setState({beginDateTime4FlowList:a[0],endDateTime4FlowList:a[1]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),renderExtraFooter:function(){return r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(v.a,{size:"small",type:"primary",onClick:function(t){var a=ae()().subtract(1,"day").startOf("day"),n=ae()().subtract(1,"day").endOf("day");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"\u6628\u5929"),r.a.createElement(v.a,{style:{marginLeft:10},size:"small",type:"primary",onClick:function(t){var a=ae()().startOf("day"),n=ae()().endOf("day");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"\u4eca\u5929"),r.a.createElement(v.a,{style:{marginLeft:10},size:"small",type:"primary",onClick:function(t){var a=ae()().month(ae()().month()-1).startOf("month"),n=ae()().month(ae()().month()-1).endOf("month");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"\u4e0a\u6708")),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",null,"\u672c\u6708"),r.a.createElement(v.a,{style:{marginLeft:5},size:"small",type:"primary",onClick:function(t){var a=ae()().startOf("month"),n=ae()().startOf("month").add(9,"days").endOf("day");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"1~10"),r.a.createElement(v.a,{style:{marginLeft:5},size:"small",type:"primary",onClick:function(t){var a=ae()().startOf("month").add(10,"days"),n=ae()().startOf("month").add(19,"days").endOf("day");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"11~20"),r.a.createElement(v.a,{style:{marginLeft:5},size:"small",type:"primary",onClick:function(t){var a=ae()().startOf("month").add(20,"days"),n=ae()().endOf("month");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"21~\u6708\u5e95")),r.a.createElement("div",null,r.a.createElement("span",null,"\u4e0a\u6708"),r.a.createElement(v.a,{style:{marginLeft:5},size:"small",type:"primary",onClick:function(t){var a=ae()().subtract(1,"months").startOf("month"),n=ae()().subtract(1,"months").startOf("month").add(9,"days").endOf("day");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"1~10"),r.a.createElement(v.a,{style:{marginLeft:5},size:"small",type:"primary",onClick:function(t){var a=ae()().subtract(1,"months").startOf("month").add(10,"days"),n=ae()().subtract(1,"months").startOf("month").add(19,"days").endOf("day");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"11~20"),r.a.createElement(v.a,{style:{marginLeft:5},size:"small",type:"primary",onClick:function(t){var a=ae()().subtract(1,"months").startOf("month").add(20,"days"),n=ae()().subtract(1,"months").endOf("month");e.setState({beginDateTime4FlowList:a,endDateTime4FlowList:n,timePickerOpen4FlowList:!1},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)}))))}},"21~\u6708\u5e95"))))}}),r.a.createElement("span",{style:{marginLeft:5,marginRight:5,color:"red",fontSize:15}},this.getDayTip(T,S)),r.a.createElement(v.a,{style:{width:180,marginLeft:10},type:"primary",disabled:x,onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchFlowList();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"\u67e5\u8be2\u8d27\u6d41\u5355"),j.length>0?r.a.createElement(v.a,{style:{marginLeft:10},danger:!0},"\u5f2f\u9ea6(\u603b\u90e8)\uff1a\u5e8f\u53f7\u3010".concat(j,"\u3011\u8c03\u8d27\u5355\u8981\u5904\u7406")):r.a.createElement("div",null),r.a.createElement(Ye.a,{style:{marginTop:10},size:"small",loading:x,dataSource:k,columns:J,pagination:!1,bordered:!0,scroll:{y:160,scrollToFirstRowOnChange:!0},footer:function(){return r.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},r.a.createElement("span",null,"\u603b\u5171 ".concat(k.length," \u9879")),M.length>0?r.a.createElement(v.a,{size:"small",danger:!0,style:{marginLeft:10,fontSize:13,color:"red"}},"\u5e8f\u53f7\u3010".concat(M,"\u3011\u8c03\u8d27\u5355\u672a\u5904\u7406")):r.a.createElement("span",null))}})),r.a.createElement(xe.a,{width:1e3,centered:!0,keyboard:!0,maskClosable:!1,title:r.a.createElement("div",null,r.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentOrderShopName),r.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentOrderTime)),visible:F,okText:"\u77e5\u9053\u4e86",cancelButtonProps:{hidden:!0},onOk:function(){e.setState({orderDetailModalVisible:!1})},onCancel:function(){e.setState({orderDetailModalVisible:!1})}},r.a.createElement(Ye.a,{style:{marginTop:10},size:"small",loading:_,dataSource:A,columns:X,pagination:!1,bordered:!0,scroll:{y:400,scrollToFirstRowOnChange:!0},footer:function(){return r.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171 ".concat(A.length," \u9879"))}})),r.a.createElement(xe.a,{width:1e3,centered:!0,keyboard:!0,maskClosable:!1,title:r.a.createElement("div",null,r.a.createElement("div",{style:{color:"green",fontSize:10}},"-"!==this._currentTransferFrom?"".concat(this._currentTransferFrom,"=>").concat(this._currentTransferTo):"".concat(this._currentTransferTo)),r.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentFlowDetailStatus[0]),r.a.createElement("div",{style:{color:"gray",fontSize:8}},this._currentFlowDetailStatus[1])),visible:D,onCancel:function(){e.setState({flowDetailModalVisible:!1})},footer:Z?r.a.createElement("div",{style:{marginRight:10,marginBottom:20,marginTop:20}},r.a.createElement(Fe.b,null,r.a.createElement(v.a,{key:"refuse",type:"primary",danger:!0,disabled:L,onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._currentFlowRefuseText,e._currentFlowRefuseText="\u53d1\u9001\u4e2d",e.setState({refuseFlowLoading:!0}),t.next=5,N(e._currentFlowId);case 5:if(!(r=t.sent)||0!==r.errCode){t.next=14;break}return e._currentFlowRefuseText="",e._currentFlowDetailStatus[1]="\u5df2\u62d2\u7edd\u6536\u8d27",g.b.success("\u62d2\u7edd\u6536\u8d27\u6210\u529f~"),t.next=12,e.fetchFlowList();case 12:t.next=16;break;case 14:e._currentFlowRefuseText=n,g.b.error("\u62d2\u7edd\u6536\u8d27\u5931\u8d25~");case 16:e.setState({refuseFlowLoading:!1});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},this._currentFlowRefuseText),r.a.createElement(v.a,{key:"confirm",type:"primary",danger:!0,disabled:P,onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._currentFlowConfirmText,e._currentFlowConfirmText="\u53d1\u9001\u4e2d",e.setState({confirmFlowLoading:!0}),t.next=5,z(e._currentFlowId);case 5:if(!(r=t.sent)||0!==r.errCode){t.next=14;break}return e._currentFlowConfirmText="",e._currentFlowDetailStatus[1]="\u5df2\u5b8c\u6210\u6536\u8d27",g.b.success("\u786e\u8ba4\u6536\u8d27\u6210\u529f~"),t.next=12,e.fetchFlowList();case 12:t.next=16;break;case 14:e._currentFlowConfirmText=n,g.b.error("\u786e\u8ba4\u6536\u8d27\u5931\u8d25~");case 16:e.setState({confirmFlowLoading:!1});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},this._currentFlowConfirmText))):r.a.createElement("div",null)},r.a.createElement(Ye.a,{style:{marginTop:10},size:"small",loading:C,dataSource:O,columns:G,pagination:!1,bordered:!0,scroll:{y:400,scrollToFirstRowOnChange:!0},footer:function(){return r.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171 ".concat(O.length," \u9879"))}})))}}]),a}(r.a.Component),Xe=a(56),Ze={"1595310806940367327":[],"1595397637628133418":[],"1595077654714716554":[],"1595077405589137749":[],"1649149816769757925":[]},$e=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=Ze[t]).length>0)){e.next=3;break}return e.abrupt("return",{errCode:0,list:a});case 3:return e.next=5,C(t);case 5:if(!(0===(n=e.sent).errCode&&n.list.length>0)){e.next=9;break}return Ze[t]=n.list,e.abrupt("return",n);case 9:return e.abrupt("return",{errCode:-1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=a(96),et={"187-2006251756022":1,"187-2006291720144":2,"187-2007261431428":3,"187-2006261548488":4,"187-2006251720443":5,"187-2007171555580":6,"182-2106241432414":1,"182-2106281603003":2,"182-2106281600071":3,"182-2106281603355":4,"182-2106241433091":5,"182-2106281601535":6,"182-2010291510063":7},tt=["\u5e38\u6e29\u7c7b","\u9910\u5305\u7c7b","\u5410\u53f8\u7c7b"],at=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.query,(a=t&&t.get("param"))&&(a=unescape(a),r=JSON.parse(a),n._template=r.template,n._shop=r.shop,n._beginDateTime=r.beginDateTime,n._timeType=r.timeType,n._endDateTime=r.endDateTime,n._orderList=r.orderList,n.refresh());case 3:case"end":return e.stop()}}),e)}))),n.refresh=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({productSpinning:!0,productSpinTipText:"\u51c6\u5907\u6253\u5370..."},Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u,m,p,f,h,y,b,v,E,k,x,w,T,S,I,D,C,L,P,N,z,j,M,A,_,F,Y,R,B,H,U,W,V,K,q,J,G,X,Z,$,Q,ee,te,ae,ne,re,ie,oe,ce;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n.setState({productSpinTipText:"\u51c6\u5907\u83b7\u53d6..."}),a=0;case 3:if(!(a<n._orderList.length)){e.next=59;break}if(!(r=n._orderList[a])){e.next=56;break}return n.setState({productSpinTipText:"\u83b7\u53d6"+r.orderShop+"..."}),e.next=9,O(r.orderId);case 9:if(0!==(i=e.sent).errCode||!i.items){e.next=53;break}o=!1,c=void 0,c=0;case 14:if(!(c<t.length)){e.next=21;break}if(t[c].orderShop!==r.orderShop||t[c].templateName!==r.templateName){e.next=18;break}return o=!0,e.abrupt("break",21);case 18:++c,e.next=14;break;case 21:if(!o){e.next=43;break}s=t[c].items,d=i.items,u=0;case 25:if(!(u<d.length)){e.next=41;break}m=d[u],p=-1,f=0;case 29:if(!(f<s.length)){e.next=37;break}if(s[f].barcode!==m.barcode){e.next=34;break}return p=f,e.abrupt("break",37);case 34:++f,e.next=29;break;case 37:-1!==p?(h=s[p].orderNumber+m.orderNumber,s[p].orderNumber=h):(y=Object(Xe.a)({},m),s.push(y));case 38:++u,e.next=25;break;case 41:e.next=51;break;case 43:for((b={}).orderShop=r.orderShop,b.templateName=r.templateName,b.expectTime=r.expectTime,b.orderTime=r.orderTime,b.items=i.items,v=0;v<i.items.length;++v)E=n._template.templateId+"-"+i.items[v].barcode,k=et[E],i.items[v].sortId=k||200;t.push(b);case 51:e.next=56;break;case 53:return t=[],g.b.error("\u83b7\u53d6<"+r.orderShop+">\u8ba2\u8d27\u4ea7\u54c1\u51fa\u9519\uff0c\u8bf7\u68c0\u67e5\uff01"),e.abrupt("break",59);case 56:++a,e.next=3;break;case 59:n.setState({productSpinTipText:"\u5408\u5e76\u81f3\u751f\u4ea7\u8f66\u95f4..."}),(x={}).orderShop="000 - \u5f2f\u9ea6(\u751f\u4ea7\u8f66\u95f4)",x.templateName=n._template.name,t&&t.length>0&&(x.expectTime=t[0].expectTime,x.orderTime=t[0].orderTime),w=[],T=0;case 66:if(!(T<t.length)){e.next=88;break}S=t[T].items,I=0;case 69:if(!(I<S.length)){e.next=85;break}D=S[I],C=D.barcode,L=-1,P=0;case 74:if(!(P<w.length)){e.next=81;break}if(w[P].barcode!==C){e.next=78;break}return L=P,e.abrupt("break",81);case 78:++P,e.next=74;break;case 81:-1!==L?(N=w[L].orderNumber+D.orderNumber,w[L].orderNumber=N):(z=Object(Xe.a)({},D),w.push(z));case 82:++I,e.next=69;break;case 85:++T,e.next=66;break;case 88:return j=w,e.next=91,$e(n._template.templateUid);case 91:if(!(0===(M=e.sent).errCode&&M.list.length>0)){e.next=112;break}A=M.list,j=[],_=0;case 96:if(!(_<A.length)){e.next=112;break}F=-1,Y=0;case 99:if(!(Y<w.length)){e.next=106;break}if(A[_].barcode!==w[Y].barcode){e.next=103;break}return F=Y,e.abrupt("break",106);case 103:++Y,e.next=99;break;case 106:R={},-1!==F?(R.categoryName=w[F].categoryName,R.orderProductName=w[F].orderProductName,R.barcode=w[F].barcode,R.barcodeSimple=w[F].barcodeSimple,R.sortId=w[F].sortId,R.orderNumber=w[F].orderNumber):(R.categoryName=A[_].categoryName,R.orderProductName=A[_].name,R.barcode=A[_].barcode,R.barcodeSimple=A[_].barcodeSimple,B=n._template.templateId+"-"+R.barcode,H=et[B],R.sortId=H||200,R.orderNumber=0),j.push(R);case 109:++_,e.next=96;break;case 112:U=[],W=0;case 114:if(!(W<j.length)){e.next=129;break}V=j[W],K=-1,q=U.length-1;case 118:if(!(q>=0)){e.next=125;break}if(U[q].categoryName!==V.categoryName){e.next=122;break}return K=q,e.abrupt("break",125);case 122:--q,e.next=118;break;case 125:-1!==K?U.splice(K+1,0,V):U.push(V);case 126:++W,e.next=114;break;case 129:U=U.sort((function(e,t){return e.sortId-t.sortId})),x.items=U,t.unshift(x),J=[],G=0;case 134:if(!(G<t.length)){e.next=175;break}if("000 - \u5f2f\u9ea6(\u751f\u4ea7\u8f66\u95f4)"!==(X=t[G]).orderShop){e.next=139;break}return J.push(X),e.abrupt("continue",172);case 139:if(-1===tt.indexOf(X.templateName)){e.next=141;break}return e.abrupt("continue",172);case 141:(Z={}).orderShop=X.orderShop,Z.templateName=X.templateName,Z.expectTime=X.expectTime,Z.orderTime=X.orderTime,Z.items=[],$=0;case 148:if(!($<x.items.length)){e.next=171;break}if(!(Q=x.items[$])){e.next=168;break}(ee={}).categoryName=Q.categoryName,ee.orderProductName=Q.orderProductName,ee.barcode=Q.barcode,ee.barcodeSimple=Q.barcodeSimple,ee.sortId=Q.sortId,ee.orderNumber=0,te=0;case 159:if(!(te<X.items.length)){e.next=167;break}if(ae=X.items[te],ee.barcode!==ae.barcode){e.next=164;break}return ee.orderNumber=ae.orderNumber,e.abrupt("break",167);case 164:++te,e.next=159;break;case 167:Z.items.push(ee);case 168:++$,e.next=148;break;case 171:J.push(Z);case 172:++G,e.next=134;break;case 175:for(ne=[],re=0;re<J.length;++re)for(ie=J[re].items,oe=0;oe<ie.length;++oe)oe%29===0&&((ce={}).orderShop=J[re].orderShop,ce.templateName=J[re].templateName,ce.expectTime=J[re].expectTime,ce.orderTime=J[re].orderTime,ce.items=[],ne.push(ce)),ne[ne.length-1].items.push(ie[oe]);n.setState({productSpinning:!1,productSpinTipText:"",allProductionDataToBePrint:ne});case 178:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),n.getLodopAfterInit=function(){var e=Object(Qe.getLodop)();if(e){e.PRINT_INIT("react\u4f7f\u7528\u6253\u5370\u63d2\u4ef6CLodop");e.SET_PRINTER_INDEX(Be(e)),e.SET_PRINT_PAGESIZE(2,0,0,"\u9488\u6253\u4e09\u7b49\u5206"),e.SET_PREVIEW_WINDOW(0,0,0,800,600,""),e.SET_SHOW_MODE("LANDSCAPE_DEFROTATED",1),e.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),e.ADD_PRINT_HTM(0,0,"100%","100%","<style>\n                </style> "+document.getElementById("printDiv").innerHTML)}return e},n.productPrintPreprew=function(){var e=n.getLodopAfterInit();e&&e.PREVIEW()},n.productPrintDirect=function(){var e=n.getLodopAfterInit();e&&e.PRINT()},n.productPrintDirectAndBack=function(){n.productPrintDirect(),n.handleBack()},n.handleBack=function(e){var t={};t.template=n._template,t.timeType=n._timeType,t.shop=n._shop,t.beginDateTime=n._beginDateTime,t.endDateTime=n._endDateTime;var a=JSON.stringify(t),r="http://localhost:4000/orderManagement";r="http://gratefulwheat.ruyue.xyz/orderManagement",r+="?",r+="param="+escape(a),window.location.replace(r)},n.state={productSpinTipText:"\u6253\u5370\u751f\u4ea7\u5355",productSpinning:!1,allProductionDataToBePrint:[]},n._orderList=void 0,n._template=void 0,n._shop=void 0,n._beginDateTime=void 0,n._timeType=void 0,n._endDateTime=void 0,n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.allProductionDataToBePrint,n=t.productSpinTipText,i=t.productSpinning;return r.a.createElement(k.a,{tip:n,spinning:i,size:"large"},r.a.createElement("div",null,r.a.createElement("div",{style:{marginLeft:10,marginTop:10}},r.a.createElement("div",{id:"printConfig",style:{float:"left",borderStyle:"none",width:90}},r.a.createElement("div",null,r.a.createElement(v.a,{type:"primary",style:{width:90,height:80},onClick:function(t){return e.handleBack(t)}},r.a.createElement("div",{style:{fontSize:16}},"\u540e\u9000"))),r.a.createElement(v.a,{type:"primary",style:{marginTop:10,width:90,height:80},onClick:this.productPrintPreprew},r.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u6253\u5370\u9884\u89c8")),r.a.createElement(v.a,{type:"primary",danger:!0,style:{marginTop:10,width:90,height:80},onClick:this.productPrintDirectAndBack},r.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u76f4\u63a5\u6253\u5370"))),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("span",{style:{marginLeft:10,fontSize:12,color:"green"}},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(a&&a.length>0&&a[0].orderTime)),r.a.createElement("span",{style:{marginLeft:20,fontSize:12,color:"green"}},"\u671f\u671b\u5230\u8d27\uff1a".concat(a&&a.length>0&&a[0].expectTime)),r.a.createElement("div",{id:"printDiv",style:{marginLeft:10,borderStyle:"dotted",width:420,height:980}},r.a.createElement("div",{id:"printTable",style:{marginTop:0,marginLeft:0,width:410,height:949,backgroundColor:"transparent"}},a.map((function(e){var t=e.items,n=a.indexOf(e);return r.a.createElement("div",{key:n,style:{float:"left",zIndex:10,backgroundColor:"transparent",marginTop:10,height:949}},r.a.createElement("div",{style:{float:"left",marginLeft:0,width:38,height:949,backgroundColor:"transparent"}}),r.a.createElement("table",{border:"1",cellSpacing:"0",style:{float:"left",borderCollapse:"collapse"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2",style:{width:318,textAlign:"center",backgroundColor:"lightyellow"}},e.orderShop)),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2",style:{textAlign:"center"}},e.templateName)),r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u54c1\u540d"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u8ba2\u8d27\u91cf"))),r.a.createElement("tbody",null,t.map((function(e){var a=t.indexOf(e)+1,n=e.orderNumber>1e3?"red":"transparent";return r.a.createElement("tr",{key:a},r.a.createElement("th",{key:"1",style:{height:20,textAlign:"center",fontSize:16}},e.orderProductName),r.a.createElement("th",{key:"2",style:{height:20,textAlign:"center",fontWeight:"lighter",fontSize:20,backgroundColor:n}},0!==e.orderNumber?e.orderNumber:""))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(e.orderTime))),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"\u671f\u671b\u5230\u8d27\uff1a".concat(e.expectTime))))),r.a.createElement("div",{style:{float:"left",marginLeft:0,width:38,height:949,backgroundColor:"transparent"}}))}))))))))}}]),a}(r.a.Component),nt=[{index:0,name:"\u5168\u90e8\u6a21\u677f",templateId:"",templateUid:""},{index:1,name:"\u73b0\u70e4\u7c7b",templateId:"187",templateUid:"1595310806940367327"},{index:2,name:"\u897f\u70b9\u7c7b",templateId:"189",templateUid:"1595397637628133418"},{index:3,name:"\u5e38\u6e29\u7c7b",templateId:"183",templateUid:"1595077654714716554"},{index:4,name:"\u9910\u5305\u7c7b",templateId:"182",templateUid:"1595077405589137749"},{index:5,name:"\u5410\u53f8\u7c7b",templateId:"2873",templateUid:"1649149816769757925"}],rt={"187-2006251756022":1,"187-2006291720144":2,"187-2007261431428":3,"187-2006261548488":4,"187-2006251720443":5,"187-2007171555580":6,"182-2106241432414":1,"182-2106281603003":2,"182-2106281600071":3,"182-2106281603355":4,"182-2106241433091":5,"182-2106281601535":6,"182-2010291510063":7},it={"\u73b0\u70e4\u7c7b":1,"\u897f\u70b9\u7c7b":2,"\u5e38\u6e29\u7c7b":3,"\u9910\u5305\u7c7b":4,"\u5410\u53f8\u7c7b":5},ot=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.query,(a=t&&t.get("param"))&&(a=unescape(a),r=JSON.parse(a),n._template=r.template,n._timeType=r.timeType,n._shop=r.shop,n._beginDateTime=r.beginDateTime,n._endDateTime=r.endDateTime,n._orderList=r.orderList,n.refresh());case 3:case"end":return e.stop()}}),e)}))),n.refresh=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({productSpinning:!0,productSpinTipText:"\u51c6\u5907\u6253\u5370..."},Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u,m,p,f,h,y,b,v,E,k,x,w,T,S,I,D,C,L,P,N,z,j,M,A,_,F,Y,R,B,H,U,W,V,K,q,J,G,X,Z,$;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n.setState({productSpinTipText:"\u51c6\u5907\u83b7\u53d6..."}),a=0;case 3:if(!(a<n._orderList.length)){e.next=70;break}if(!(r=n._orderList[a])){e.next=67;break}return n.setState({productSpinTipText:"\u83b7\u53d6"+r.templateName+"..."}),e.next=9,O(r.orderId);case 9:if(0!==(i=e.sent).errCode||!i.items){e.next=64;break}o=-1,c=0;case 13:if(!(c<nt.length)){e.next=20;break}if(nt[c].name!==r.templateName){e.next=17;break}return o=c,e.abrupt("break",20);case 17:++c,e.next=13;break;case 20:if(-1!==o){e.next=22;break}return e.abrupt("return");case 22:s=!1,d=void 0,d=0;case 25:if(!(d<t.length)){e.next=32;break}if(t[d].orderShop!==r.orderShop||t[d].templateName!==r.templateName){e.next=29;break}return s=!0,e.abrupt("break",32);case 29:++d,e.next=25;break;case 32:if(!s){e.next=54;break}u=t[d].items,m=i.items,p=0;case 36:if(!(p<m.length)){e.next=52;break}f=m[p],h=-1,y=0;case 40:if(!(y<u.length)){e.next=48;break}if(u[y].barcode!==f.barcode){e.next=45;break}return h=y,e.abrupt("break",48);case 45:++y,e.next=40;break;case 48:-1!==h?(b=u[h].orderNumber+f.orderNumber,u[h].orderNumber=b):((v={}).categoryName=f.categoryName,v.orderProductName=f.orderProductName,v.barcode=f.barcode,v.barcodeSimple=f.barcodeSimple,v.barcodeMiddle=f.barcodeMiddle,v.orderNumber=f.orderNumber,v.sortId=f.sortId,u.push(v));case 49:++p,e.next=36;break;case 52:e.next=62;break;case 54:for((E={}).orderShop=r.orderShop,E.templateName=r.templateName,E.expectTime=r.expectTime,E.orderTime=r.orderTime,E.items=i.items,k=0;k<i.items.length;++k)x=nt[o].templateId+"-"+i.items[k].barcode,w=rt[x],i.items[k].sortId=w||200;t.push(E);case 62:e.next=67;break;case 64:return t=[],g.b.error("\u83b7\u53d6<"+r.orderShop+">\u8ba2\u8d27\u4ea7\u54c1\u51fa\u9519\uff0c\u8bf7\u68c0\u67e5\uff01"),e.abrupt("break",70);case 67:++a,e.next=3;break;case 70:n.setState({productSpinTipText:"\u6574\u7406\u6a21\u677f\u4e2d..."}),T=[],S=0;case 73:if(!(S<t.length)){e.next=138;break}I=t[S].items,D=I,C=-1,L=0;case 78:if(!(L<nt.length)){e.next=85;break}if(nt[L].name!==t[S].templateName){e.next=82;break}return C=L,e.abrupt("break",85);case 82:++L,e.next=78;break;case 85:if(-1!==C){e.next=87;break}return e.abrupt("return");case 87:return e.next=89,$e(nt[C].templateUid);case 89:if(!(0===(P=e.sent).errCode&&P.list.length>0)){e.next=135;break}N=P.list,D=[],z=0;case 94:if(!(z<N.length)){e.next=110;break}j=-1,M=0;case 97:if(!(M<I.length)){e.next=104;break}if(N[z].barcode!==I[M].barcode){e.next=101;break}return j=M,e.abrupt("break",104);case 101:++M,e.next=97;break;case 104:A={},-1!==j?(A.categoryName=I[j].categoryName,A.orderProductName=I[j].orderProductName,A.barcode=I[j].barcode,A.barcodeSimple=I[j].barcodeSimple,A.barcodeMiddle=I[j].barcodeMiddle,A.sortId=I[j].sortId,A.orderNumber=I[j].orderNumber):(A.categoryName=N[z].categoryName,A.orderProductName=N[z].name,A.barcode=N[z].barcode,A.barcodeSimple=N[z].barcodeSimple,A.barcodeMiddle=N[z].barcodeMiddle,_=nt[C].templateId+"-"+N[z].barcode,F=rt[_],A.sortId=F||200,A.orderNumber=0),D.push(A);case 107:++z,e.next=94;break;case 110:Y=[],R=0;case 112:if(!(R<D.length)){e.next=127;break}B=D[R],H=-1,U=Y.length-1;case 116:if(!(U>=0)){e.next=123;break}if(Y[U].categoryName!==B.categoryName){e.next=120;break}return H=U,e.abrupt("break",123);case 120:--U,e.next=116;break;case 123:-1!==H?Y.splice(H+1,0,B):Y.push(B);case 124:++R,e.next=112;break;case 127:Y=Y.sort((function(e,t){return e.sortId-t.sortId})),(W={}).orderShop=t[S].orderShop,W.templateName=t[S].templateName,W.expectTime=t[S].expectTime,W.orderTime=t[S].orderTime,W.items=Y,T.push(W);case 135:++S,e.next=73;break;case 138:for(n.setState({productSpinTipText:"\u6392\u5e8f\u4e2d..."}),V=[],K=0;K<T.length;++K)(q=T[K]).sortId=it[q.templateName],V.push(q);for(V=V.sort((function(e,t){return e.sortId-t.sortId})),n.setState({productSpinTipText:"\u6574\u7406A4\u4e2d..."}),J=[],G=0;G<V.length;++G)for(X=V[G].items,Z=0;Z<X.length;++Z)Z%29===0&&(($={}).orderShop=V[G].orderShop,$.templateName=V[G].templateName,$.expectTime=V[G].expectTime,$.orderTime=V[G].orderTime,$.items=[],J.push($)),J[J.length-1].items.push(X[Z]);n.setState({productSpinning:!1,productSpinTipText:"",allDistributionDataToBePrint:J});case 146:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),n.getLodopAfterInit=function(){var e=Object(Qe.getLodop)();if(e){e.PRINT_INIT("react\u4f7f\u7528\u6253\u5370\u63d2\u4ef6CLodop");e.SET_PRINTER_INDEX(Re(e)),e.SET_PRINT_PAGESIZE(2,0,0,"A4"),e.SET_PREVIEW_WINDOW(0,0,0,800,600,""),e.SET_SHOW_MODE("LANDSCAPE_DEFROTATED",1),e.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),e.ADD_PRINT_HTM(0,0,"100%","100%","<style>\n                </style> "+document.getElementById("printDiv").innerHTML)}return e},n.productPrintPreprew=function(){var e=n.getLodopAfterInit();e&&e.PREVIEW()},n.productPrintDirect=function(){var e=n.getLodopAfterInit();e&&e.PRINT()},n.productPrintDirectAndBack=function(){n.productPrintDirect(),n.handleBack()},n.handleBack=function(e){var t={};t.template=n._template,t.timeType=n._timeType,t.shop=n._shop,t.beginDateTime=n._beginDateTime,t.endDateTime=n._endDateTime;var a=JSON.stringify(t),r="http://localhost:4000/orderManagement";r="http://gratefulwheat.ruyue.xyz/orderManagement",r+="?",r+="param="+escape(a),window.location.replace(r)},n.state={allDistributionDataToBePrint:[],productSpinTipText:"",productSpinning:!1},n._template=void 0,n._timeType=void 0,n._shop=void 0,n._beginDateTime=void 0,n._endDateTime=void 0,n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.allDistributionDataToBePrint,n=t.productSpinTipText,i=t.productSpinning;return r.a.createElement(k.a,{tip:n,spinning:i,size:"large"},r.a.createElement("div",null,r.a.createElement("div",{style:{marginLeft:10,marginTop:10}},r.a.createElement("div",{id:"printConfig",style:{float:"left",borderStyle:"none",width:90}},r.a.createElement("div",null,r.a.createElement(v.a,{type:"primary",style:{width:90,height:80},onClick:function(t){return e.handleBack(t)}},r.a.createElement("div",{style:{fontSize:16}},"\u540e\u9000"))),r.a.createElement(v.a,{type:"primary",style:{marginTop:10,width:90,height:80},onClick:this.productPrintPreprew},r.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u6253\u5370\u9884\u89c8")),r.a.createElement(v.a,{type:"primary",danger:!0,style:{marginTop:10,width:90,height:80},onClick:this.productPrintDirectAndBack},r.a.createElement("div",{style:{fontWeight:"bold",fontSize:16,textDecoration:"underline"}},"\u76f4\u63a5\u6253\u5370"))),r.a.createElement("div",{style:{float:"left"}},r.a.createElement("span",{style:{marginLeft:10,fontSize:12,color:"green"}},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(a&&a.length>0&&a[0].orderTime)),r.a.createElement("span",{style:{marginLeft:20,fontSize:12,color:"green"}},"\u671f\u671b\u5230\u8d27\uff1a".concat(a&&a.length>0&&a[0].expectTime)),r.a.createElement("div",{id:"printDiv",style:{marginLeft:10,borderStyle:"dotted",width:1379,height:968}},r.a.createElement("div",{id:"printTable",style:{marginTop:0,marginLeft:28,width:1375,height:964,backgroundColor:"transparent"}},a.map((function(e){var t=e.items,n=a.indexOf(e);return r.a.createElement("div",{key:n,style:{float:"left",zIndex:10,backgroundColor:"transparent",marginTop:44,height:920}},r.a.createElement("div",{style:{float:"left",marginLeft:0,width:2,height:920}}),r.a.createElement("table",{border:"1",cellSpacing:"0",style:{float:"left",borderCollapse:"collapse"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"7",style:{width:175,textAlign:"center",backgroundColor:"lightgrey"}},e.orderShop)),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"7",style:{width:175,textAlign:"center"}},e.templateName)),r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"center",fontSize:14}},"\u7b80\u7801"),r.a.createElement("th",{style:{textAlign:"center"}},"\u54c1\u540d"),r.a.createElement("th",{style:{textAlign:"center",fontSize:10}},"\u8ba2\u8d27\u91cf"),r.a.createElement("th",{style:{textAlign:"center"}},"\u4e00"),r.a.createElement("th",{style:{textAlign:"center"}},"\u4e8c"))),r.a.createElement("tbody",null,t.map((function(a){var n=t.indexOf(a)+1,i=a.orderNumber>1e3?"red":"transparent";return r.a.createElement("tr",{key:n,style:{height:24}},"001 - \u5f2f\u9ea6(\u6559\u80b2\u5c40\u5e97)"===e.orderShop?r.a.createElement("th",{key:"1",style:{textAlign:"center",fontSize:16,width:16}},a.barcodeMiddle):r.a.createElement("th",{key:"1",style:{textAlign:"center",fontSize:16,width:16}},a.barcodeSimple),r.a.createElement("th",{key:"2",style:{textAlign:"center",fontSize:15,width:125}},a.orderProductName),r.a.createElement("th",{key:"3",style:{textAlign:"center",fontSize:16,width:8,backgroundColor:i}},0!==a.orderNumber?a.orderNumber:""),r.a.createElement("th",{key:"4",style:{textAlign:"center",fontSize:16,width:8}}),r.a.createElement("th",{key:"5",style:{textAlign:"center",fontSize:16,width:8}}))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"7",style:{fontSize:14}},"\u8ba2\u8d27\u65f6\u95f4\uff1a".concat(e.orderTime))),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"7",style:{fontSize:14}},"\u671f\u671b\u5230\u8d27\uff1a".concat(e.expectTime))))),r.a.createElement("div",{style:{float:"left",marginLeft:0,width:2,height:920}}))}))))))))}}]),a}(r.a.Component),ct=a(67),lt=a(211),st=a(139),dt=a(416),ut=a(423),mt=a(238),pt=a.n(mt),ft=a(119),ht=a(86),gt=a.n(ht),yt=f.a.Search,bt=[{index:0,name:"\u5168\u90e8\u6a21\u677f",templateId:"",templateUid:""},{index:1,name:"\u73b0\u70e4\u7c7b",templateId:"187",templateUid:"1595310806940367327"},{index:2,name:"\u897f\u70b9\u7c7b",templateId:"189",templateUid:"1595397637628133418"},{index:3,name:"\u5e38\u6e29\u7c7b",templateId:"183",templateUid:"1595077654714716554"},{index:4,name:"\u9910\u5305\u7c7b",templateId:"182",templateUid:"1595077405589137749"},{index:5,name:"\u5410\u53f8\u7c7b",templateId:"2873",templateUid:"1649149816769757925"}],vt={"187-2006251756022":1,"187-2006291720144":2,"187-2007261431428":3,"187-2006261548488":4,"187-2006251720443":5,"187-2007171555580":6,"182-2106241432414":1,"182-2106281603003":2,"182-2106281600071":3,"182-2106281603355":4,"182-2106241433091":5,"182-2106281601535":6,"182-2010291510063":7},Et=["\u5916\u8d2d\u54c1","\u5f2f\u9ea6\u8017\u6750","\u5f2f\u9ea6\u5305\u88c5","\u5f2f\u9ea6\u4f20\u7edf\u96f6\u98df","\u5f2f\u9ea6\u5c0f\u96f6\u98df","\u5f2f\u9ea6\u534a\u6210\u54c1"],kt=r.a.createContext(null),xt=function(e){e.index;var t=Object(st.a)(e,["index"]),a=dt.a.useForm(),n=Object(lt.a)(a,1)[0];return r.a.createElement(dt.a,{form:n,component:!1},r.a.createElement(kt.Provider,{value:n},r.a.createElement("tr",t)))},wt=function(e){var t=e.title,a=e.editable,i=e.children,o=e.dataIndex,c=e.record,d=e.handleEditableCellNextFocus,u=e.handleEditableCellCurrentFocus,m=e.handleEditableCellCurrentEnter,p=Object(st.a)(e,["title","editable","children","dataIndex","record","handleEditableCellNextFocus","handleEditableCellCurrentFocus","handleEditableCellCurrentEnter"]),h=i,g=Object(n.useRef)(null),y=Object(n.useContext)(kt);if(c){g&&g.current&&setTimeout((function(){c&&c.editing&&g.current&&g.current.select()}),0);var b=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:t=e.sent,a=parseInt(t[o]),c[o]=a,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:if(t=e.sent,!((a=parseInt(t[o]))>1e3||a<=0)){e.next=8;break}return new Audio(gt.a).play(),e.abrupt("return");case 8:d(),m(c,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Save failed:",e.t0),new Audio(gt.a).play();case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(c);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(a){var k=c[o];h=r.a.createElement(dt.a.Item,{style:{margin:0},name:o,rules:[{required:!0,message:"".concat(t," \u8bf7\u8f93\u5165\u6574\u6570."),pattern:/^[0-9]+$/}],initialValue:k},r.a.createElement(f.a,{id:c&&c.key,ref:g,autoComplete:"off",onChange:b,onPressEnter:v,onFocus:E}))}}return r.a.createElement("td",p,h)},Tt=r.a.createContext(null),St=function(e){e.index;var t=Object(st.a)(e,["index"]),a=dt.a.useForm(),n=Object(lt.a)(a,1)[0];return r.a.createElement(dt.a,{form:n,component:!1},r.a.createElement(Tt.Provider,{value:n},r.a.createElement("tr",t)))},It=function(e){var t=e.title,a=e.editable,i=e.children,o=e.dataIndex,c=e.record,d=e.handleEditableCellNextFocus,u=e.handleEditableCellCurrentFocus,m=e.handleEditableCellOnChangeAddOrRemove,p=Object(st.a)(e,["title","editable","children","dataIndex","record","handleEditableCellNextFocus","handleEditableCellCurrentFocus","handleEditableCellOnChangeAddOrRemove"]),h=i,g=Object(n.useRef)(null),y=Object(n.useContext)(Tt);if(c){var b=function(){g&&g.current&&setTimeout((function(){c&&c.editing&&g.current&&g.current.select()}),0)};b();var v=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:t=e.sent,a=parseFloat(t[o]),c[o]=a,e.next=22;break;case 8:if(e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0),"+"!==(n=e.t0.values[o].substring(e.t0.values[o].length-1))){e.next=20;break}if(!(c[o]>1e3||c[o]<=0)){e.next=17;break}return new Audio(gt.a).play(),b(),e.abrupt("return");case 17:r="add",e.next=21;break;case 20:"-"===n&&(r="remove");case 21:m(r,c);case 22:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:d(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Save failed:",e.t0),new Audio(gt.a).play();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(c);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=c[o];a&&(h=r.a.createElement(dt.a.Item,{style:{margin:0},name:o,rules:[{required:!0,message:"".concat(t," \u8bf7\u8f93\u5165\u6570(\u5141\u8bb8\u5305\u542b2\u4f4d\u5c0f\u6570)."),pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{0,2})?$/}],initialValue:x},r.a.createElement(f.a,{id:c&&c.key,ref:g,autoComplete:"off",onChange:v,onPressEnter:E,onFocus:k})))}return r.a.createElement("td",p,h)},Dt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){var t,a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.query,(a=t&&t.get("param"))&&(a=unescape(a),r=JSON.parse(a),i=r.shop,n.setState({currentShop:i}),n._template=r.template,n._timeType=r.timeType,n._beginDateTime=r.beginDateTime,n._endDateTime=r.endDateTime,n._orderList=r.orderList,n.refresh());case 3:case"end":return e.stop()}}),e)}))),n.refresh=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({productSpinning:!0,productSpinTipText:"\u51c6\u5907\u5f55\u5165..."},Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u,m,p,f,h,y,b,v,E,k,x,w,T,S,I,D,C,L,P,N,z,j,M,A,_,F,Y,R,B,H,U,W;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n.setState({productSpinTipText:"\u51c6\u5907\u83b7\u53d6..."}),a=0;case 3:if(!(a<n._orderList.length)){e.next=65;break}if(!(r=n._orderList[a])){e.next=62;break}return e.next=8,O(r.orderId);case 8:if(0!==(i=e.sent).errCode||!i.items){e.next=59;break}o=!1,c=void 0,c=0;case 13:if(!(c<t.length)){e.next=20;break}if(t[c].orderShop!==r.orderShop||t[c].templateName!==r.templateName){e.next=17;break}return o=!0,e.abrupt("break",20);case 17:++c,e.next=13;break;case 20:if(!o){e.next=42;break}s=t[c].items,d=i.items,u=0;case 24:if(!(u<d.length)){e.next=40;break}m=d[u],p=-1,f=0;case 28:if(!(f<s.length)){e.next=36;break}if(s[f].barcode!==m.barcode){e.next=33;break}return p=f,e.abrupt("break",36);case 33:++f,e.next=28;break;case 36:-1!==p?(h=s[p].orderNumber+m.orderNumber,s[p].orderNumber=h):((y={}).categoryName=m.categoryName,y.orderProductName=m.orderProductName,y.specification=m.specification,y.barcode=m.barcode,y.barcodeSimple=m.barcodeSimple,y.orderNumber=m.orderNumber,y.transferPrice=m.transferPrice,y.sortId=m.sortId,s.push(y));case 37:++u,e.next=24;break;case 40:e.next=57;break;case 42:(b={}).orderShop=r.orderShop,b.templateName=r.templateName,v=0;case 46:if(!(v<bt.length)){e.next=53;break}if(bt[v].name!==r.templateName){e.next=50;break}return b.templateUid=bt[v].templateUid,e.abrupt("break",53);case 50:++v,e.next=46;break;case 53:for(b.expectTime=r.expectTime,b.items=i.items,E=0;E<i.items.length;++E)k=n._template.templateId+"-"+i.items[E].barcode,x=vt[k],i.items[E].sortId=x||200;t.push(b);case 57:e.next=62;break;case 59:return t=[],g.b.error("\u83b7\u53d6<"+r.orderShop+">\u8ba2\u8d27\u4ea7\u54c1\u51fa\u9519\uff0c\u8bf7\u68c0\u67e5\uff01"),e.abrupt("break",65);case 62:++a,e.next=3;break;case 65:n.setState({productSpinTipText:"\u6309\u7167\u6a21\u677f\u6392\u5e8f..."}),w=[],T=0;case 68:if(!(T<t.length)){e.next=105;break}return S=t[T],I=S.items,(D={}).orderShop=S.orderShop,D.templateName=S.templateName,D.expectTime=S.expectTime,D.templateUid=S.templateUid,n.setState({productSpinTipText:"\u67e5\u627e-".concat(S.templateName,"-\u6a21\u677f...")}),e.next=79,$e(S.templateUid);case 79:if(!(0===(C=e.sent).errCode&&C.list.length>0)){e.next=101;break}L=C.list,P=[],N=0;case 84:if(!(N<L.length)){e.next=100;break}z=-1,j=0;case 87:if(!(j<I.length)){e.next=94;break}if(L[N].barcode!==I[j].barcode){e.next=91;break}return z=j,e.abrupt("break",94);case 91:++j,e.next=87;break;case 94:M={},-1!==z?(M.categoryName=I[z].categoryName,M.orderProductName=I[z].orderProductName,M.specification=I[z].specification,M.barcode=I[z].barcode,M.barcodeSimple=I[z].barcodeSimple,M.sortId=I[z].sortId,M.orderNumber=I[z].orderNumber,M.transferNumber=0,M.transferPrice=I[z].transferPrice):(M.categoryName=L[N].categoryName,M.orderProductName=L[N].name,M.specification=L[N].specification,M.barcode=L[N].barcode,M.barcodeSimple=L[N].barcodeSimple,M.transferPrice=L[N].transferPrice,A=n._template.templateId+"-"+M.barcode,_=vt[A],M.sortId=_||200,M.orderNumber=0,M.transferNumber=0),P.push(M);case 97:++N,e.next=84;break;case 100:D.items=P;case 101:w.push(D);case 102:++T,e.next=68;break;case 105:for(n.setState({productSpinTipText:"\u6574\u7406\u5546\u54c1..."}),F=[],Y=0,R=0;R<w.length;++R)for(B=w[R],H=B.items,U=0;U<H.length;++U)(W=H[U]).key=++Y,F.push(W);n.setState({productSpinning:!1,productSpinTipText:"",allProductionDataToBeTransfer:F});case 110:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),n.getColumnSearchProps=function(e){return{filterDropdownVisible:n.state.filterDropdownVisible4Transfer,filterDropdown:function(e){var t=e.setSelectedKeys,a=(e.selectedKeys,e.confirm);e.clearFilters;return r.a.createElement("div",{style:{padding:8,width:130}},r.a.createElement(f.a,{ref:function(e){!n._searchInput&&e&&(n._searchInput=e,n._searchInput.focus())},autoComplete:"off",size:"large",placeholder:"+\u6dfb\u52a0\u5546\u54c1",value:n._searchText4Transfer,onChange:function(e){var r=/^[0-9]+$/.test(e.target.value);if(""!==e.target.value&&!r)return"+"===e.target.value.substring(e.target.value.length-1)?n.handleAddProduct():new Audio(gt.a).play(),void(n._searchText4Transfer=n._lastSearchText4Transfer);t(e.target.value?[e.target.value]:[]),a(),n._searchText4Transfer=e.target.value,n._lastSearchText4Transfer=e.target.value,n.setState({transferItems4NextFocus:[]},(function(){var e=[];n.state.allProductionDataToBeTransfer.forEach((function(t){-1!==t.barcodeSimple.indexOf(n._searchText4Transfer)&&(t.editing=!1,e.push(t))})),e.length>0&&n.setState({transferItems4NextFocus:e})}))},onFocus:function(e){n.setState({transferItems4NextFocus:[]},(function(){var e=[];n.state.allProductionDataToBeTransfer.forEach((function(t){-1!==t.barcodeSimple.indexOf(n._searchText4Transfer)&&(t.editing=!1,e.push(t))})),e.length>0&&n.setState({transferItems4NextFocus:e})}))},onPressEnter:function(e){4===n._searchText4Transfer.length?n.setState({transferItems4NextFocus:[]},(function(){var e=[];n.state.allProductionDataToBeTransfer.forEach((function(t){-1!==t.barcodeSimple.indexOf(n._searchText4Transfer)&&(t.editing=!1,e.push(t))})),e.length>0?(e[0].editing=!0,n.setState({transferItems4NextFocus:e})):new Audio(gt.a).play()})):new Audio(gt.a).play()},style:{marginBottom:8,display:"block"}}))},filterIcon:function(e){return r.a.createElement(ft.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){var n=a[e].toString();return n?n.includes(t):""},onFilterDropdownVisibleChange:function(e){e&&n._searchInput&&setTimeout((function(){return n._searchInput&&n._searchInput.select()}),300)},render:function(e){return r.a.createElement(pt.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n._searchText4Transfer],autoEscape:!0,textToHighlight:e?e.toString():""})}}},n.onAddProductionSelectChange=function(e){n.setState({addProductionSelectedRowKeys:e})},n.onAddProductSelect=function(e,t){e.editing=!1,n._searchInput4AddProduct&&n._searchInput4AddProduct.select();var a=n.state.allProductionDataRealToBeTransfer;if(t){var r={};r.barcode=e.barcode,r.barcodeSimple=e.barcode.substring(e.barcode.length-4,e.barcode.length),r.categoryName=e.categoryName,r.editing=!1,r.transferPrice=e.price,r.orderProductName=e.productName,r.specification=e.specification,r.orderNumber=parseFloat(e.orderNumber),r.transferNumber=parseFloat(e.transferNumber),r.price=e.price,r.memberPrice=e.memberPrice,r.wholePrice=e.wholePrice,r.partnerPrice=n.makePartnerPriceByCategory(e.categoryName,r.price,r.memberPrice,r.wholePrice),r.partnerPriceTotal=parseFloat((r.partnerPrice*r.transferNumber).toFixed(2)),r.sortId=200,r.remark="\u65b0\u589e";var i=0;r.key=++i;var o=[];o.push(r);for(var c=0;c<a.length;++c){var l=a[c];l.barcode!==r.barcode&&(l.key=++i,o.push(l))}n.setState({allProductionDataRealToBeTransfer:o})}else{for(var s=[],d=0,u=0;u<a.length;++u){var m=a[u];m.barcode!==e.barcode&&(m.key=++d,s.push(m))}n.setState({allProductionDataRealToBeTransfer:s})}},n.handleAddProductOnSearch=function(){var e=Object(s.a)(l.a.mark((function e(t,a){var r,i,o,c,s,d,u,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<=0)){e.next=3;break}return g.b.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5546\u54c1\u540d\u79f0\u6216\u6761\u7801"),e.abrupt("return");case 3:if(r=n.state.searchProductDataToBeAdd,i="search","Enter"===a.key&&(n._lastSearchText4AddProduct!==t?i="search":r.length>0&&(i="setAndJump")),"search"!==i){e.next=16;break}return n.setState({searchingProductData:!0,searchProductDataToBeAdd:[]}),n._lastSearchText4AddProduct=t,e.next=11,L(t);case 11:0===(o=e.sent).errCode&&o.items&&o.items.length>0&&(c=n.state.allProductionDataRealToBeTransfer,s=[],o.items.forEach((function(e){e.transferNumber=0,e.editing=!1,e.orderNumber=0,c.forEach((function(t){e.barcode===t.barcode&&-1===s.indexOf(e.key)&&s.push(e.key)}))})),n.setState({searchProductDataToBeAdd:o.items,addProductionSelectedRowKeys:s})),n.setState({searchingProductData:!1}),e.next=17;break;case 16:if("setAndJump"===i){for(d=n.state.searchProductDataToBeAdd,u=0;u<d.length;++u)(m=d[u])&&(m.editing=!0);n.forceUpdate()}case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleAddProductionModalonOk=function(){n.setState({isAddProductionModalVisible:!1,filterDropdownVisible4Transfer:!0},(function(){setTimeout((function(){n._searchInput&&n._searchInput.select()}),400)}))},n.handleProductTransferConfirm=Object(s.a)(l.a.mark((function e(){var t,a,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({productTransferConfirmText:"\u914d\u8d27\u4fe1\u606f\u53d1\u9001\u4e2d...."}),t=n.state.allProductionDataRealToBeTransfer,a=n.state.currentShop.userId,r=[],t.forEach((function(e){var t={};t.barcode=e.barcode,t.quantity=e.transferNumber,t.buyPrice=e.transferPrice,r.push(t)})),e.prev=5,e.next=8,P(a,r);case 8:(i=e.sent)&&0===i.errCode?((o=xe.a.success()).update({title:"\u914d\u8d27\u6210\u529f\uff0c\u5546\u54c1\u5df2\u53d1\u9001\u81f3<<"+n.state.currentShop.name+">>\u6536\u94f6\u673a~",okButtonProps:{hidden:!0}}),setTimeout((function(){o.destroy(),n.setState({productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"}),n.handleBack()}),1500)):(n.setState({productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"}),xe.a.error({title:"\u914d\u8d27\u5931\u8d25\uff0c\u8bf7\u67e5\u770b\u5931\u8d25\u539f\u56e0~"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),n.setState({productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"}),xe.a.error({title:e.t0.toString()});case 16:case"end":return e.stop()}}),e,null,[[5,12]])}))),n.handleEditableCellNextFocus=function(){for(var e=n.state.transferItems4NextFocus,t=-1,a=0;a<e.length;++a){if(e[a].editing){t=a;break}}var r=t+1;r>=0&&r<e.length?e[r].editing=!0:n._searchInput&&n._searchInput.select(),t>=0&&t<e.length&&(e[t].editing=!1),n.setState({transferItems4NextFocus:e})},n.handleEditableCellCurrentFocus=function(e){for(var t=n.state.transferItems4NextFocus,a=0;a<t.length;++a){var r=t[a];r.editing=!1,r.barcode===e.barcode&&(r.editing=!0)}n.forceUpdate()},n.doAddToTransfer=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,r,i,o,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({allProductionDataRealToBeTransferAdding:!0,allProductionDataRealToBeTransferAddingText:"\u6b63\u5728\u63d2\u5165<<"+t.orderProductName+">>"}),e.next=3,L(t.barcode);case 3:if((a=e.sent)&&0===a.errCode&&1===a.items.length){e.next=9;break}return g.b.warning("\u67e5\u627e\u5546\u54c1\u4fe1\u606f\u5931\u8d25~"),e.abrupt("return");case 9:r=a.items[0];case 10:if(r){for(t.specification=r.specification,t.price=r.price,t.memberPrice=r.memberPrice,t.wholePrice=r.wholePrice,t.partnerPrice=n.makePartnerPriceByCategory(r.categoryName,r.price,r.memberPrice,r.wholePrice),t.partnerPriceTotal=parseFloat((t.partnerPrice*t.transferNumber).toFixed(2)),i=[],o=0,t.key=++o,i.splice(0,0,t),c=0;c<n.state.allProductionDataRealToBeTransfer.length;++c)(s=Object(Xe.a)({},n.state.allProductionDataRealToBeTransfer[c])).barcode!==t.barcode&&(s.key=++o,i.push(s));n.setState({allProductionDataRealToBeTransferAdding:!1,allProductionDataRealToBeTransferAddingText:"",allProductionDataRealToBeTransfer:i})}case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.startToRunAddToTransfers=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n._readyToBeAddTransfers[0]){e.next=3;break}return e.abrupt("return");case 3:return n._readyToBeAddRuning=!0,a=Object(Xe.a)({},t),e.next=7,n.doAddToTransfer(a);case 7:n._readyToBeAddTransfers.shift(),n._readyToBeAddRuning=!1,n.startToRunAddToTransfers();case 10:case"end":return e.stop()}}),e)}))),n.handleEditableCellCurrentEnter=function(){var e=Object(s.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[a]>0?(n._readyToBeAddTransfers.push(t),n._readyToBeAddRuning||n.startToRunAddToTransfers()):new Audio(gt.a).play();case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleDeleteProduct4Preview=function(e){for(var t=[],a=0,r=0;r<n.state.allProductionDataRealToBeTransfer.length;++r){var i=Object(Xe.a)({},n.state.allProductionDataRealToBeTransfer[r]);i.barcode!==e.barcode&&(i.key=++a,t.push(i))}n.setState({allProductionDataRealToBeTransfer:t})},n.handleEditableCell4AddProductNextFocus=function(){for(var e=n.state.searchProductDataToBeAdd,t=-1,a=0;a<e.length;++a){if(e[a].editing){t=a;break}}for(var r=t;;){if(++r>=e.length){n._searchInput4AddProduct&&n._searchInput4AddProduct.select();break}e[r].editing=!0;break}t>=0&&t<e.length&&(e[t].editing=!1),n.forceUpdate()},n.handleEditableCell4AddProductCurrentFocus=function(e){for(var t=n.state.searchProductDataToBeAdd,a=0;a<t.length;++a){t[a].editing=!1}e.editing=!0,n.forceUpdate()},n.handleEditableCellAddProductOnChangeAddOrRemove=function(e,t){if("add"===e){n.onAddProductSelect(t,!0);var a=Object(ct.a)(n.state.addProductionSelectedRowKeys);-1===a.indexOf(t.key)&&a.push(t.key),n.setState({addProductionSelectedRowKeys:a})}else if("remove"===e){n.onAddProductSelect(t,!1);var r=Object(ct.a)(n.state.addProductionSelectedRowKeys);-1!==r.indexOf(t.key)&&r.splice(r.indexOf(t.key),1),n.setState({addProductionSelectedRowKeys:r})}},n.makePartnerPriceByCategory=function(e,t,a,r){var i=t;if(-1===Et.indexOf(e)){var o=t;"002 - \u5f2f\u9ea6(\u65e7\u9547\u5e97)"===n.state.currentShop.name&&(o=a<t?a:t),i=.7*o}else i=r;return i=parseFloat(i.toFixed(2))},n.getLodopAfterInit=function(){var e=Object(Qe.getLodop)();if(e){e.PRINT_INIT("react\u4f7f\u7528\u6253\u5370\u63d2\u4ef6CLodop");e.SET_PRINTER_INDEX(Be(e)),e.SET_PRINT_PAGESIZE(1,0,0,"\u9488\u6253\u4e09\u7b49\u5206"),e.SET_PREVIEW_WINDOW(0,0,0,800,600,""),e.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),e.ADD_PRINT_HTM(10,0,"100%","95%","<style>\n                </style> "+document.getElementById("printDiv").innerHTML)}return e},n.productPrintPreprew=function(){var e=n.getLodopAfterInit();e&&e.PREVIEW()},n.productPrintDirect=function(){var e=n.getLodopAfterInit();e&&e.PRINT()},n.productPrintDirectAndBack=function(){n.productPrintDirect(),n.setState({productTransferPrintShow:!1,filterDropdownVisible4Transfer:!0})},n.handleBack=function(){var e={};e.template=n._template,e.timeType=n._timeType,e.shop=n.state.currentShop,e.beginDateTime=n._beginDateTime,e.endDateTime=n._endDateTime;var t=JSON.stringify(e),a="http://localhost:4000/orderManagement";a="http://gratefulwheat.ruyue.xyz/orderManagement",a+="?",a+="param="+escape(t),window.location.replace(a)},n.handleAddProduct=function(){n.setState({addProductionSelectedRowKeys:[],isAddProductionModalVisible:!0,filterDropdownVisible4Transfer:!1,searchProductDataToBeAdd:[]}),setTimeout((function(){n._searchInput4AddProduct&&(n._searchInput4AddProduct.select(),n._searchInput4AddProduct.setState({value:""}))}),0)},n.makeTotalPrice=function(){var e=0;return n.state.allProductionDataRealToBeTransfer.forEach((function(t){e+=t.price})),e},n.makePartnerPrice=function(){var e=0;return n.state.allProductionDataRealToBeTransfer.forEach((function(t){e+=t.partnerPrice})),e},n.makePartnerPriceTotal=function(){var e=0;return n.state.allProductionDataRealToBeTransfer.forEach((function(t){e+=t.partnerPriceTotal})),e},n.state={allProductionDataToBeTransfer:[],allProductionDataRealToBeTransfer:[],allProductionDataRealToBeTransferAdding:!1,allProductionDataRealToBeTransferAddingText:"",searchProductDataToBeAdd:[],searchingProductData:!1,isAddProductionModalVisible:!1,addProductionSelectedRowKeys:[],currentShop:{},productSpinTipText:"",productSpinning:!1,transferItems4NextFocus:[],filterDropdownVisible4Transfer:!0,productTransferPrintShow:!1,productTransferConfirmText:"---\u786e\u5b9a\u51fa\u8d27---"},n._searchInput=null,n._searchInput4AddProduct=null,n._searchText4Transfer="",n._lastSearchText4Transfer="",n._lastSearchText4AddProduct="",n._searchText4AddProduct4onChange="",n._lastSearchText4AddProduct4onChange="",n._template=void 0,n._timeType=void 0,n._beginDateTime=void 0,n._endDateTime=void 0,n._readyToBeAddTransfers=[],n._readyToBeAddRuning=!1,n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.allProductionDataToBeTransfer,n=t.allProductionDataRealToBeTransfer,i=t.allProductionDataRealToBeTransferAdding,o=t.allProductionDataRealToBeTransferAddingText,c=t.searchProductDataToBeAdd,l=t.searchingProductData,s=t.isAddProductionModalVisible,d=t.addProductionSelectedRowKeys,u=t.currentShop,m=t.productSpinTipText,p=t.productSpinning,f=t.productTransferPrintShow,h=t.productTransferConfirmText,g=n&&n.length<=0||"---\u786e\u5b9a\u51fa\u8d27---"!==h||i,y=[{title:"\u5e8f",dataIndex:"key",key:"key",width:60,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},Object(Xe.a)({title:"\u7b80\u7801",dataIndex:"barcodeSimple",key:"barcodeSimple",width:200,editingIndex:"editing"},this.getColumnSearchProps("barcodeSimple")),{title:"\u54c1\u540d",dataIndex:"orderProductName",key:"orderProductName",width:160,render:function(e){return r.a.createElement("span",{style:{fontSize:14,color:"red"}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:80,render:function(e){return r.a.createElement("span",{style:{fontSize:14}},e)}},{title:"\u914d\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:160,editable:!0,render:function(e){return r.a.createElement("span",{style:{fontSize:16}},e)}},{title:"\u914d\u8d27\u4ef7",dataIndex:"transferPrice",key:"transferPrice",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5206\u7c7b",dataIndex:"categoryName",key:"categoryName",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return"\u65b0\u589e"===e?r.a.createElement("span",{style:{fontSize:14,color:"skyblue",backgroundColor:"yellow",fontWeight:"bold"}},e):r.a.createElement("span",{style:{fontSize:10}},e)}}],b={body:{row:xt,cell:wt}},E=y.map((function(t){return t.editable?Object(Xe.a)(Object(Xe.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleEditableCellNextFocus:e.handleEditableCellNextFocus,handleEditableCellCurrentFocus:e.handleEditableCellCurrentFocus,handleEditableCellCurrentEnter:e.handleEditableCellCurrentEnter}}}):t})),x={body:{row:St,cell:It}},w=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u5f62\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u54c1\u540d",dataIndex:"productName",key:"productName",width:120,render:function(e){return r.a.createElement("span",{style:{fontSize:14,color:"red"}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:60,render:function(e){return r.a.createElement("span",{style:{fontSize:14}},e)}},{title:"\u914d\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:80,editable:!0,render:function(e){return r.a.createElement("span",{style:{fontSize:16}},e)}},{title:"\u5206\u7c7b",dataIndex:"categoryName",key:"categoryName",width:120,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:120,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u9500\u552e\u4ef7",dataIndex:"price",key:"price",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u4f1a\u5458\u4ef7",dataIndex:"memberPrice",key:"memberPrice",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6279\u53d1\u4ef7",dataIndex:"wholePrice",key:"wholePrice",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}}].map((function(t){return t.editable?Object(Xe.a)(Object(Xe.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleEditableCellNextFocus:e.handleEditableCell4AddProductNextFocus,handleEditableCellCurrentFocus:e.handleEditableCell4AddProductCurrentFocus,handleEditableCellOnChangeAddOrRemove:e.handleEditableCellAddProductOnChangeAddOrRemove}}}):t})),T={hideSelectAll:!0,selectedRowKeys:d,onChange:this.onAddProductionSelectChange,onSelect:this.onAddProductSelect},S=ae()().format("YYYY-MM-DD HH:mm a"),I=[{title:"\u5e8f",dataIndex:"key",key:"key",width:40,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u5f62\u7801",dataIndex:"barcode",key:"barcode",width:140,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u54c1\u540d",dataIndex:"orderProductName",key:"orderProductName",width:160,render:function(e){return r.a.createElement("span",{style:{fontSize:14,color:"red"}},e)}},{title:"\u8ba2\u8d27\u91cf",dataIndex:"orderNumber",key:"orderNumber",width:80,render:function(e){return r.a.createElement("span",{style:{fontSize:14}},e)}},{title:"\u914d\u8d27\u91cf",dataIndex:"transferNumber",key:"transferNumber",width:80,editable:!0,render:function(e,t){var a=parseFloat(t.orderNumber),n=parseFloat(e),i=0!==a&&a===n?"transparent":"yellow";return r.a.createElement("span",{style:{fontSize:16,backgroundColor:i,padding:4}},e)}},{title:"\u5206\u7c7b",dataIndex:"categoryName",key:"categoryName",width:120,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u89c4\u683c",dataIndex:"specification",key:"specification",width:120,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u9500\u552e\u4ef7",dataIndex:"price",key:"price",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u4f1a\u5458\u4ef7",dataIndex:"memberPrice",key:"memberPrice",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6279\u53d1\u4ef7",dataIndex:"wholePrice",key:"wholePrice",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u52a0\u76df\u4ef7",dataIndex:"partnerPrice",key:"partnerPrice",width:100,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return r.a.createElement(v.a,{type:"primary",danger:!0,onClick:function(t){e.handleDeleteProduct4Preview(a)}},"\u5220\u9664")}},{title:"\u5907\u6ce8",dataIndex:"remark",key:"remark",width:"*",render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}}];return r.a.createElement("div",null,r.a.createElement(k.a,{tip:m,spinning:p,size:"large"},r.a.createElement("div",null,r.a.createElement("div",{style:{zIndex:2,bottom:0,left:0,right:0,position:"fixed",width:"100%",height:60,backgroundColor:"lightgray"}},r.a.createElement("div",null,r.a.createElement(v.a,{danger:!0,type:"primary",disabled:g,onClick:function(t){e.setState({productTransferPrintShow:!0,filterDropdownVisible4Transfer:!1})},style:{width:210,height:30,marginLeft:50,marginTop:10}},"---\u6253\u5370\u51fa\u8d27\u5355---"),r.a.createElement(ut.a,{title:"\u662f\u5426\u786e\u5b9a\u51fa\u8d27\uff1f",onConfirm:this.handleProductTransferConfirm,disabled:g},r.a.createElement(v.a,{danger:!0,type:"primary",disabled:g,style:{width:210,height:30,marginLeft:50,marginTop:10}},h)))),r.a.createElement("div",{style:{marginLeft:10,marginTop:10}},r.a.createElement(v.a,{type:"primary",style:{width:80,height:40},onClick:function(t){return e.handleBack()}},r.a.createElement("div",{style:{fontSize:16}},"\u540e\u9000")),r.a.createElement("span",{style:{marginLeft:10}},"\u5f2f\u9ea6(\u603b\u90e8)->"),r.a.createElement("span",{style:{marginLeft:0,marginRight:10,color:"red"}},u.name),r.a.createElement(v.a,{type:"primary",danger:!0,style:{width:60,height:30},onClick:function(){e.handleAddProduct()}},r.a.createElement("div",{style:{fontSize:8}},"+\u5546\u54c1"))),r.a.createElement(Ye.a,{style:{marginTop:10,marginLeft:10,marginRight:10},size:"small",components:b,rowClassName:function(){return"editable-row"},dataSource:a,columns:E,pagination:!1,bordered:!0,scroll:{y:160,scrollToFirstRowOnChange:!0},footer:function(){return r.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171 ".concat(a.length," \u9879"))}}))),r.a.createElement("div",null,r.a.createElement(Ye.a,{style:{height:480,backgroundColor:"transparent",marginLeft:10,marginRight:10},size:"small",loading:{spinning:i,tip:o},dataSource:n,columns:I,bordered:!0,pagination:!1,scroll:{y:295,scrollToFirstRowOnChange:!0},footer:function(){return r.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:15}},"\u603b\u5171 ".concat(n.length," \u9879"))}})),r.a.createElement("div",null,r.a.createElement(xe.a,{width:1200,centered:!0,keyboard:!0,maskClosable:!1,closable:!1,title:r.a.createElement("div",null,r.a.createElement("span",null,"\u6dfb\u52a0\u5546\u54c1"),r.a.createElement(yt,{style:{width:240,marginLeft:20},ref:function(t){!e._searchInput4AddProduct&&t&&(t&&t.focus(),e._searchInput4AddProduct=t)},enterButton:!0,placeholder:"-\u8fd4\u56de",onSearch:function(t,a){return e.handleAddProductOnSearch(t,a)},onChange:function(t){if(""!==t.target.value){var a=t.target.value.substring(t.target.value.length-1);if("-"===a)return void e.handleAddProductionModalonOk();if("+"===a||"*"===a||"/"===a||"."===a)return void new Audio(gt.a).play()}e._searchText4AddProduct4onChange=t.target.value,e._lastSearchText4AddProduct4onChange=t.target.value}})),visible:s,onOk:this.handleAddProductionModalonOk,okText:"\u5b8c\u6bd5",cancelButtonProps:{hidden:!0}},r.a.createElement(Ye.a,{size:"small",rowSelection:T,loading:l,dataSource:c,components:x,columns:w,bordered:!0,pagination:!1,scroll:{y:400,scrollToFirstRowOnChange:!0}}))),r.a.createElement("div",null,r.a.createElement(xe.a,{width:1e3,centered:!0,keyboard:!0,maskClosable:!1,maskStyle:{backgroundColor:"white"},title:r.a.createElement("div",{style:{height:0}}),closable:!1,visible:f,footer:r.a.createElement("div",{style:{marginRight:120,marginBottom:20,marginTop:20}},r.a.createElement(v.a,{key:"back",onClick:function(t){return e.setState({productTransferPrintShow:!1,filterDropdownVisible4Transfer:!0})}},"\u53d6\u6d88"),",",r.a.createElement(v.a,{key:"submit",type:"primary",danger:!0,onClick:function(t){return e.productPrintDirectAndBack()}},"\u76f4\u63a5\u6253\u5370"),",",r.a.createElement(v.a,{key:"link",type:"primary",onClick:function(t){return e.productPrintPreprew()}},"\u6253\u5370\u9884\u89c8"))},r.a.createElement("div",{id:"printDiv",style:{width:"100%",height:500,borderStyle:"dotted"}},r.a.createElement("div",{style:{marginLeft:10,marginTop:10,marginRight:10,backgroundColor:"transparent"}},r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:14}},"\u95e8\u5e97\u51fa\u8d27\u5355"),r.a.createElement("span",{style:{marginLeft:10,fontSize:14,backgroundColor:"green",paddingLeft:12,paddingRight:12,color:"white"}},"\u5171".concat(n.length,"\u9879"))),r.a.createElement("div",null,r.a.createElement("span",null,"\u6536\u8d27\u95e8\u5e97\uff1a"),r.a.createElement("span",{style:{fontSize:24,fontWeight:"bold"}},u.name),r.a.createElement("span",{style:{marginLeft:100}},"\u51fa\u5355\u65f6\u95f4\uff1a"),r.a.createElement("span",null,S)),r.a.createElement("div",null,r.a.createElement("table",{border:"1",cellSpacing:"0",style:{float:"left",borderCollapse:"collapse"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u5e8f"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u6761\u7801"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u54c1\u540d"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u8ba2\u8d27\u91cf"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u914d\u8d27\u91cf"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u5206\u7c7b"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u89c4\u683c"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u9500\u552e\u4ef7"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u52a0\u76df\u4ef7"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold",fontSize:12}},"\u8fdb\u8d27\u603b\u4ef7"),r.a.createElement("th",{style:{textAlign:"center",fontWeight:"bold"}},"\u5907\u6ce8"))),r.a.createElement("tbody",null,n.map((function(e){var t=n.indexOf(e)+1,a=0!==e.transferNumber&&e.transferNumber===e.orderNumber?"transparent":"yellow";return r.a.createElement("tr",{key:t},r.a.createElement("th",{key:"1",style:{height:22,width:20,textAlign:"center",fontSize:16}},t),r.a.createElement("th",{key:"2",style:{height:22,width:120,textAlign:"center",fontSize:16}},e.barcode),r.a.createElement("th",{key:"3",style:{height:22,width:160,textAlign:"center",fontSize:16}},e.orderProductName),r.a.createElement("th",{key:"4",style:{height:22,width:30,textAlign:"center",fontSize:16}},e.orderNumber),r.a.createElement("th",{key:"5",style:{backgroundColor:a,height:22,width:30,textAlign:"center",fontSize:16}},e.transferNumber),r.a.createElement("th",{key:"6",style:{height:22,width:140,textAlign:"center",fontSize:16}},e.categoryName),r.a.createElement("th",{key:"7",style:{height:22,width:140,textAlign:"center",fontSize:16}},e.specification),r.a.createElement("th",{key:"8",style:{height:22,width:40,textAlign:"center",fontSize:16}},e.price),r.a.createElement("th",{key:"9",style:{height:22,width:40,textAlign:"center",fontSize:16}},e.partnerPrice),r.a.createElement("th",{key:"10",style:{height:22,width:40,textAlign:"center",fontSize:16}},e.partnerPriceTotal),r.a.createElement("th",{key:"11",style:{height:22,width:"*",textAlign:"center",fontSize:16}}))})),r.a.createElement("tr",{key:"total"},r.a.createElement("th",{key:"1",colSpan:"9",style:{height:24,textAlign:"center",fontSize:16}},"\u603b\u8ba1"),r.a.createElement("th",{key:"2",style:{height:24,textAlign:"center",fontSize:16}},this.makePartnerPriceTotal().toFixed(2)))))))))))}}]),a}(r.a.Component),Ot=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n._a=1,n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{marginLeft:20,marginTop:20}},r.a.createElement("div",null,"\u5546\u54c1\u8d44\u6599"),r.a.createElement("div",null,r.a.createElement(v.a,null,"\u65b0\u589e\u5546\u54c1"),r.a.createElement(v.a,null,"\u65b0\u589e\u751f\u65e5\u86cb\u7cd5")))}}]),a}(r.a.Component),Ct=a(239),Lt=a.n(Ct),Pt=a(248),Nt=a(433),zt=a(434),jt=a(435),Mt=a(419),At=a(120),_t=a(417),Ft=a(412),Yt=a(138),Rt=a(420),Bt=Mt.a.Panel,Ht=At.a.Group,Ut=f.a.TextArea,Wt=[{categoryId:"1634302403310226908",categoryName:"\u5e38\u89c4\u6b3e\u86cb\u7cd5",description:"\u5e73\u51e1\u4eba\u751f\u3001\u5feb\u4e50\u751f\u6d3b",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u966a\u4f34-\u65b9\u56fe.jpg",productItems:[]},{categoryId:"1634302334442115588",categoryName:"\u5973\u5b69\u6b3e\u86cb\u7cd5",description:"\u5c0f\u5c0f\u516c\u4e3b\u3001\u6c38\u8fdc\u5f00\u5fc3",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u767d\u96ea\u516c\u4e3b-\u65b9\u56fe.jpg",productItems:[]},{categoryId:"1649820515687346997",categoryName:"\u7537\u5b69\u6b3e\u86cb\u7cd5",description:"\u5c0f\u7537\u5b50\u6c49\u3001\u9876\u5929\u7acb\u5730",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u53ee\u5f53\u738b\u5b50-\u65b9\u56fe.jpg",productItems:[]},{categoryId:"1634302367129657476",categoryName:"\u5973\u795e\u6b3e\u86cb\u7cd5",description:"\u6211\u7684\u5973\u795e\u3001\u7231\u4f60\u6c38\u8fdc",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u840c\u5ba0\u6d3e\u5bf9-\u65b9\u56fe.jpg",productItems:[]},{categoryId:"1634302388959605558",categoryName:"\u7537\u795e\u6b3e\u86cb\u7cd5",description:"\u516c\u91cc\u4e4b\u5185\u3001\u5c5e\u4f60\u6700\u5e05",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u66b4\u5bcc\u5927G-\u65b9\u56fe.jpg",productItems:[]},{categoryId:"1634302419875701981",categoryName:"\u60c5\u4fa3\u6b3e\u86cb\u7cd5",description:"\u4e24\u9897\u7ea2\u5fc3\u3001\u76f8\u77e5\u76f8\u4f34",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u5c0f\u718aLOVE-\u65b9\u56fe.jpg",productItems:[]},{categoryId:"1634302432122635916",categoryName:"\u795d\u5bff\u6b3e\u86cb\u7cd5",description:"\u798f\u5bff\u7ef5\u7ef5\u3001\u5982\u6d77\u6ed4\u6ed4",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u798f\u5bff\u7ef5\u7ef5-\u65b9\u56fe.jpg",productItems:[]},{categoryId:"1634302446119593980",categoryName:"\u5e86\u5178\u6d3e\u5bf9\u6b3e\u86cb\u7cd5",description:"\u5171\u540c\u4e3e\u676f\u3001\u5171\u656c\u672a\u6765",thumbnail:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/\u62db\u8d22\u8fdb\u5b9d-\u65b9\u56fe.jpg",productItems:[]}],Vt=[{label:"\u81ea\u5df1\u63d0\u8d27",value:"\u81ea\u5df1\u63d0\u8d27"},{label:"\u5546\u5bb6\u914d\u9001",value:"\u5546\u5bb6\u914d\u9001"}],Kt=[{label:"\u6559\u80b2\u5c40\u5e97",value:"\u6559\u80b2\u5c40\u5e97"},{label:"\u6c5f\u6ee8\u5e97",value:"\u6c5f\u6ee8\u5e97"},{label:"\u6c64\u6cc9\u4e16\u7eaa\u5e97",value:"\u6c64\u6cc9\u4e16\u7eaa\u5e97"},{label:"\u65e7\u9547\u5e97",value:"\u65e7\u9547\u5e97"},{label:"\u72ee\u5934\u5e97",value:"\u72ee\u5934\u5e97"},{label:"\u76d8\u9640\u5e97",value:"\u76d8\u9640\u5e97"}],qt=["\u8292\u679c","\u5e03\u4e01","\u828b\u6ce5","\u5965\u5229\u5965","\u6ce2\u6ce2\u73e0","\u706b\u9f99\u679c","\u5de7\u514b\u529b\u71d5\u9ea6"],Jt=[{label:"\u87ba\u7eb9\u8721\u70db",value:"\u87ba\u7eb9\u8721\u70db"},{label:"\u6570\u5b57\u8721\u70db",value:"\u6570\u5b57\u8721\u70db"},{label:"\u7231\u5fc3\u8721\u70db",value:"\u7231\u5fc3\u8721\u70db"},{label:"\u4e94\u661f\u8721\u70db",value:"\u4e94\u661f\u8721\u70db"}],Gt={"6\u5bf8":"10","8\u5bf8":"15","10\u5bf8":"20","12\u5bf8":"25"},Xt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.query,a=t&&t.get("debug"),!(n._birthdayCakesAll.length<=0)){e.next=13;break}return e.next=5,G();case 5:if(n._birthdayCakesAll=e.sent,!(n._birthdayCakesAll&&n._birthdayCakesAll.length>0)){e.next=13;break}return r=[],e.next=10,J();case 10:for(i=e.sent,o=0;o<i.length;++o)for(c=i[o],s=0;s<n._birthdayCakesAll.length;++s)d=n._birthdayCakesAll[s],c===d.name&&((u=Object(Xe.a)({},d)).key=r.length+1,r.push(u));n.setState({birthdayCakesLatest:r,debug:a});case 13:n.updateWeixinConfig();case 14:case"end":return e.stop()}}),e)}))),n.handleCollapseOnChange=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,r,i,o,c,s,d,u,m,p,f,h,g,y,b,v,E,k,x,w,T,S,I,D,O,C,L,P,N,z,j,M;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:for(a=Object(ct.a)(t),r=0;r<n._lastKeys.length;++r)i=n._lastKeys[r],-1!==(o=a.indexOf(i))&&a.splice(o,1);for(c=Object(ct.a)(n._lastKeys),s=0;s<t.length;++s)d=t[s],-1!==(u=c.indexOf(d))&&c.splice(u,1);if(n._lastKeys=Object(ct.a)(t),m=n.state.birthdayCakeCategorys,p=Object(ct.a)(m),1!==a.length){e.next=63;break}e.prev=10,f=a[0],g=0;case 13:if(!(g<p.length)){e.next=21;break}if((y=p[g]).categoryId!==f){e.next=18;break}return h=y,e.abrupt("break",21);case 18:++g,e.next=13;break;case 21:if(!h){e.next=58;break}if(h.opened=!0,n.setState({birthdayCakeCategorys:p}),!(h.productItems.length<=0)||h.spinning){e.next=58;break}return h.spinning=!0,b=ae()(),v=b.endOf("day").format("YYYY.MM.DD HH:mm:ss"),E=b.subtract(180,"days").startOf("day").format("YYYY.MM.DD HH:mm:ss"),e.next=31,q(f,"","",E,v,"barcode","true");case 31:if(!(0===(k=e.sent).errCode&&k.list.length>0)){e.next=57;break}x=k.list,w=[],T=0;case 36:if(!(T<x.length)){e.next=54;break}S=x[T],I=S.productName,D=S.saleNumber,O=-1,C=0;case 42:if(!(C<w.length)){e.next=50;break}if(w[C].productName!==I){e.next=47;break}return O=C,e.abrupt("break",50);case 47:++C,e.next=42;break;case 50:-1===O?((L={}).productName=I,L.saleNumber=D,L.key=w.length+1,w.push(L)):(P=w[O]).saleNumber=P.saleNumber+D;case 51:++T,e.next=36;break;case 54:w=w.sort((function(e,t){return t.saleNumber-e.saleNumber})),h.productItems=w,h.spinning=!1;case 57:n.setState({birthdayCakeCategorys:p});case 58:e.next=63;break;case 60:e.prev=60,e.t0=e.catch(10),console.log(e.t0);case 63:if(1!==c.length){e.next=75;break}N=c[0],j=0;case 66:if(!(j<p.length)){e.next=74;break}if((M=p[j]).categoryId!==N){e.next=71;break}return z=M,e.abrupt("break",74);case 71:++j,e.next=66;break;case 74:z&&(z.opened=!1,n.setState({birthdayCakeCategorys:p}));case 75:case"end":return e.stop()}}),e,null,[[10,60]])})));return function(t){return e.apply(this,arguments)}}(),n.updateWeixinConfig=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==window.navigator.userAgent.toLowerCase().indexOf("micromessenger")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,X(document.URL.split("#")[0]);case 5:if(!(t=e.sent)){e.next=12;break}if(t.appId){e.next=9;break}return e.abrupt("return");case 9:window.wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]}),window.wx.ready((function(){var e="\u5f2f\u9ea6\u86cb\u7cd5\u56fe\u518c\u83dc\u5355\uff0c\u9001\u7ed9\u70ed\u7231\u4eea\u5f0f\u611f\u7684\u4f60\uff0c\u70b9\u51fb\u9884\u5b9a",t="http://gratefulwheat.ruyue.xyz/image/\u751f\u65e5\u86cb\u7cd5/image4wechat.jpg";window.wx.updateAppMessageShareData({title:e,desc:"\u7537\u5b69\u6b3e\uff0c\u5973\u5b69\u6b3e\uff0c\u5973\u795e\u6b3e\uff0c\u7537\u795e\u6b3e\uff0c\u60c5\u4fa3\u6b3e\u7b49\u5404\u79cd\u6b3e\u5f0f~",link:document.URL,imgUrl:t,success:function(){},fail:function(e){}}),window.wx.updateTimelineShareData({title:e,link:document.URL,imgUrl:t,success:function(){},fail:function(){}})})),window.wx.error((function(e){console.log("window.wx error res = "+JSON.stringify(e))}));case 12:case"end":return e.stop()}}),e)}))),n.handleOrderNowTitleClick=function(e){n.setState({orderCakeInfoModalVisiable:!0,orderCakeMeta:e,cakeName:e.name,creamType:"",cakeSize:"",cakePrice:"",cakeFillings:[qt[0],qt[1]],candleType:Jt[0].value,number4candle:"",cakePlateNumber:"",pickUpDay:"",pickUpTime:"",pickUpType:"",responseShop:"",deliverAddress:"",pickUpName:"",phoneNumber:"",remarks:""}),document.documentElement.style.overflow="hidden"},n.handleOrderCakeInfoModalOk=function(){var e=n.state,t=e.creamType,a=e.cakeSize,r=e.cakePrice,i=e.cakeFillings,o=e.candleType,c=e.number4candle,d=e.cakePlateNumber,u=e.pickUpDay,m=e.pickUpTime,p=e.pickUpType,f=e.responseShop,h=e.deliverAddress,y=e.pickUpName,b=e.phoneNumber,v=e.remarks;if(console.log("\u5976\u6cb9\uff1a"+t),console.log("\u5927\u5c0f\uff1a"+a),console.log("\u4ef7\u683c\uff1a"+r),console.log("\u5939\u5fc3\uff1a"+i),console.log("\u8721\u70db\uff1a"+o),console.log("\u8721\u70db\uff1a"+c),console.log("\u9910\u76d8\uff1a"+d),console.log("\u65e5\u671f\uff1a"+u),console.log("\u65f6\u95f4\uff1a"+m),console.log("\u65b9\u5f0f\uff1a"+p),console.log("\u95e8\u5e97\uff1a"+f),console.log("\u5730\u5740\uff1a"+h),console.log("\u59d3\u540d\uff1a"+y),console.log("\u624b\u673a\uff1a"+b),console.log("\u5907\u6ce8\uff1a"+v),""!==t&&""!==a&&0!==i.length&&""!==o&&""!==d&&""!==u&&""!==m&&""!==p&&""!==y&&""!==b){if(p){if(""===f)return void g.b.warning("\u8bf7\u586b\u5199\u5fc5\u586b\u9879\uff01");if(p===Vt[1].value&&""===h)return void g.b.warning("\u8bf7\u586b\u5199\u5fc5\u586b\u9879\uff01");if(o===Jt[1].value&&""===c)return void g.b.warning("\u8bf7\u586b\u5199\u5fc5\u586b\u9879\uff01")}n.setState({orderCakeInfoModalVisiable:!1},(function(){setTimeout((function(){n.setState({imageCapturing:!0},Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n._theDiv4Capture){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lt()(n._theDiv4Capture);case 4:t=e.sent,a=t.toDataURL("image/png"),n.setState({orderImageSrc:a,imageCapturing:!1},(function(){n.setState({orderImageModalVisiable:!0}),document.documentElement.style.overflow="hidden"}));case 7:case"end":return e.stop()}}),e)}))))}),0)})),document.documentElement.style.overflow="auto"}else g.b.warning("\u8bf7\u586b\u5199\u5fc5\u586b\u9879\uff01")},n.handleOrderCakeInfoModalCancel=function(){n.setState({orderCakeInfoModalVisiable:!1}),document.documentElement.style.overflow="auto"},n.handleCreamTypeChange=function(e){var t=e.target.value,a=n.state,r=a.orderCakeMeta,i=a.cakeSize,o="",c=r.price;if(c){var l=c[t];l&&(o=l[i])}n.setState({creamType:t,cakePrice:o})},n.handleCakeSizeChange=function(e){var t=n.state,a=t.orderCakeMeta,r=t.creamType,i="",o=a.price;if(o){var c=o[r];c&&(i=c[e])}var l=Gt[e];n.setState({cakeSize:e,cakePrice:i,cakePlateNumber:l})},n.handleDropdownVisibleChange=function(e){if(e){var t=n.state.creamType;""!==t&&void 0!==t||g.b.warning("\u8bf7\u5148\u9009\u62e9\u5976\u6cb9~")}},n.handleCakeFillingChange=function(e){e.length>=3?g.b.warning("\u53ea\u80fd\u9009\u62e9\u4e24\u79cd\u5939\u5fc3!"):n.setState({cakeFillings:e})},n.handleCandleTypeChange=function(e){n.setState({candleType:e})},n.handleNumber4candleChange=function(e){n.setState({number4candle:e.target.value})},n.handlePickUpDayChange=function(e){n.setState({pickUpDay:e})},n.handlePickUpDayOnFocus=function(e){n.setState({pickUpDayPopupOpen:!0})},n.handlePickUpDayOnBlur=function(e){n.setState({pickUpDayPopupOpen:!1})},n.handlePickUpTimeChange=function(e){n.setState({pickUpTime:e})},n.onPickUpTypeChange=function(e){n.setState({pickUpType:e.target.value})},n.handleResponseShopChange=function(e){n.setState({responseShop:e})},n.handleDeliverAddressChange=function(e){n.setState({deliverAddress:e.target.value})},n.handlePickUpPeopleChange=function(e){n.setState({pickUpName:e.target.value})},n.handlePhoneNumberChange=function(e){n.setState({phoneNumber:e.target.value})},n.handleRemarksChange=function(e){n.setState({remarks:e.target.value})},n.state={birthdayCakeCategorys:Wt,birthdayCakesLatest:[],debug:0,orderCakeInfoModalVisiable:!1,orderCakeMeta:{},cakeName:"",creamType:"",cakeSize:"",cakePrice:"",cakeFillings:[qt[0],qt[1]],candleType:Jt[0].value,number4candle:"",cakePlateNumber:"",pickUpDay:"",pickUpDayPopupOpen:!1,pickUpTime:"",pickUpType:"",responseShop:"",deliverAddress:"",pickUpName:"",phoneNumber:"",remarks:"",orderImageModalVisiable:!1,orderImageSrc:void 0,imageCapturing:!1},n._lastKeys=[],n._birthdayCakesAll=[],n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.birthdayCakeCategorys,n=t.birthdayCakesLatest,i=t.debug,o=t.pickUpType,c=t.orderCakeInfoModalVisiable,l=t.orderCakeMeta,s=t.cakeName,d=t.creamType,u=t.cakeSize,m=t.cakePrice,p=t.cakeFillings,g=t.candleType,y=t.number4candle,b=t.cakePlateNumber,E=t.pickUpDay,x=t.pickUpDayPopupOpen,w=t.pickUpTime,T=t.responseShop,S=t.deliverAddress,I=t.pickUpName,D=t.phoneNumber,O=t.remarks,C=t.orderImageModalVisiable,L=t.orderImageSrc,P=t.imageCapturing,N={width:750,height:111e3/210,background:"#F0F0F0"},z={width:111e3/210-180,height:111e3/210-180+40,float:"left",marginLeft:8},j={float:"right",width:381.42857142857144},M=[],A={"6\u5bf8":{label:"6\u5bf8",value:"6\u5bf8"},"8\u5bf8":{label:"8\u5bf8",value:"8\u5bf8"},"10\u5bf8":{label:"10\u5bf8",value:"10\u5bf8"},"12\u5bf8":{label:"12\u5bf8",value:"12\u5bf8"}},_=l.price;if(_){var F=_[d];if(F)for(var Y=Object.keys(F),R=0;R<Y.length;++R){var B=A[Y[R]];M.push(B)}}var H=[],U={"\u725b\u5976\u5976\u6cb9":{label:"\u725b\u5976\u5976\u6cb9",value:"\u725b\u5976\u5976\u6cb9"},"\u52a8\u7269\u5976\u6cb9":{label:"\u52a8\u7269\u5976\u6cb9",value:"\u52a8\u7269\u5976\u6cb9"}},W=l.price;if(W)for(var V=Object.keys(W),K=0;K<V.length;++K){var q=U[V[K]];H.push(q)}var J=window.innerWidth,G=148*J/210,X={background:"white",width:J,height:G+200,marginTop:100},Z={width:J,height:G};return r.a.createElement(k.a,{spinning:P,size:"large",tip:"\u6b63\u5728\u751f\u6210\u8ba2\u8d2d\u5355..."},r.a.createElement("div",null,c?r.a.createElement("div",{style:{opacity:.96,background:"white",position:"fixed",zIndex:"100",width:"calc(100%)",height:"calc(100%)",overflowY:"auto",overflowX:"hidden"}},r.a.createElement("div",{style:{textAlign:"center",fontSize:14,marginTop:0}},"\u300a".concat(s,"\u300b")),r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement(_t.a,{style:{width:100,height:100},preview:!1,src:"".concat("/image/\u751f\u65e5\u86cb\u7cd5","/\u86cb\u7cd53.0/").concat(s,"-\u65b9\u56fe.jpg")})),r.a.createElement(Ft.a,{dashed:!0,style:{marginTop:10,marginBottom:0,fontSize:12}},"\u5236\u4f5c"),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement(f.a.Group,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"\u5976\u6cb9\uff1a"),r.a.createElement(we.a.Group,{size:"large",options:H,onChange:this.handleCreamTypeChange,value:d,optionType:"default"}),""===d?r.a.createElement("span",{style:{color:"red"}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null))),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement(f.a.Group,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"\u5927\u5c0f\uff1a"),r.a.createElement(Yt.a,{value:u,style:{width:100},onChange:this.handleCakeSizeChange,onDropdownVisibleChange:this.handleDropdownVisibleChange,options:M}),""===u?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null))),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement("span",{style:{fontWeight:"bold"}},"\u4ef7\u683c\uff1a"),r.a.createElement("span",null,m),r.a.createElement("span",null," \u5143")),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement("span",{style:{fontWeight:"bold"}},"\u5939\u5fc3\uff08\u4efb\u9009\u4e24\u79cd\uff09\uff1a"),r.a.createElement(Ht,{options:qt,value:p,onChange:this.handleCakeFillingChange}),0===p.length?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null)),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement("span",{style:{fontWeight:"bold"}},"\u8721\u70db\uff1a"),r.a.createElement(Yt.a,{value:g,style:{width:100},options:Jt,onChange:this.handleCandleTypeChange}),g===Jt[1].value?r.a.createElement(f.a,{style:{marginLeft:8,width:70},placeholder:"\u6570\u5b57",prefix:r.a.createElement(Pt.a,null),value:y,onChange:this.handleNumber4candleChange}):r.a.createElement("span",null),""===g||g===Jt[1].value&&""===y?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null)),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement("span",{style:{fontWeight:"bold"}},"\u9910\u5177\uff1a"),r.a.createElement("span",null,b),r.a.createElement("span",null," \u5957")),r.a.createElement(Ft.a,{dashed:!0,style:{marginTop:10,marginBottom:0,fontSize:12}},"\u914d\u9001"),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement("div",{style:{fontWeight:"bold"}},"\u65f6\u95f4\uff1a"),r.a.createElement("div",null,r.a.createElement(h.a,{ref:function(t){return e._datePicker4PickUpDay=t},style:{width:170},placeholder:"\u65e5\u671f",format:"YYYY-MM-DD dddd",value:E,open:x,showToday:!1,inputReadOnly:!0,onChange:this.handlePickUpDayChange,onFocus:this.handlePickUpDayOnFocus,onBlur:this.handlePickUpDayOnBlur,dateRender:function(t){var a={};return 1===t.date()&&(a.border="1px solid #1890ff",a.borderRadius="50%"),r.a.createElement("div",{className:"ant-picker-cell-inner",style:a,onClick:function(){e._datePicker4PickUpDay&&e._datePicker4PickUpDay.blur(),e.setState({pickUpDayPopupOpen:!1})}},t.date())},renderExtraFooter:function(){return r.a.createElement("span",null,r.a.createElement(v.a,{type:"primary",size:"small",onClick:function(){e._datePicker4PickUpDay&&e._datePicker4PickUpDay.blur(),e.setState({pickUpDay:ae()(),pickUpDayPopupOpen:!1})}},"\u4eca\u5929"),r.a.createElement("span",null,"   "),r.a.createElement(v.a,{type:"primary",size:"small",onClick:function(){e._datePicker4PickUpDay&&e._datePicker4PickUpDay.blur(),e.setState({pickUpDay:ae()().add(1,"day"),pickUpDayPopupOpen:!1})}},"\u660e\u5929"),r.a.createElement("span",null,"   "),r.a.createElement(v.a,{type:"primary",size:"small",onClick:function(){e._datePicker4PickUpDay&&e._datePicker4PickUpDay.blur(),e.setState({pickUpDay:ae()().add(2,"day"),pickUpDayPopupOpen:!1})}},"\u540e\u5929"))}})),r.a.createElement("div",{style:{marginTop:4}},r.a.createElement(h.a,{picker:"time",style:{width:120},placeholder:"\u65f6\u95f4",locale:ee.a,showTime:{use12Hours:!1,showNow:!0,format:"aHH:mm"},panelRender:function(e){return r.a.createElement("div",{style:{marginLeft:20,marginRight:20}},e)},format:"aHH:mm",value:w,inputReadOnly:!0,onChange:this.handlePickUpTimeChange,renderExtraFooter:function(){return r.a.createElement("span",null,r.a.createElement(v.a,{type:"primary",size:"small",onClick:function(){e.setState({pickUpTime:ae()("12:00","HH:mm")})}},"\u4e2d\u534812\u70b9"),r.a.createElement("span",null,"   "),r.a.createElement(v.a,{type:"primary",size:"small",onClick:function(){e.setState({pickUpTime:ae()("18:00","HH:mm")})}},"\u665a\u4e0a18\u70b9"))}})),""===E||null===E||""===w||null===w?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null)),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement("span",{style:{fontWeight:"bold"}},"\u65b9\u5f0f\uff1a"),r.a.createElement(we.a.Group,{size:"large",options:Vt,onChange:this.onPickUpTypeChange,value:o,optionType:"default"}),""===o?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null)),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement("span",{style:{fontWeight:"bold"}},"\u95e8\u5e97\uff1a"),r.a.createElement(Yt.a,{value:T,style:{width:120},onChange:this.handleResponseShopChange,options:Kt}),""===T?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null)),o===Vt[1].value?r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement(f.a.Group,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"\u5730\u5740\uff1a"),r.a.createElement(f.a,{style:{width:"calc(100% - 100px)"},placeholder:"\u586b\u5199\u5730\u5740",prefix:r.a.createElement(Nt.a,null),value:S,onChange:this.handleDeliverAddressChange}),""===S?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null))):r.a.createElement("div",null),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement(f.a.Group,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"\u59d3\u540d\uff1a"),r.a.createElement(f.a,{style:{width:"calc(100% - 100px)"},placeholder:"\u586b\u5199\u59d3\u540d",prefix:r.a.createElement(zt.a,null),value:I,onChange:this.handlePickUpPeopleChange}),""===I?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null))),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement(f.a.Group,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"\u624b\u673a\uff1a"),r.a.createElement(f.a,{style:{width:"calc(100% - 100px)"},placeholder:"\u586b\u5199\u624b\u673a\u53f7",prefix:r.a.createElement(Le.a,null),value:D,onChange:this.handlePhoneNumberChange}),""===D?r.a.createElement("span",{style:{color:"red",marginLeft:8}},"\u5fc5\u586b\u9879"):r.a.createElement("span",null))),r.a.createElement(Ft.a,{dashed:!0,style:{marginTop:10,marginBottom:0,fontSize:12}},"\u5176\u5b83"),r.a.createElement("div",{style:{marginTop:8,marginBottom:8,marginLeft:12,marginRight:12}},r.a.createElement(f.a.Group,null,r.a.createElement("span",{style:{fontWeight:"bold"}},"\u5907\u6ce8\uff1a"),r.a.createElement(Ut,{style:{width:"calc(100% - 0px)"},rows:2,placeholder:"\u6709\u7279\u6b8a\u8981\u6c42\uff0c\u8bf7\u5907\u6ce8",value:O,onChange:this.handleRemarksChange}))),r.a.createElement("div",{style:{marginTop:16,marginBottom:80,textAlign:"center"}},r.a.createElement(Fe.b,null,r.a.createElement(v.a,{type:"default",onClick:this.handleOrderCakeInfoModalCancel},"\u53d6\u6d88"),r.a.createElement(v.a,{type:"primary",onClick:this.handleOrderCakeInfoModalOk},"\u751f\u6210\u8ba2\u8d2d\u5355")))):r.a.createElement("div",null),C?r.a.createElement("div",{style:{background:"rgba(0,0,0,0.5)",position:"fixed",zIndex:"100",width:"calc(100%)",height:"calc(100%)",overflowY:"hidden",overflowX:"hidden"}},r.a.createElement("div",{style:X},r.a.createElement("div",{style:{height:120}},r.a.createElement(Rt.a,{style:{paddingTop:30,paddingLeft:24,paddingRight:24}},r.a.createElement(Rt.a.Item,{color:"red"},"\u4ed4\u7ec6\u6838\u5bf9\u8ba2\u8d2d\u5355\u4fe1\u606f"),r.a.createElement(Rt.a.Item,{color:"red"},'\u957f\u6309\u56fe\u7247=>"\u8f6c\u53d1\u7ed9\u670b\u53cb"=>\u53d1\u9001\u7ed9\u5ba2\u670d\u767b\u8bb0'))),r.a.createElement("div",{style:Z},r.a.createElement(_t.a,{preview:!1,src:L})),r.a.createElement("div",{style:{height:80,textAlign:"center"}},r.a.createElement(Fe.b,{style:{marginTop:24}},r.a.createElement(v.a,{key:"edit",type:"primary",onClick:function(){e.setState({orderImageModalVisiable:!1,orderCakeInfoModalVisiable:!0}),document.documentElement.style.overflow="hidden"}},"\u8fd4\u56de\u4fee\u6539"),r.a.createElement(v.a,{key:"back",onClick:function(){e.setState({orderImageModalVisiable:!1}),document.documentElement.style.overflow="auto"}},"\u5173\u95ed"))))):r.a.createElement("div",null),r.a.createElement("div",{style:{textAlign:"center",marginTop:0,fontSize:20,backgroundColor:"#DAA520",color:"white",borderRadius:15,paddingTop:10,paddingBottom:10}},i?"\u65b0\u6b3e\u86cb\u7cd5\uff08".concat(n.length,"\uff09"):"\u65b0\u6b3e\u86cb\u7cd5"),n.map((function(t){return r.a.createElement("div",{key:t.key},r.a.createElement(_t.a,{preview:!1,src:"/image/\u751f\u65e5\u86cb\u7cd5/\u86cb\u7cd53.0/".concat(t.name,"-\u6a2a\u56fe.jpg")}),r.a.createElement("div",{style:{fontSize:18,textAlign:"center",marginTop:0,marginLeft:30,marginRight:30,backgroundColor:"red",color:"white",borderRadius:12,paddingTop:4,paddingBottom:4,marginBottom:12},onClick:function(){e.handleOrderNowTitleClick(t)}},"\u7acb\u5373\u9884\u5b9a\u300a".concat(t.name,"\u300b")))})),r.a.createElement("div",{style:{textAlign:"center",color:"#C6A300",fontSize:18,paddingTop:10,paddingBottom:10}},"\u66f4\u591a\u6b3e\u5f0f\u8bf7\u70b9\u51fb\u4e0b\u65b9\u5206\u7c7b\u67e5\u770b"),r.a.createElement(Mt.a,{bordered:!0,expandIcon:function(e){var t=e.isActive;return r.a.createElement(jt.a,{rotate:t?90:0})},expandIconPosition:"right",onChange:this.handleCollapseOnChange},a.map((function(t){return r.a.createElement(Bt,{header:r.a.createElement("div",{style:{color:"white",fontSize:20}},r.a.createElement(_t.a,{style:{width:50,height:50,borderRadius:25},preview:!1,src:t.thumbnail}),r.a.createElement("div",{style:{float:"right",marginLeft:12}},r.a.createElement("div",null,i?"".concat(t.categoryName,"\uff08").concat(t.productItems.length,"\uff09"):"".concat(t.categoryName)),r.a.createElement("div",{style:{fontSize:14,color:"#FEFCFF"}},"".concat(t.description)))),style:{backgroundColor:"#DAA520",borderRadius:20},key:t.categoryId,extra:r.a.createElement("span",{style:{fontSize:16,color:"black"}},t.opened?"\u70b9\u51fb\u5173\u95ed":"\u70b9\u51fb\u6253\u5f00")},r.a.createElement(k.a,{spinning:t.spinning},t.productItems.map((function(t){var a="/image/\u751f\u65e5\u86cb\u7cd5";return a+="/\u86cb\u7cd53.0",a+="/",a+=t.productName,a+="-\u6a2a\u56fe.jpg",r.a.createElement("span",{key:t.key},i?r.a.createElement("span",null,r.a.createElement("div",{style:{color:"red",fontSize:14}},t.productName),r.a.createElement("div",{style:{color:"green",fontSize:12}},"\u534a\u5e74\u5185\u9500\u552e\u6570\u91cf\uff1a".concat(t.saleNumber))):r.a.createElement("span",null),t.hideTheItem?r.a.createElement("div",null):r.a.createElement(_t.a,{preview:!1,src:a,onError:function(a){t.hideTheItem=!0,e.forceUpdate()}}),t.hideTheItem?r.a.createElement("div",null):r.a.createElement("div",{style:{fontSize:18,textAlign:"center",marginTop:0,marginLeft:30,marginRight:30,backgroundColor:"red",color:"white",borderRadius:12,paddingTop:4,paddingBottom:4,marginBottom:12},onClick:function(){for(var a=t.productName,n=0;n<e._birthdayCakesAll.length;++n)if(e._birthdayCakesAll[n].name===a){e.handleOrderNowTitleClick(e._birthdayCakesAll[n]);break}}},"\u7acb\u5373\u9884\u5b9a\u300a".concat(t.productName,"\u300b")))}))))}))),r.a.createElement("div",{style:{textAlign:"center",color:"#B9B973",fontSize:14,fontWeight:"bold",paddingTop:7}},r.a.createElement("span",null,"\u8bf7\u6dfb\u52a0\u6559\u80b2\u5c40\u603b\u5e97"),r.a.createElement("span",{style:{textDecoration:"underline"}},r.a.createElement("a",{href:"tel:13290768588"},"13290768588")),r.a.createElement("span",null," (\u5fae\u4fe1\u540c\u53f7)\u9884\u5b9a")),P?r.a.createElement("div",{ref:function(t){e._theDiv4Capture=t},style:N},r.a.createElement("div",{style:{fontSize:22,textAlign:"center",paddingTop:12,paddingBottom:12}}," \u5f2f\u9ea6\u86cb\u7cd5\u8ba2\u8d2d\u5355"),r.a.createElement("div",null,r.a.createElement("div",{style:z},r.a.createElement("div",{style:{fontSize:20,textAlign:"center",paddingTop:4,paddingBottom:4,fontWeight:"bold",background:"#D8D8D8"}},"\u300a".concat(s,"\u300b")),r.a.createElement("div",null,r.a.createElement(_t.a,{preview:!1,src:"".concat("/image/\u751f\u65e5\u86cb\u7cd5","/\u86cb\u7cd53.0/").concat(s,"-\u65b9\u56fe.jpg")}))),r.a.createElement("div",{style:j},r.a.createElement(Ft.a,{dashed:!0,style:{marginTop:0,marginBottom:0,fontSize:12}},"\u5236\u4f5c"),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u5976\u6cb9\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},d)),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u5927\u5c0f\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},u)),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u4ef7\u683c\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},m),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},"\u5143")),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u5939\u5fc3\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},p.join("+"))),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u8721\u70db\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},g),g===Jt[1].value?r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},"".concat(y)):r.a.createElement("span",null)),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u9910\u5177\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},b),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},"\u5957")),r.a.createElement(Ft.a,{dashed:!0,style:{marginTop:0,marginBottom:0,fontSize:12}},"\u4ea4\u4ed8"),r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:16}},"\u65f6\u95f4\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},E.format("YYYY-MM-DD ddd")),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},w.format(" aHH:mm"))),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u65b9\u5f0f\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},o)),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u95e8\u5e97\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},T)),o===Vt[1].value?r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u5730\u5740\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},S)):r.a.createElement("div",null),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u59d3\u540d\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},I)),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u624b\u673a\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},D)),r.a.createElement(Ft.a,{dashed:!0,style:{marginTop:0,marginBottom:0,fontSize:12}},"\u5176\u5b83"),r.a.createElement("div",{style:{marginTop:4,marginBottom:4}},r.a.createElement("span",{style:{fontSize:16}},"\u5907\u6ce8\uff1a"),r.a.createElement("span",{style:{fontSize:16,fontWeight:"bold"}},O))))):r.a.createElement("div",null),r.a.createElement("div",{style:{textAlign:"center",background:"#D8D8D8",height:100}},r.a.createElement("div",{style:{paddingTop:12,marginTop:10}},"\u603b\u90e8\uff1a\u6f33\u5dde\u5e02\u6f33\u6d66\u53bf\u5e9c\u524d\u8857\u897f247\u53f7(\u6559\u80b2\u5c40\u5bf9\u9762)"),r.a.createElement("div",{style:{color:"blue",fontSize:14}},r.a.createElement("span",{style:{color:"black"}},"\xa9\u5f2f\u9ea6"),r.a.createElement("span",{style:{color:"blue",marginLeft:8}},"\u95fdICP\u59072022007668\u53f7-1"),r.a.createElement("div",null,r.a.createElement("a",{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=35062302000230"},r.a.createElement("span",null,r.a.createElement(_t.a,{preview:!1,src:"/image/\u5907\u6848\u56fe\u6807.png",style:{float:"left"}})),r.a.createElement("span",{style:{marginLeft:8}},"\u95fd\u516c\u7f51\u5b89\u5907 35062302000230\u53f7")))))))}}]),a}(r.a.Component),Zt=a(436),$t=a(424),Qt=Ee.a.Title,ea=Mt.a.Panel,ta=[{categoryId:"1593049816479739965",categoryName:"\u73b0\u70e4\u9762\u5305",description:"\u65b0\u9c9c\u73b0\u70e4\u3001\u7f8e\u5473\u65e0\u9650",thumbnail:"/image/\u73b0\u70e4\u9762\u5305/\u751c\u751c\u5708.jpg",productItems:[]},{categoryId:"1592989355905414162",categoryName:"\u897f\u70b9\u6155\u65af\u86cb\u7cd5",description:"\u751c\u70b9\u6155\u65af\u3001\u70e6\u607c\u62dc\u62dc",thumbnail:"/image/\u897f\u70b9\u6155\u65af\u86cb\u7cd5/\u9ed1\u68ee\u6797.jpg",productItems:[]},{categoryId:"1593049881212199906",categoryName:"\u5e38\u6e29\u86cb\u7cd5",description:"\u9e21\u86cb\u7cd5\u70b9\u3001\u56de\u5473\u65e0\u7a77",thumbnail:"/image/\u5e38\u6e29\u86cb\u7cd5/\u54b8\u86cb\u5377.jpg",productItems:[]},{categoryId:"1593049854760654816",categoryName:"\u5410\u53f8\u9762\u5305",description:"\u5207\u7247\u5410\u53f8\u3001\u7247\u7247\u7559\u9999",thumbnail:"/image/\u5410\u53f8\u9762\u5305/\u62b9\u8336\u7ea2\u8c46\u5207\u7247\u5410\u53f8.jpg",productItems:[]},{categoryId:"1626767161867698544",categoryName:"\u9910\u5305\u9762\u5305",description:"\u5706\u5706\u9910\u5305\u3001\u751f\u6d3b\u7f8e\u6ee1",thumbnail:"/image/\u9910\u5305\u9762\u5305/\u6c99\u62c9\u5305.jpg",productItems:[]},{categoryId:"1593059349213583584",categoryName:"\u5e72\u70b9\u997c\u5e72",description:"\u997c\u5e72\u8336\u70b9\u3001\u60ec\u610f\u5348\u540e",thumbnail:"/image/\u5e72\u70b9\u997c\u5e72/\u725b\u6cb9\u66f2\u5947.jpg",productItems:[]},{categoryId:"1604471906489441680",categoryName:"\u5c0f\u86cb\u7cd5",description:"\u5c0f\u5c0f\u4eea\u5f0f\u3001\u5feb\u4e50\u6c38\u8fdc",thumbnail:"/image/\u5c0f\u86cb\u7cd5/\u6c34\u679c\u86cb\u7cd5\uff085\u5bf8\uff09.jpg",productItems:[]},{categoryId:"1615972878471894425",categoryName:"\u957f\u5bcc\u5e38\u6e29\u725b\u5976",description:"\u7cbe\u54c1\u725b\u5976\u3001\u5f3a\u58ee\u8eab\u4f53",thumbnail:"/image/\u957f\u5bcc\u5e38\u6e29\u725b\u5976/\u957f\u5bcc24\u7cbe\u54c1\u7eaf\u5976.jpg",productItems:[]}],aa=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleCollapseOnChange=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r,i,o,c,s,d,u,m,p,f,h,g,y,b,v,E,k,x,w,T,S,I,D,O,C;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:for(n=Object(ct.a)(t),r=0;r<a._lastKeys.length;++r)i=a._lastKeys[r],-1!==(o=n.indexOf(i))&&n.splice(o,1);for(c=Object(ct.a)(a._lastKeys),s=0;s<t.length;++s)d=t[s],-1!==(u=c.indexOf(d))&&c.splice(u,1);if(a._lastKeys=Object(ct.a)(t),m=a.state.foodCategorys,p=Object(ct.a)(m),1!==n.length){e.next=39;break}e.prev=10,f=n[0],g=0;case 13:if(!(g<p.length)){e.next=21;break}if((y=p[g]).categoryId!==f){e.next=18;break}return h=y,e.abrupt("break",21);case 18:++g,e.next=13;break;case 21:if(!h){e.next=34;break}if(h.opened=!0,a.setState({foodCategorys:p}),!(h.productItems.length<=0)||h.spinning){e.next=34;break}return h.spinning=!0,b=ae()(),v=b.endOf("day").format("YYYY.MM.DD HH:mm:ss"),E=b.subtract(5,"days").startOf("day").format("YYYY.MM.DD HH:mm:ss"),e.next=31,q(f,"3995767","1",E,v,"barcode","true");case 31:if(0===(k=e.sent).errCode&&k.list.length>0){for(x=k.list,w=[],T=0;T<x.length;++T)(S=Object(Xe.a)({},x[T])).buyNumber=0,S.disable=!1,w.push(S);w=w.sort((function(e,t){return t.saleNumber-e.saleNumber})),h.productItems=w,h.spinning=!1}a.setState({foodCategorys:p});case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(10),console.log(e.t0);case 39:if(1!==c.length){e.next=51;break}I=c[0],O=0;case 42:if(!(O<p.length)){e.next=50;break}if((C=p[O]).categoryId!==I){e.next=47;break}return D=C,e.abrupt("break",50);case 47:++O,e.next=42;break;case 50:D&&(D.opened=!1,a.setState({foodCategorys:p}));case 51:case"end":return e.stop()}}),e,null,[[10,36]])})));return function(t){return e.apply(this,arguments)}}(),a.updateWeixinConfig=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==window.navigator.userAgent.toLowerCase().indexOf("micromessenger")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,X(document.URL.split("#")[0]);case 5:if(!(t=e.sent)){e.next=12;break}if(t.appId){e.next=9;break}return e.abrupt("return");case 9:window.wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]}),window.wx.ready((function(){var e="http://gratefulwheat.ruyue.xyz/image/\u73b0\u70e4\u9762\u5305/\u9e21\u6392\u4e09\u660e\u6cbb.jpg";window.wx.updateAppMessageShareData({title:"\u5f2f\u9ea6\u9762\u5305\u725b\u5976\u83dc\u5355\uff0c\u70b9\u51fb\u9884\u5b9a",desc:"\u73b0\u70e4\u9762\u5305\uff0c\u897f\u70b9\u6155\u65af\uff0c\u5410\u53f8\u9910\u5305\uff0c\u5c0f\u86cb\u7cd5\uff0c\u5c0f\u96f6\u98df\uff0c\u725b\u5976\u7b49\u7f8e\u98df~",link:document.URL,imgUrl:e,success:function(){},fail:function(e){}}),window.wx.updateTimelineShareData({title:"\u5f2f\u9ea6\u9762\u5305\u725b\u5976\u83dc\u5355\uff0c\u70b9\u51fb\u9884\u5b9a",link:document.URL,imgUrl:e,success:function(){},fail:function(){}})})),window.wx.error((function(e){console.log("window.wx error res = "+JSON.stringify(e))}));case 12:case"end":return e.stop()}}),e)}))),a.handleIncreaseItemToCart=function(e,t){if(e.buyNumber=e.buyNumber+1,a.forceUpdate(),e.buyNumber>=1){for(var n,r=a.state.orderList,i=Object(ct.a)(r),o=0;o<i.length;++o)if(i[o].barcode===e.barcode){n=i[o];break}if(!n){var c="/image";c+="/",c+=t,c+="/",c+=e.productName,c+=".jpg",e.imageUrl=c,i.push(e)}a.setState({orderList:i})}setTimeout((function(){for(var e=a.state.orderList,t=0,n=0,r=0;r<e.length;++r){var i=e[r],o=i.price*i.buyNumber;t+=o=a.fixTo2(o),n+=i.buyNumber}t=a.fixTo2(t),a.setState({orderListTotalPrice:t,orderListTotalCount:n})}),0)},a.handleDecreaseItemFromCart=function(e){if(e.buyNumber=e.buyNumber-1,a.forceUpdate(),e.buyNumber<=0){for(var t,n=a.state.orderList,r=Object(ct.a)(n),i=0;i<r.length;++i)if(r[i].barcode===e.barcode){t=r[i];break}t&&r.splice(r.indexOf(t),1),a.setState({orderList:r})}setTimeout((function(){for(var e=a.state.orderList,t=0,n=0,r=0;r<e.length;++r){var i=e[r],o=i.price*i.buyNumber;t+=o=a.fixTo2(o),n+=i.buyNumber}t=a.fixTo2(t),a.setState({orderListTotalPrice:t,orderListTotalCount:n})}),0)},a.fixTo2=function(e){for(var t=1,a=2;a>0;t*=10,a--);for(;a<0;t/=10,a++);return Math.round(e*t)/t},a.state={foodCategorys:ta,foodLatest:[],orderList:[],orderListShow:!1,orderListTotalPrice:0,orderListTotalCount:0,goOrderViewShow:!1,orderText:"",debug:0},a._lastKeys=[],a._orderTextArea=void 0,a._inputRef=null,a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.query,a=t&&t.get("debug"),this.setState({debug:a}),this.updateWeixinConfig();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.foodCategorys,i=t.orderList,o=t.orderListShow,c=t.orderListTotalPrice,l=t.orderListTotalCount,s=t.goOrderViewShow,d=t.orderText,u=t.debug,m=!1,p="\u53bb\u9884\u5b9a";if(c<15){m=!0;var f=15-c;p="\u5dee\xa5"+(f=this.fixTo2(f))+"\u8d77\u9001"}return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Qt,{level:5,style:{backgroundColor:"transparent",textAlign:"center",marginTop:4,color:"black",paddingTop:4,paddingBottom:0}},"\u9762\u5305\u725b\u5976\u83dc\u5355")),r.a.createElement(Mt.a,{bordered:!0,expandIcon:function(e){var t=e.isActive;return r.a.createElement(jt.a,{rotate:t?90:0})},expandIconPosition:"right",onChange:this.handleCollapseOnChange},n.map((function(t){return r.a.createElement(ea,{header:r.a.createElement("div",{style:{color:"white",fontSize:20}},r.a.createElement(_t.a,{style:{width:50,height:50,borderRadius:25},preview:!1,src:t.thumbnail}),r.a.createElement("div",{style:{float:"right",marginLeft:12}},r.a.createElement("div",null,u?"".concat(t.categoryName,"\uff08").concat(t.productItems.length,"\uff09"):"".concat(t.categoryName)),r.a.createElement("div",{style:{fontSize:14,color:"#FEFCFF"}},"".concat(t.description)))),style:{backgroundColor:"#DAA520",borderRadius:20},key:t.categoryId,extra:r.a.createElement("span",{style:{fontSize:13,color:"black"}},t.opened?"\u70b9\u51fb\u5173\u95ed":"\u70b9\u51fb\u6253\u5f00")},r.a.createElement(k.a,{spinning:t.spinning},r.a.createElement(E.b,{grid:{gutter:2,column:2},dataSource:t.productItems,renderItem:function(a){var n="/image";n+="/",n+=t.categoryName,n+="/",n+=a.productName,n+=".jpg";var i=a.buyNumber<=0;return r.a.createElement(E.b.Item,null,r.a.createElement("div",null,r.a.createElement(_t.a,{preview:!0,src:n,onError:function(t){a.disable=!0,e.forceUpdate()}}),r.a.createElement("div",{style:{paddingLeft:4,paddingRight:4,backgroundColor:"transparent"}},r.a.createElement("div",{style:{fontSize:14,color:"black"}},a.productName),r.a.createElement("div",{style:{fontSize:8,color:"gray"}},a.specification),r.a.createElement("div",{style:{fontSize:14,color:"black"}},r.a.createElement("span",null,"\xa5"),r.a.createElement("span",null,a.price),r.a.createElement("span",null,"/"),r.a.createElement("span",null,a.unit),r.a.createElement("span",{style:{float:"right",backgroundColor:"transparent"}},i?r.a.createElement("span",null):r.a.createElement("span",null,r.a.createElement(v.a,{size:"small",shape:"circle",icon:r.a.createElement(Zt.a,null),onClick:function(){e.handleDecreaseItemFromCart(a)}})),"\xa0 \xa0",i?r.a.createElement("span",null):r.a.createElement("span",null,a.buyNumber),"\xa0 \xa0",r.a.createElement("span",null,r.a.createElement(v.a,{disabled:a.disable,danger:!0,size:"small",shape:"circle",icon:r.a.createElement($t.a,null),onClick:function(){e.handleIncreaseItemToCart(a,t.categoryName)}}))))),u?r.a.createElement("div",{style:{color:"red",fontSize:8}},r.a.createElement("span",null,"\u4e09\u5929\u5185\u9500\u552e\u91cf\uff1a"),r.a.createElement("span",null,a.saleNumber)):r.a.createElement("div",null),u?r.a.createElement("div",{style:{color:"red",fontSize:8}},r.a.createElement("span",null,a.barcode)):r.a.createElement("div",null)))}})))}))),r.a.createElement("div",{style:{textAlign:"center",background:"#D8D8D8",height:100}},r.a.createElement("div",{style:{paddingTop:12,marginTop:10}},"\u603b\u90e8\uff1a\u6f33\u5dde\u5e02\u6f33\u6d66\u53bf\u5e9c\u524d\u8857\u897f247\u53f7(\u6559\u80b2\u5c40\u5bf9\u9762)"),r.a.createElement("div",{style:{color:"blue",fontSize:14}},r.a.createElement("span",{style:{color:"black"}},"\xa9\u5f2f\u9ea6"),r.a.createElement("span",{style:{color:"blue",marginLeft:8}},"\u95fdICP\u59072022007668\u53f7-1"),r.a.createElement("div",null,r.a.createElement("a",{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=35062302000230"},r.a.createElement("span",null,r.a.createElement(_t.a,{preview:!1,src:"/image/\u5907\u6848\u56fe\u6807.png",style:{float:"left"}})),r.a.createElement("span",{style:{marginLeft:8}},"\u95fd\u516c\u7f51\u5b89\u5907 35062302000230\u53f7"))))),r.a.createElement("div",{style:{height:60}}),r.a.createElement("div",{style:{height:60,position:"fixed",backgroundColor:"white",width:"100%",bottom:0}},r.a.createElement("div",{style:{float:"left",marginTop:4,marginLeft:8,width:50,height:50},onClick:function(){e.setState({orderListShow:!e.state.orderListShow})}},r.a.createElement(_t.a,{style:{width:50,height:50},preview:!1,src:a(406)})),r.a.createElement("div",{style:{float:"left",width:20,height:16,backgroundColor:"red",color:"white",fontSize:8,textAlign:"center",borderRadius:6}},l),r.a.createElement("div",{style:{float:"left",marginLeft:20,marginTop:15,fontSize:20,fontWeight:"bold"}},r.a.createElement("span",{style:{fontSize:4}},"\xa5 "),r.a.createElement("span",{style:{fontSize:24}},c)),r.a.createElement("div",{style:{float:"right",marginRight:10,marginTop:10}},r.a.createElement(v.a,{disabled:m,type:"primary",shape:"round",style:{width:120,height:40},onClick:function(){for(var t="",a=0;a<i.length;++a){var n=i[a];t+=n.productName,t+="-",t+=n.specification,t+="  ",t+="x",t+="  ",t+=n.buyNumber,t+="\n"}e.setState({goOrderViewShow:!0,orderText:t})}},p))),o?r.a.createElement("div",{style:{height:"100%",width:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.5)",bottom:60}},r.a.createElement("div",{style:{maxHeight:"65%",overflow:"scroll",width:"100%",position:"absolute",backgroundColor:"white",bottom:0}},r.a.createElement("div",{style:{marginLeft:8,marginTop:6}},r.a.createElement("span",{style:{fontSize:8,color:"black"}},"\u5df2\u9009\u5546\u54c1"),r.a.createElement(v.a,{size:"small",style:{float:"right",right:4},onClick:function(){e.setState({orderListShow:!1})}},"\u6536\u8d77")),r.a.createElement(E.b,{itemLayout:"vertical",dataSource:i,renderItem:function(t){var a=t.price*t.buyNumber;return a=e.fixTo2(a),r.a.createElement("div",null,r.a.createElement("div",{style:{margin:10,height:70,backgroundColor:"white"}},r.a.createElement("div",{style:{float:"left",width:70,height:70}},r.a.createElement(_t.a,{style:{width:70,height:70},preview:!1,src:t.imageUrl})),r.a.createElement("div",{style:{float:"left",marginLeft:10,marginTop:4}},r.a.createElement("div",{style:{fontSize:12}},t.productName),r.a.createElement("div",{style:{fontSize:8}},t.specification),r.a.createElement("div",{style:{marginTop:4}},r.a.createElement("span",{style:{fontSize:4}},"\xa5 "),r.a.createElement("span",{style:{fontSize:12}},a))),r.a.createElement("span",{style:{float:"right",marginTop:25,backgroundColor:"transparent"}},r.a.createElement("span",null,r.a.createElement(v.a,{size:"small",shape:"circle",icon:r.a.createElement(Zt.a,null),onClick:function(){e.handleDecreaseItemFromCart(t)}})),"\xa0 \xa0",r.a.createElement("span",null,t.buyNumber),"\xa0 \xa0",r.a.createElement("span",null,r.a.createElement(v.a,{danger:!0,size:"small",shape:"circle",icon:r.a.createElement($t.a,null),onClick:function(){e.handleIncreaseItemToCart(t)}})))))}}))):r.a.createElement("div",null),s?r.a.createElement("div",{style:{height:"100%",width:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.95)",top:0}},r.a.createElement("div",{style:{width:"100%",marginTop:100}},r.a.createElement("div",{style:{fontWeight:"bold",color:"white",marginLeft:"5%",marginRight:"5%"}},"\u8ba2\u5355\u6587\u5b57\uff1a"),r.a.createElement("textarea",{onChange:function(t){e.setState({orderText:t.value})},ref:function(t){e._inputRef=t},value:d,style:{height:180,width:"90%",marginTop:10,marginLeft:"5%",marginRight:"5%"}})),r.a.createElement("div",{style:{color:"white",marginLeft:"5%",marginRight:"5%",marginTop:20}},"1\uff1a\u70b9\u51fb\u4e0a\u65b9\u8f93\u5165\u6846\uff0c\u53ef\u4ee5\u4fee\u6539\u8ba2\u5355\u6587\u5b57\uff0c\u5982\u589e\u52a0\u4f1a\u5458\u7535\u8bdd\u3002"),r.a.createElement("div",{style:{color:"white",marginLeft:"5%",marginRight:"5%"}},"2\uff1a\u70b9\u51fb\u4e0b\u65b9\u300a\u53d6\u6d88\u300b\u6309\u94ae\uff0c\u53ef\u4ee5\u5173\u95ed\u5f53\u524d\u9875\u9762\u3002"),r.a.createElement("div",{style:{color:"white",marginLeft:"5%",marginRight:"5%"}},r.a.createElement("span",null,"3\uff1a\u70b9\u51fb\u4e0b\u65b9\u300a\u590d\u5236\u8ba2\u5355\u6587\u5b57\u300b\u6309\u94ae\uff0c\u4f1a\u590d\u5236\u4e0a\u8ff0\u8ba2\u5355\u6587\u5b57\uff0c\u590d\u5236\u5b8c\u6bd5\u540e\uff0c\u8bf7\u8fd4\u56de\u5fae\u4fe1\u5e76\u7c98\u8d34\u8ba2\u5355\u6587\u5b57\u5230\u8f93\u5165\u6846\uff0c\u53d1\u9001\u7ed9"),r.a.createElement("span",{style:{textDecoration:"underline"}},r.a.createElement("a",{href:"tel:13290768588"},"13290768588")),r.a.createElement("span",null,"\u5f2f\u9ea6\u70d8\u7119\uff08\u6559\u80b2\u5c40\u5e97\uff09\u5fae\u4fe1\u9884\u5b9a\u3002")),r.a.createElement("div",{style:{marginLeft:"5%",width:"100%",marginTop:20}},r.a.createElement("span",null,r.a.createElement(v.a,{danger:!0,onClick:function(){e.setState({goOrderViewShow:!1})}},"\u53d6\u6d88")),"\xa0\xa0\xa0\xa0",r.a.createElement("span",null,r.a.createElement(v.a,{type:"primary",size:"large",onClick:function(){e._inputRef.select(),document.execCommand("Copy"),e._inputRef.blur(),g.b.info("\u5df2\u7ecf\u590d\u5236\uff0c\u8bf7\u8fd4\u56de\u5fae\u4fe1\u5e76\u7c98\u8d34\u5230\u8f93\u5165\u6846\uff0c\u53d1\u9001\u7ed9\u5f2f\u9ea6\u70d8\u7119\uff08\u6559\u80b2\u5c40\u5e97\uff09\u9884\u5b9a",10)}},"\u590d\u5236\u8ba2\u5355\u6587\u5b57")))):r.a.createElement("div",null))}}]),n}(r.a.Component),na=[{categoryId:"1593049816479739965",categoryName:"\u73b0\u70e4\u9762\u5305",productItems:[]},{categoryId:"1592989355905414162",categoryName:"\u897f\u70b9\u6155\u65af\u86cb\u7cd5",productItems:[]},{categoryId:"1593049881212199906",categoryName:"\u5e38\u6e29\u86cb\u7cd5",productItems:[]},{categoryId:"1604471906489441680",categoryName:"\u5c0f\u86cb\u7cd5",productItems:[]},{categoryId:"1593049854760654816",categoryName:"\u5410\u53f8\u9762\u5305",productItems:[]},{categoryId:"1626767161867698544",categoryName:"\u9910\u5305\u9762\u5305",productItems:[]},{categoryId:"1593059349213583584",categoryName:"\u5e72\u70b9\u997c\u5e72",productItems:[]},{categoryId:"1615972878471894425",categoryName:"\u957f\u5bcc\u5e38\u6e29\u725b\u5976",productItems:[]}],ra=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.query,n=t&&t.get("debug"),a.setState({debug:n}),a.refresh();case 4:case"end":return e.stop()}}),e)}))),a.refresh=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({productSpinning:!0,productSpinTipText:"\u83b7\u53d6\u5546\u54c1\u4fe1\u606f..."},Object(s.a)(l.a.mark((function e(){var t,n,r,i,o,c,s,d,u,m,p,f,h,g,y,b,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=0;case 2:if(!(n<na.length)){e.next=16;break}return i=(r=na[n]).categoryId,o=r.categoryName,c=ae()(),s=c.endOf("day").format("YYYY.MM.DD HH:mm:ss"),d=c.subtract(5,"days").startOf("day").format("YYYY.MM.DD HH:mm:ss"),e.next=11,q(i,"3995767","1",d,s,"barcode","true");case 11:if(0===(u=e.sent).errCode&&u.list.length>0)for(m=u.list,p=0;p<m.length;++p)f=Object(Xe.a)({},m[p]),p%4===0?((h={key:t.length+1,categoryName:o,productItems:[]}).productItems.push(f),t.push(h)):t[t.length-1].productItems.push(f);case 13:++n,e.next=2;break;case 16:for(g=[],y=0;y<t.length;++y)b=t[y],y%7===0?((v={key:g.length+1,productPages:[]}).productPages.push(b),g.push(v)):g[g.length-1].productPages.push(b);a.setState({allData:g,productSpinning:!1,productSpinTipText:""});case 19:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),a.getLodopAfterInit=function(){var e=Object(Qe.getLodop)();if(e){e.PRINT_INIT("react\u4f7f\u7528\u6253\u5370\u63d2\u4ef6CLodop");e.SET_PRINTER_INDEX(Re(e)),e.SET_PRINT_PAGESIZE(2,0,0,"A4"),e.SET_PREVIEW_WINDOW(0,0,0,800,600,""),e.SET_SHOW_MODE("LANDSCAPE_DEFROTATED",1),e.SET_PRINT_MODE("AUTO_CLOSE_PREWINDOW",1),e.ADD_PRINT_HTM(0,0,"100%","100%","<style>\n                </style> "+document.getElementById("printDiv").innerHTML)}return e},a.productPrintPreprew=function(){var e=a.getLodopAfterInit();e&&e.PREVIEW()},a.state={productSpinTipText:"",productSpinning:!1,allData:[],debug:0},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.allData,i=t.productSpinTipText,o=t.productSpinning,c=t.debug;return r.a.createElement("div",null,r.a.createElement(k.a,{tip:i,spinning:o,size:"large"},r.a.createElement("div",null,r.a.createElement(v.a,{style:{backgroundColor:"transparent",margin:10},onClick:function(){return e.productPrintPreprew()}},"\u5fae\u4fe1\u83dc\u5355\u6253\u5370"),r.a.createElement("div",{id:"printDiv"},n.map((function(e){var t=e.productPages,i=n.length,o=n.indexOf(e)+1;return r.a.createElement("div",{key:e.key,style:{backgroundColor:"transparent",width:1374,height:964}},t.map((function(e){var t=e.productItems;return r.a.createElement("div",{key:e.key,style:{float:"left",marginTop:0}},r.a.createElement("div",{style:{textAlign:"center",backgroundColor:"green",color:"white",marginLeft:0,marginRight:0,paddingTop:5,paddingBottom:5}},e.categoryName),r.a.createElement("div",{style:{height:10}}),r.a.createElement("div",{style:{float:"left",marginLeft:0,width:10,height:850,backgroundColor:"transparent"}}),r.a.createElement("div",{style:{float:"left",width:160,height:850}},t.map((function(t){var a="/image";return a+="/",a+=e.categoryName,a+="/",a+=t.productName,a+=".jpg",r.a.createElement("div",{key:t.key},r.a.createElement("div",{style:{width:160,height:160}},r.a.createElement(_t.a,{style:{width:160,height:160},preview:!1,src:a,onError:function(e){}})),r.a.createElement("div",{style:{fontSize:14,color:"black"}},t.productName),r.a.createElement("div",{style:{fontSize:12,color:"gray"}},t.specification),r.a.createElement("div",{style:{fontSize:14,color:"black"}},r.a.createElement("span",null,"\xa5"),r.a.createElement("span",null,t.price),r.a.createElement("span",null,"/"),r.a.createElement("span",null,t.unit)),r.a.createElement("div",{style:{height:5}}),c?r.a.createElement("div",{style:{color:"red",fontSize:8}},r.a.createElement("span",null,"\u4e09\u5929\u5185\u9500\u552e\u91cf\uff1a"),r.a.createElement("span",null,t.saleNumber)):r.a.createElement("div",null),c?r.a.createElement("div",{style:{color:"red",fontSize:8}},r.a.createElement("span",null,t.barcode)):r.a.createElement("div",null))}))),r.a.createElement("div",{style:{float:"left",marginLeft:0,width:10,height:850,backgroundColor:"transparent"}}))})),r.a.createElement("div",{style:{float:"left",marginLeft:5,marginTop:0,fontSize:15}},r.a.createElement("div",{style:{textAlign:"center",backgroundColor:"red",color:"white",marginLeft:0,marginRight:0,paddingTop:5,paddingBottom:5}},"\u6559\u80b2\u5c40\u5e97\u5fae\u4fe1"),r.a.createElement(_t.a,{style:{width:105,height:105,marginTop:10},preview:!1,src:a(407)}),r.a.createElement("div",{style:{textAlign:"center",backgroundColor:"red",color:"white",marginTop:10,marginLeft:0,marginRight:0,paddingTop:5,paddingBottom:5}},"\u6559\u80b2\u5c40\u5e97\u7535\u8bdd"),r.a.createElement("div",{style:{textAlign:"center"}},"13290768588"),r.a.createElement("div",{style:{textAlign:"center"}},"\uff08\u5fae\u4fe1\u540c\u53f7\uff09"),r.a.createElement("div",{style:{textAlign:"center",backgroundColor:"red",color:"white",marginTop:10,marginLeft:0,marginRight:0,paddingTop:5,paddingBottom:5}},"\u6559\u80b2\u5c40\u5e97\u5730\u5740"),r.a.createElement("div",{style:{textAlign:"center"}},"\u6f33\u6d66\u53bf\u7ee5\u5b89\u9547"),r.a.createElement("div",{style:{textAlign:"center"}},"\u5e9c\u524d\u8857\u897f247\u53f7"),r.a.createElement("div",{style:{textAlign:"center"}},"\uff08\u6559\u80b2\u5c40\u5bf9\u9762\uff09"),r.a.createElement("div",{style:{textAlign:"center",marginTop:40}},r.a.createElement(_t.a,{style:{width:100,height:100},preview:!1,src:a(408)})),r.a.createElement("div",{style:{textAlign:"center",marginTop:40}},"\u9875\u7801"),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("span",null,o),r.a.createElement("span",null,"/"),r.a.createElement("span",null,i))))}))))))}}]),n}(r.a.Component),ia=[{index:0,name:"001 - \u5f2f\u9ea6(\u6559\u80b2\u5c40\u5e97)",userId:"3995767"},{index:1,name:"002 - \u5f2f\u9ea6(\u65e7\u9547\u5e97)",userId:"3995771"},{index:2,name:"003 - \u5f2f\u9ea6(\u6c5f\u6ee8\u5e97)",userId:"4061089"},{index:3,name:"004 - \u5f2f\u9ea6(\u6c64\u6cc9\u5e97)",userId:"4061092"},{index:4,name:"005 - \u5f2f\u9ea6(\u76d8\u9640\u5e97)",userId:"4339546"},{index:5,name:"006 - \u5f2f\u9ea6(\u72ee\u5934\u5e97)",userId:"4359267"},{index:6,name:"007 - \u5f2f\u9ea6(\u6f33\u6d66\u7acb\u4eba)",userId:"4382444"}],oa=[{index:0,name:"\u73b0\u70e4\u9762\u5305",categoryId:"1593049816479739965"},{index:1,name:"\u897f\u70b9\u6155\u65af",categoryId:"1592989355905414162"},{index:2,name:"\u5e38\u6e29\u86cb\u7cd5",categoryId:"1593049881212199906"},{index:3,name:"\u5410\u53f8\u9762\u5305",categoryId:"1593049854760654816"},{index:4,name:"\u9910\u5305\u9762\u5305",categoryId:"1626767161867698544"}],ca=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchStockList();case 2:n.updateWeixinConfig();case 3:case"end":return e.stop()}}),e)}))),n.fetchStockList=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.setState({stockListData:[],stockLoading:!0},Object(s.a)(l.a.mark((function e(){var t,a,r,i,o,c,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.currentShop4StockList,r=t.currentCategory4StockList,i=ae()(),o=i.endOf("day").format("YYYY.MM.DD HH:mm:ss"),c=i.subtract(3,"days").startOf("day").format("YYYY.MM.DD HH:mm:ss"),e.next=6,q(r.categoryId,a.userId,"1",c,o,"stock","true");case 6:0===(s=e.sent).errCode&&(d=s.list,n.setState({stockListData:d,stockLoading:!1}));case 8:case"end":return e.stop()}}),e)}))))}catch(t){n.setState({stockLoading:!1})}case 1:case"end":return e.stop()}}),e)}))),n.updateWeixinConfig=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==window.navigator.userAgent.toLowerCase().indexOf("micromessenger")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,X(document.URL.split("#")[0]);case 5:if(!(t=e.sent)){e.next=12;break}if(t.appId){e.next=9;break}return e.abrupt("return");case 9:window.wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]}),window.wx.ready((function(){var e="http://gratefulwheat.ruyue.xyz/image/\u751f\u65e5\u86cb\u7cd5/image4wechat.jpg";window.wx.updateAppMessageShareData({title:"\u5f2f\u9ea6\u5e93\u5b58\u7ba1\u7406\uff08\u5185\u90e8\uff09",desc:"\u7528\u4e8e\u8fde\u9501\u95e8\u5e97\u5e93\u5b58\u67e5\u770b\u3001\u76d8\u70b9\u3001\u8c03\u5ea6",link:document.URL,imgUrl:e,success:function(){},fail:function(e){}}),window.wx.updateTimelineShareData({title:"\u5f2f\u9ea6\u5e93\u5b58\u7ba1\u7406\uff08\u5185\u90e8\uff09",link:document.URL,imgUrl:e,success:function(){},fail:function(){}})})),window.wx.error((function(e){console.log("window.wx error res = "+JSON.stringify(e))}));case 12:case"end":return e.stop()}}),e)}))),n._a=1,n.state={stockLoading:!1,currentShop4StockList:ia[0],currentCategory4StockList:oa[0],stockListData:[]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.stockLoading,n=t.currentShop4StockList,i=t.currentCategory4StockList,o=t.stockListData,c=[{title:"\u5e8f",dataIndex:"key",key:"key",width:20,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u6761\u7801",dataIndex:"barcode",productName:"barcode",width:60,render:function(e){return r.a.createElement("span",{style:{fontSize:10}},e)}},{title:"\u540d\u79f0",dataIndex:"productName",productName:"productName",width:80,render:function(e){return r.a.createElement("span",{style:{fontSize:12}},e)}},{title:"\u5e93\u5b58",dataIndex:"stock",productName:"stock",width:30,render:function(e){var t="black";return"0"!==e&&"-"!==e.substring(0,1)||(t="red"),r.a.createElement("span",{style:{fontSize:16,color:t}},e)}}];return r.a.createElement("div",{style:{marginLeft:20,marginTop:5,marginRight:20}},r.a.createElement("div",{style:{fontSize:15,marginBottom:5}},"\u5e93\u5b58\u7ba1\u7406"),r.a.createElement(y.a,{style:{marginLeft:0},overlay:function(){return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.key,e.setState({currentShop4StockList:ia[n]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchStockList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ia.map((function(e){var t="black";return e.name===n.name&&(t="red"),r.a.createElement(b.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:a},r.a.createElement(v.a,{size:"small",style:{width:160},onClick:function(e){return e.preventDefault()}},n.name,r.a.createElement(Q.a,null))),r.a.createElement(y.a,{style:{marginLeft:0},overlay:function(){return r.a.createElement(b.a,{onClick:function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.key,e.setState({currentCategory4StockList:oa[n]},Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchStockList();case 2:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},oa.map((function(e){var t="black";return e.name===i.name&&(t="red"),r.a.createElement(b.a.Item,{key:e.index,style:{color:t}},e.name)})))},arrow:!0,trigger:["click"],disabled:a},r.a.createElement(v.a,{size:"small",style:{width:100},onClick:function(e){return e.preventDefault()}},i.name,r.a.createElement(Q.a,null))),r.a.createElement(Ye.a,{style:{marginTop:10},size:"small",loading:a,dataSource:o,columns:c,pagination:!1,bordered:!0,footer:function(){return r.a.createElement("div",{style:{textAlign:"center",height:15,fontSize:12}},"\u603b\u5171".concat(o.length,"\u9879"))}}))}}]),a}(r.a.Component),la=f.a.Search,sa=["\u78a7\u6842\u56ed\u5fa1\u6c5f\u5e9c","\u6f33\u6d66\u78a7\u6842\u56ed","\u5e38\u5fb7\u5546\u8d38\u57ce","\u5927\u4ead\u82b1\u56ed","\u4e1c\u5e73\u5c0f\u533a","\u5e9c\u524d\u5510\u8857&\u4e07\u65b0\u5e7f\u573a","\u5bcc\u4e3d\u5c71\u5e84","\u6e2f\u57ce\u56fd\u9645\u8c6a\u5ead","\u82b1\u5f00\u5bcc\u8d35","\u82b1\u5f00\u5bcc\u8d351","\u534e\u5e9c\u4e8c\u671f","\u534e\u5e9c\u4e09\u671f","\u534e\u5e9c\u4e94\u671f","\u534e\u5e9c\u4e00\u671f","\u5409\u7965\u798f\u90b8","\u5047\u65e5\u65b0\u5929\u56fd\u9645","\u6c5f\u6ee8\u82b1\u56ed\u4e8c\u671f","\u6c5f\u6ee8\u82b1\u56ed\u4e00\u671f","\u91d1\u5229\u82b1\u56ed&\u91d1\u6d66\u82b1\u56ed","\u91d1\u7eff\u6b27\u6d32\u57ce","\u805a\u6e90\u4e1c\u5cb8","\u5170\u6eaa\u5fa1\u5885","\u9f99\u57ce\u5c0a\u5ead","\u9f99\u95e8\u82b1\u56ed","\u7f8e\u4f26\u6e05\u534e\u56ed","\u6b27\u6d32\u9633\u5149\u5c0f\u533a","\u94b1\u9686\u9996\u5e9c","\u6da6\u666f\u91d1\u5ea7","\u76db\u5510\u82b1\u56ed","\u77f3\u658b\u82b1\u56ed","\u4e66\u9999\u95e8\u7b2c&\u4e1c\u82d1\u82b1\u56ed","\u6c64\u6cc9\u4e16\u7eaa","\u897f\u6e56\u82b1\u56ed&\u897f\u6e56\u91d1\u5178&\u9526\u7ee3\u897f\u6e56","\u65b0\u90fd\u5e7f\u573a","\u5b66\u5e9c\u4e00\u53f7","\u9633\u5149\u9f99\u6cc9","\u6021\u666f\u56ed","\u5370\u77f3\u82b1\u56ed","\u5370\u77f3\u82b1\u56edB\u533a","\u76c8\u4e30\u82b1\u56ed\u4e00\u671f&\u76c8\u4e30\u82b1\u56ed\u4e8c\u671f","\u5fa1\u666f\u5c71\u5e84","\u6f33\u6d66\u5bbe\u9986","\u9633\u5149\u57ce\u6c64\u6cc9\u4e16\u7eaa3\u671f","\u91d1\u51ef\u5609\u82b1\u56ed","\u5bcc\u6e90\u65b0\u57ce"],da=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.loadMapByKeyword(),n.updateWeixinConfig();case 2:case"end":return e.stop()}}),e)}))),n.loadMapByKeyword=function(){var e=n.state.keyword,t=[];if(e&&""!==e)for(var a=0;a<sa.length;++a){var r=sa[a];-1!==r.indexOf(e)&&t.push(r)}n.setState({buildMapNamesFilter:t})},n.updateWeixinConfig=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==window.navigator.userAgent.toLowerCase().indexOf("micromessenger")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,X(document.URL.split("#")[0]);case 5:if(!(t=e.sent)){e.next=12;break}if(t.appId){e.next=9;break}return e.abrupt("return");case 9:window.wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData"]}),window.wx.ready((function(){var e="http://gratefulwheat.ruyue.xyz/image/\u6f33\u6d66\u5c0f\u533a\u697c\u680b\u56fe/\u6f33\u6d66\u897f\u6e56.jpg";window.wx.updateAppMessageShareData({title:"\u6f33\u6d66\u5c0f\u533a\u697c\u680b\u56fe",desc:"\u67e5\u770b\u6f33\u6d66\u5404\u4e2a\u5c0f\u533a\u7684\u697c\u680b\u53f7",link:document.URL,imgUrl:e,success:function(){},fail:function(e){}}),window.wx.updateTimelineShareData({title:"\u6f33\u6d66\u5c0f\u533a\u697c\u680b\u56fe",link:document.URL,imgUrl:e,success:function(){},fail:function(){}})})),window.wx.error((function(e){console.log("window.wx error res = "+JSON.stringify(e))}));case 12:case"end":return e.stop()}}),e)}))),n.handleAll=function(){for(var e=[],t=0;t<sa.length;++t){var a=sa[t];e.push(a)}n.setState({buildMapNamesFilter:e})},n.state={keyword:"",buildMapNamesFilter:[]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.keyword,n=t.buildMapNamesFilter;return r.a.createElement("div",{style:{marginLeft:20,marginTop:5,marginRight:20}},r.a.createElement("span",null,r.a.createElement(la,{style:{width:180,marginTop:4,marginLeft:6,marginBottom:4},size:"middle",placeholder:"\u5c0f\u533a\u540d",onSearch:Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.loadMapByKeyword();case 1:case"end":return t.stop()}}),t)}))),value:a,onChange:function(t){var a=t.target.value;e.setState({keyword:a},(function(){e.loadMapByKeyword()}))}})),r.a.createElement("span",null,r.a.createElement(v.a,{type:"primary",style:{marginLeft:6,marginTop:4},onClick:this.handleAll},"\u5168\u90e8\u5c0f\u533a")),r.a.createElement("div",null,n.map((function(e){var t="/image/\u6f33\u6d66\u5c0f\u533a\u697c\u680b\u56fe/"+e+".jpg";return r.a.createElement("div",{key:e},r.a.createElement("div",null,r.a.createElement("span",{style:{color:"red"}},"\u300a",e,"\u300b")),r.a.createElement("img",{alt:"\u8bf7\u6dfb\u52a0\u56fe",style:{width:"100%"},src:t}),r.a.createElement("div",{style:{height:20}}))}))),r.a.createElement("div",{style:{height:30}},"---\u6ca1\u6709\u66f4\u591a\u4e86\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6dfb\u52a0---"),r.a.createElement("div",{style:{textAlign:"center",background:"#D8D8D8",height:100}},r.a.createElement("div",{style:{paddingTop:12,marginTop:10}},"\u603b\u90e8\uff1a\u6f33\u5dde\u5e02\u6f33\u6d66\u53bf\u5e9c\u524d\u8857\u897f247\u53f7(\u6559\u80b2\u5c40\u5bf9\u9762)"),r.a.createElement("div",{style:{color:"blue",fontSize:14}},r.a.createElement("span",{style:{color:"black"}},"\xa9\u5f2f\u9ea6"),r.a.createElement("span",{style:{color:"blue",marginLeft:8}},"\u95fdICP\u59072022007668\u53f7-1"),r.a.createElement("div",null,r.a.createElement("a",{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=35062302000230"},r.a.createElement("span",null,r.a.createElement(_t.a,{preview:!1,src:"/image/\u5907\u6848\u56fe\u6807.png",style:{float:"left"}})),r.a.createElement("span",{style:{marginLeft:8}},"\u95fd\u516c\u7f51\u5b89\u5907 35062302000230\u53f7"))))))}}]),a}(r.a.Component),ua=a(46),ma=a(241),pa=(a(409),a(16)),fa=a(247);function ha(){var e=new URLSearchParams(Object(ua.e)().search);return r.a.createElement("div",null,r.a.createElement(ua.a,{exact:!0,path:"/",children:r.a.createElement(Xt,{query:e})}),r.a.createElement(ua.a,{path:"/productsale",children:r.a.createElement(oe,{query:e})}),r.a.createElement(ua.a,{path:"/discardsale",children:r.a.createElement(de,{query:e})}),r.a.createElement(ua.a,{path:"/productsaleanddiscard",children:r.a.createElement(ge,{query:e})}),r.a.createElement(ua.a,{path:"/couponsummary",children:r.a.createElement(ve,{query:e})}),r.a.createElement(ua.a,{path:"/diyreserve",children:r.a.createElement(_e,{query:e})}),r.a.createElement(ua.a,{path:"/productionPlanPrinter",children:r.a.createElement(at,{query:e})}),r.a.createElement(ua.a,{path:"/orderManagement",children:r.a.createElement(Ge,{query:e})}),r.a.createElement(ua.a,{path:"/productDistributePrinter",children:r.a.createElement(ot,{query:e})}),r.a.createElement(ua.a,{path:"/productDistributeInputer",children:r.a.createElement(Dt,{query:e})}),r.a.createElement(ua.a,{path:"/productManagement",children:r.a.createElement(Ot,{query:e})}),r.a.createElement(ua.a,{path:"/birthdayCakeSale",children:r.a.createElement(Xt,{query:e})}),r.a.createElement(ua.a,{path:"/productMenu",children:r.a.createElement(aa,{query:e})}),r.a.createElement(ua.a,{path:"/productMenu4Printer",children:r.a.createElement(ra,{query:e})}),r.a.createElement(ua.a,{path:"/productStockManagement",children:r.a.createElement(ca,{query:e})}),r.a.createElement(ua.a,{path:"/buildingMap",children:r.a.createElement(da,{query:e})}))}function ga(){return r.a.createElement(pa.a,{locale:fa.a},r.a.createElement(ma.a,null,r.a.createElement(ha,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ga,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){e.exports=a.p+"static/media/di.0258c2a5.wav"},96:function(e,t){var a,n,r;function i(){try{var e=navigator.userAgent;if(e.match(/Windows\sPhone/i))return!0;if(e.match(/iPhone|iPod|iPad/i))return!0;if(e.match(/Android/i))return!0;if(e.match(/Edge\D?\d+/i))return!0;var t=e.match(/Trident\D?\d+/i),a=e.match(/MSIE\D?\d+/i),n=e.match(/OPR\D?\d+/i),r=e.match(/Firefox\D?\d+/i),i=e.match(/x64/i);if(!t&&!a&&i)return!0;if(r){if((r=r[0].match(/\d+/))[0]>=41||i)return!0}else if(n){if((n=n[0].match(/\d+/))[0]>=32)return!0}else if(!t&&!a){var o=e.match(/Chrome\D?\d+/i);if(o&&(o=o[0].match(/\d+/))[0]>=41)return!0}return!1}catch(c){return!0}}i()&&function(){if("loading"!==r&&"complete"!==r){r="loading";var e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,t=document.createElement("script"),a=document.createElement("script");t.src="http://localhost:8000/CLodopfuncs.js?priority=1",a.src="http://localhost:18000/CLodopfuncs.js",t.onload=a.onload=function(){r="complete"},t.onerror=a.onerror=function(e){r="complete"},e.insertBefore(t,e.firstChild),e.insertBefore(a,e.firstChild),n=!!(t.src+a.src).match(/\/\/localho|\/\/127.0.0./i)}}(),e.exports={getLodop:function(e,t){var o;try{var c=navigator.userAgent,l=!!c.match(/MSIE/i)||!!c.match(/Trident/i);if(i()){try{o=window.getCLodop()}catch(d){}if(!o&&"complete"!==r)return void("loading"===r?alert("\u7f51\u9875\u8fd8\u6ca1\u4e0b\u8f7d\u5b8c\u6bd5\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4e0b\u518d\u64cd\u4f5c."):alert("\u6ca1\u6709\u52a0\u8f7dCLodop\u7684\u4e3bjs\uff0c\u8bf7\u5148\u8c03\u7528loadCLodop\u8fc7\u7a0b."));if(!o)return void(document.body.innerHTML="<br><font color='#FF00FF'>Web\u6253\u5370\u670d\u52a1CLodop\u672a\u5b89\u88c5\u542f\u52a8\uff0c\u70b9\u51fb\u8fd9\u91cc<a href=download/CLodop_Setup_for_Win32NT.exe target='_self'>\u4e0b\u8f7d\u6267\u884c\u5b89\u88c5</a>"+(n?"<br>\uff08\u82e5\u6b64\u524d\u5df2\u5b89\u88c5\u8fc7\uff0c\u53ef<a href='CLodop.protocol:setup' target='_self'>\u70b9\u8fd9\u91cc\u76f4\u63a5\u518d\u6b21\u542f\u52a8</a>\uff09":"")+"\uff0c\u6210\u529f\u540e\u8bf7\u5237\u65b0\u672c\u9875\u9762\u3002</font>"+document.body.innerHTML);window.CLODOP.CVERSION<"4.1.2.7"&&(document.body.innerHTML="<br><font color='#FF00FF'>Web\u6253\u5370\u670d\u52a1CLodop\u9700\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href=download/CLodop_Setup_for_Win32NT.exe target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u5237\u65b0\u9875\u9762\u3002</font>"+document.body.innerHTML),t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e)}else{var s=l&&!!c.match(/x64/i);if(e||t?o=l?e:t:a?o=a:((o=document.createElement("object")).setAttribute("width",0),o.setAttribute("height",0),o.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),l?o.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):o.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(o),a=o),!o||!o.VERSION)return c.indexOf("Chrome")>=0&&(document.body.innerHTML="<br><br><font color='#FF00FF'>(\u5982\u679c\u6b64\u524d\u6b63\u5e38\uff0c\u4ec5\u56e0\u6d4f\u89c8\u5668\u5347\u7ea7\u6216\u91cd\u5b89\u88c5\u800c\u51fa\u95ee\u9898\uff0c\u9700\u91cd\u65b0\u6267\u884c\u4ee5\u4e0a\u5b89\u88c5\uff09</font>"+document.body.innerHTML),c.indexOf("Firefox")>=0&&(document.body.innerHTML="<br><br><font color='#FF00FF'>\uff08\u6ce8\u610f\uff1a\u5982\u66fe\u5b89\u88c5\u8fc7Lodop\u65e7\u7248\u9644\u4ef6npActiveXPLugin,\u8bf7\u5728\u3010\u5de5\u5177\u3011->\u3010\u9644\u52a0\u7ec4\u4ef6\u3011->\u3010\u6269\u5c55\u3011\u4e2d\u5148\u5378\u5b83\uff09</font>"+document.body.innerHTML),document.body.innerHTML=(s?"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u672a\u5b89\u88c5!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop64.exe target='_self'>\u6267\u884c\u5b89\u88c5</a>,\u5b89\u88c5\u540e\u8bf7\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u8fdb\u5165\u3002</font>":"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u672a\u5b89\u88c5!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop32.exe target='_self'>\u6267\u884c\u5b89\u88c5</a>,\u5b89\u88c5\u540e\u8bf7\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u8fdb\u5165\u3002</font>")+document.body.innerHTML,o}return o.VERSION<"6.2.2.6"&&(i()||(document.body.innerHTML=(s?"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u9700\u8981\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop64.exe target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u91cd\u65b0\u8fdb\u5165\u3002</font>":"<br><font color='#FF00FF'>\u6253\u5370\u63a7\u4ef6\u9700\u8981\u5347\u7ea7!\u70b9\u51fb\u8fd9\u91cc<a href=download/install_lodop32.exe target='_self'>\u6267\u884c\u5347\u7ea7</a>,\u5347\u7ea7\u540e\u8bf7\u91cd\u65b0\u8fdb\u5165\u3002</font>")+document.body.innerHTML)),o}catch(d){alert("getLodop\u51fa\u9519:"+d)}}}}},[[251,1,2]]]);
//# sourceMappingURL=main.4a241ac7.chunk.js.map